import{d as An,w as Ne,S as X,i as Z,s as K,c as te,g as Y,o as we,e as G,a as E,b as ve,f as I,l as oe,n as ce,h as N,r as Xe,j as W,k as se,m as V,t as Pe,p as R,q as Ie,u as _e,v as Re,x as Ze,y as q,z as j,A as Ke,B as Qe,C as et,D as M,E as F,F as H,G as Be,H as Ve,I as On,J as rt,K as dt,L as ae,M as $e,N as ye,O as de}from"./svelte-fdfc2579.js";import{c as B}from"./cytoscape-716fe419.js";import{g as Fn}from"./cytoscape-grid-guide-e8f04797.js";import{e as In}from"./cytoscape-edgehandles-98723a1d.js";import{v as gn}from"./uuid-4a60fe23.js";import{J as Mt}from"./jszip-84e7feea.js";import{s as Nn}from"./cytoscape-svg-f6b36117.js";import{F as ct}from"./file-saver-daf94496.js";import{E as Tn}from"./jspdf-f4d4ca1d.js";import{U as xn}from"./svg2pdf.js-0c98a8e5.js";import{d as Pn}from"./cytoscape-dagre-22838d04.js";import{f as Vn}from"./cytoscape-fcose-1883323b.js";import{c as Rn}from"./cytoscape-cola-0e9b31a3.js";import{c as zn}from"./cytoscape-context-menus-864590d1.js";import{i as Bn}from"./@jaames-324f80d4.js";import{p as Un}from"./cytoscape-panzoom-50d4e635.js";import{u as Gn}from"./cytoscape-undo-redo-8b156ffa.js";import{a as qn}from"./cytoscape-automove-b06479d5.js";import{K as pn}from"./konva-9c11d4c7.js";import{n as jn}from"./cytoscape-node-editing-50bf11b2.js";import{e as Hn}from"./cytoscape-edge-editing-11f5d8e5.js";import{D as Dt}from"./dexie-5509e3b5.js";import"./core-js-93797867.js";import"./functional-red-black-tree-9a31655a.js";import"./lodash.memoize-aae0dfad.js";import"./lodash.throttle-085a2e14.js";import"./dagre-e7a63eac.js";import"./graphlib-04d9d874.js";import"./lodash-399c0d8f.js";import"./@babel-f352b073.js";import"./fflate-7e11f8f1.js";import"./cssesc-ae0dab9a.js";import"./font-family-papandreou-e99f1152.js";import"./svgpath-0da963bf.js";import"./specificity-c7128631.js";import"./cose-base-abb6f3d0.js";import"./layout-base-8b616591.js";import"./webcola-fa77233e.js";import"./jquery-fb849a2e.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();const Q=Ne(null),yt=Ne(null),De=Ne(null);let ne=Ne({meanStruc:"default",intOvFree:!0,intLvFree:!1,estimator:"default",se:"default",missing:"listwise",n_boot:1e3,fix_first:!0,fix_single:!0,auto_var:!0,auto_cov_lv_x:!0,auto_cov_y:!0,fixed_x:!0,mode:"user model","auto.th":!0,"auto.delta":!0}),ue=Ne({gridShow:!1,gridSpace:26,gridColor:"#dedede",gridWidth:1,gridMovePan:!1,gridSnap:!1,gridAlign:!0,gridResize:!1,showLav:!0,showVar:!0,showMean:!0,std:!1,view:"est",ci:.95,number_digits:2}),Oe=Ne({lastFitModel:null,lastFitLavFit:null,lastFitData:null}),U=Ne({fitting:!1,loadingMode:!1,runCounter:0,modelEmpty:!0,dataAvail:!1,columnNames:null,loadedFileName:null,ids:null,dragged:null,draggedName:null,full:!0,ready:!1,parsedModel:!1,meansModelled:null,buttonDown:!1,showServerErrors:!0,everEdge:!1,drawing:"none",undoEmpty:!0,redoEmpty:!0,server:!1,shinyapps:!1}),ht=Ne(0);An(U,n=>n.columnNames);const hn=Ne({type:"info",message:"",key:0});function ge(n,e){hn.update(o=>({type:n,message:e,key:o.key+1}))}ge("info","Greetings. lavaangui is BETA software. Please report any bugs at https://github.com/karchjd/lavaangui/issues.");function Wn(n,e,o){let t;te(n,ue,l=>o(1,t=l));let i=!1;Fn(B);let s=Y(Q);var r={snapToGridOnRelease:!1,drawGrid:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:2e3,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};return we(()=>{s.gridGuide(r),o(0,i=!0)}),n.$$.update=()=>{n.$$.dirty&3&&i&&t.gridShow!==void 0&&Y(Q).gridGuide({drawGrid:t.gridShow}),n.$$.dirty&3&&i&&t.gridSpace!==void 0&&Y(Q).gridGuide({gridSpacing:t.gridSpace}),n.$$.dirty&3&&i&&t.gridWidth!==void 0&&Y(Q).gridGuide({lineWidth:t.gridWidth}),n.$$.dirty&3&&i&&t.gridMovePan!==void 0&&Y(Q).gridGuide({panGrid:t.gridMovePan}),n.$$.dirty&3&&i&&t.gridSnap!==void 0&&Y(Q).gridGuide({snapToGridDuringDrag:t.gridSnap}),n.$$.dirty&3&&i&&t.gridAlign!==void 0&&Y(Q).gridGuide({snapToAlignmentLocationOnRelease:t.gridAlign}),n.$$.dirty&3&&i&&t.gridResize!==void 0&&Y(Q).gridGuide({resize:t.gridResize})},[i,t]}class Yn extends X{constructor(e){super(),Z(this,e,Wn,null,K,{})}}const le="observed-variable",me="latent-variable",Le="constant",Ee="free",We="nolabel",he="fromUser",ze="label",Te="byLav",Ce="fixed",Ae="forcefree",Me="directed",Fe="undirected",lt="loop",Ue="linked",xe="fromLav",At="hasEst",ft="validated",Je="continous",Ye="ordered",Jn="hasEstFixed",je=80,Xn=80,mt="loRegression",it="regression",He="factorLoad",Zn=[{selector:"element",style:{"font-size":function(n){return n.data("font-size")||14}}},{selector:"node",style:{width:je.toString(),height:"80","background-color":function(n){return n.data("background-color")||"white"},"border-color":function(n){return n.data("border-color")||"grey"},"border-width":function(n){return n.data("border-width")||"2px"},label:"data(label)","text-valign":"center","text-halign":"center","text-wrap":"ellipsis","text-max-width":function(n){return n.width()}}},{selector:`node.${le}`,style:{shape:"rectangle"}},{selector:`node.${le}.${Ye}`,style:{"border-style":"double","border-width":5}},{selector:`node.${me}`,style:{shape:"ellipse","border-color":"black"}},{selector:`node.${Le}`,style:{shape:"triangle",label:"1","text-valign":"center","text-margin-y":"10px","border-color":"black"}},{selector:`node.${Ue}`,style:{"border-color":"black"}},{selector:"edge",style:{width:function(n){return n.data("width")||3},"line-color":function(n){return n.data("line-color")||"#000"},"target-arrow-color":function(n){return n.data("target-arrow-color")||"#000"},"source-arrow-color":function(n){return n.data("source-arrow-color")||"#000"},"target-arrow-shape":"triangle","curve-style":"bezier","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":Xn,"z-index":10,color:"#000","text-outline-color":"#fff","text-outline-width":"2px","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4px"}},{selector:"edge.loop",style:{"curve-style":"bezier","source-arrow-shape":"triangle","loop-direction":function(n){return n.data("loop-direction")||0},"loop-sweep":.8,"control-point-step-size":n=>{const e=n.source(),o=parseInt(e.style("height")),t=parseInt(e.style("width"));let i;return n.style("loop-direction")=="0deg"||n.style("loop-direction")=="180deg"?i=o:n.style("loop-direction")=="90deg"||n.style("loop-direction")=="270deg"?i=t:i=Math.max(t,o),i/80*60}}},{selector:`edge.${Fe}`,style:{"curve-style":"unbundled-bezier","control-point-distances":function(n){return n.data("control-point-distances")||[-100]},"control-point-weights":[.5],"source-arrow-shape":"triangle"}},{selector:`edge.${ze}, edge.${ze}`,style:{label:function(n){return n.data("label")}}},{selector:`edge.${Ce}.${ze}`,style:{label:function(n){return n.data("label")+"@"+n.data("value")}}},{selector:`edge.${Ce}.${We}`,style:{label:function(n){return"@"+n.data("value")}}},{selector:`edge.${Ae}`,style:{"line-color":"blue"}},{selector:`edge.${xe}, edge.${Te}`,style:{"line-style":"dashed"}},{selector:"edge.hidden, node.hidden",style:{display:"none"}},{selector:"edge:selected",style:{"underlay-opacity":.5,"underlay-color":"#928ff8"}},{selector:"node:selected",style:{"underlay-color":"#928ff8","underlay-opacity":.5}}],Kn={autoungrabify:!1,autolock:!1,style:Zn,minZoom:.02,maxZoom:5},Qn={preview:!1,hoverDelay:150,handleNodes:"node",snap:!0,handleColor:"#ff0000",handleSize:10,canConnect:function(n,e){return!cy.edges(function(t){if(!t.isUserAdded())return!1;const i=t.source().id()==n.id()&&t.target().id()==e.id(),s=t.source().id()==e.id()&&t.target().id()==n.id();return i||s}).length}};function ei(n){B.use(In);var e=B(Kn);return e.boxSelectionEnabled(!0),Q.set(e),yt.set(e.edgehandles(Qn)),[]}class ti extends X{constructor(e){super(),Z(this,e,ei,null,K,{})}}function ie(n){var e=Y(U);if(!e.full)return;let o=Y(Q);const t=o.edges();for(var i=0;i<t.length;i++)t[i].removeEstimates();if(o.getUserEdges().length==0){o.getLavaanNodes().remove(),o.getLavaanEdges().remove(),Shiny.setInputValue("show_help",Math.random());return}if(!e.dataAvail&&n=="estimate"){ge("danger","Model not send to lavaan because no data available");return}let s=bn(n);Shiny.setInputValue("run-fromJavascript",JSON.stringify(s)),Shiny.setInputValue("runCounter",Math.random()),n==="user model"&&o.getLavaanModifiedEdges().forEach(r=>{r.freePara()})}function ni(n,e){for(let o=0;o<n.length;o++)if(n[o]===e)return!0;return!1}function ot(n,e){let o;n==null?o="1":o=n.getLabel();let t=!1,i;if(e.isFixed()&&!e.isModifiedLavaan()?(i=e.getValue()+"*"+o,t=!0):e.isForceFree()&&(i="NA*"+o,t=!0),e.hasLabel()){const s=e.getLabel();t?i+=" + "+s+"*"+o:(t=!0,i=s+"*"+o)}else t||(i=o);return i}class ii{constructor(e,o,t=null,i=null,s=null,r=null){this.mode=e,Object.assign(this,{model:{options:t,syntax:i,R_script:o,ordered_labels:r},forceUpdate:Math.random(),cache:s})}}function Ot(n,e="target"){let o="";const t=Math.max(...n.map(l=>l[e]().position().x))-Math.min(...n.map(l=>l[e]().position().x)),i=Math.max(...n.map(l=>l[e]().position().y))-Math.min(...n.map(l=>l[e]().position().y)),s=t>=i?"x":"y",r=n.map((l,d)=>({index:d,value:l.target().position()[s]})).sort((l,d)=>l.value-d.value).map(l=>l.index);for(let l=0;l<n.length;l++){const d=n[r[l]][e]();l>0&&(o+=" + "),o+=ot(d,n[r[l]])}return o}function bn(n){let e=Y(Q),o=Y(U),t="",i="";i+=`library(lavaan)
`,o.dataAvail?i+=`data <- read.csv("${o.loadedFileName}")
`:i+=`#make sure your data is loaded into the 'data' variable
`;let s=e.getLatentNodes();s=s.nodes(function(v){const y=v.connectedEdges(function(w){return w.isDirected()&&w.source().id()==v.id()});return y.length>0&&y.every(w=>w.target().isLatent())});let r=e.getLatentNodes();r=r.nodes(function(v){const y=v.connectedEdges(function(T){return T.isDirected()&&T.target().id()==v.id()}),w=v.connectedEdges(function(T){return T.isDirected()});return w.length>0&&y.length==w.length});let l=e.getLatentNodes(),d=!1;for(let v=0;v<l.length;v++){const y=l[v],w=y.connectedEdges(function(T){return T.isDirected()&&T.source().id()==y.id()&&(T.target().isObserved()&&T.isFactLoad()||s.some(C=>C.id()===y.id()))});w.length>0&&(d||(t+=`# measurement model
`,d=!0),t+=" "+y.getLabel()+" =~ "+Ot(w,"target")+`
`)}function u(v){return v.isDirected()&&!v.source().isConstant()&&(!(v.source().isLatent()&&v.target().isObserved())||v.isRegression())&&!(v.source().isLatent()&&s.some(w=>w.id()===v.source().id())&&v.target().isLatent())&&(v.isUserAdded()||v.isModifiedLavaan())&&!r.some(w=>w.id()===v.target().id())}let a=e.edges(u),m=[];for(let v=0;v<a.length;v++)ni(m,a[v].target())||m.push(a[v].target());if(m.length>0){t+=`
# regressions`;for(let v=0;v<m.length;v++){const y=m[v],w=y.connectedEdges(T=>u(T)&&T.target().same(y));if(w.length>0){let T="";for(var g=0;g<w.length;g++){var c=w[g].source();g>0&&(T+=" + "),T+=ot(c,w[g])}t+=`
 `+y.getLabel()+" ~ "+T}}}let f=e.edges(function(v){return(v.isUndirected()||v.myIsLoop())&&(v.isUserAdded()||v.isModifiedLavaan())});if(f.length>0){t+=`

# (residual) (co)variances`;for(let v=0;v<f.length;v++){let y=f[v].source().data("label");t+=`
 `+y+" ~~ "+ot(f[v].target(),f[v])}}const $=e.nodes(function(v){return v.isConstant()});for(let v=0;v<$.length;v++){const w=$[v].connectedEdges(function(T){return T.isUserAdded()});if(w.length>0){t+=`
# intercepts
`;for(var g=0;g<w.length;g++){var c=w[g].target();t+=c.getLabel()+" ~ "+ot(void 0,w[g])+`
`}}}d=!1;for(let v=0;v<r.length;v++){const y=r[v],w=y.connectedEdges(function(T){return T.isDirected()&&T.target().id()==y.id()});w.length>0&&(d||(t+=`

 #  formative factors
`,d=!0),t+=" "+y.getLabel()+" <~ "+Ot(w,"source")+`
`)}t=`'
`+t+`'

`;function h(v,y=60){return v.split(`
`).map(w=>{if(w.includes("+")&&w.length>y){const T=w.split(" + ");let C=[],p=T[0];const x=w.match(/^\s*/)[0],A=p.indexOf("~")+1;for(let J=1;J<T.length;J++)p.length+T[J].length+3>y?(C.push(p+" + "),p=x+" ".repeat(A)+T[J]):p+=" + "+T[J];return C.push(p),C.join(`
`)}return w}).join(`
`)}t=h(t);const S=e.nodes(function(v){return v.isOrdered()}).map(v=>v.getLabel()),_=oi(S);return i+="model <-"+t,i+="result <- lavaan(model, data, "+_,new ii(n,i,_,t=t,Y(Oe),S)}function oi(n){const e=Y(ne),o=ke(e.meanStruc),t=ke(e.intOvFree),i=ke(e.intLvFree);let s=`meanstructure = ${o},
		 int.ov.free = ${t}, int.lv.free = ${i},
		 estimator = ${gt(e.estimator)}, se = ${gt(e.se)},
		 missing = ${gt(e.missing)}, auto.fix.first = ${ke(e.fix_first)},
		 auto.fix.single = ${ke(e.fix_single)}, auto.var = ${ke(e.auto_var)},
		 auto.cov.lv.x = ${ke(e.auto_cov_lv_x)}, auto.cov.y = ${ke(e.auto_cov_y)},
  		 fixed.x = ${ke(e.fixed_x)}, auto.th = ${ke(e["auto.th"])}, 
  		 auto.delta = ${ke(e["auto.delta"])}`;if(e.se=="boot"){const r=`, bootstrap = ${e.n_boot})`;s=s+r}else s=s+")";return n.length>0&&(s=`ordered = ${'c("'+n.join('", "')+'")'}, 
    		 ${s}`),s}function gt(n){return'"'+n+'"'}function ke(n){if(n==!0||n=="true")return"TRUE";if(n==!1||n=="false")return"FALSE";if(n=="default")return'"default"';throw new Error("Should not happen")}let _n,vn;function $n(){_n=1,vn=1}$n();function si(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function ri(n){return si(n)?!0:(bootbox.alert(`The variable <b>${n}</b> was not added to the model because <b>${n}</b> is not a valid lavaan variable name. Please use only letters, numbers, underscores, and dots. The name must start with a letter or underscore and cannot end with a dot. You can use the <b>Show Data</b> menu to rename <b>${n}</b>.`),!1)}function be(n,e,o=!0,t=null,i=!1){let s=Y(Q),r=gn(),l;if(t!==null){if(!ri(t))return;if(s.nodes().find(u=>u.data().label===t)){ge("danger","Node with the same label already exists.");return}l=t}else n==le?l="x"+_n++:n==me?l="f"+vn++:l=void 0,s.nodes().find(u=>u.data().label===l)&&(l=l+".1");let d=Y(De);return e?d.do("add",{group:"nodes",data:{id:r,label:l},classes:[n,Je],renderedPosition:e}):(e={x:Math.random()*400+50,y:Math.random()*400+50},s.add({group:"nodes",data:{id:r,label:l},classes:[n,Je],renderedPosition:e})),o&&ie(Y(ne).mode),r}function qe(n,e,o=!0,t=!1,i=null,s=!0){let r=Y(Q),l=gn();return r.add({group:"edges",data:{id:l,source:n,target:e,value:t?i:void 0},classes:`${o?Me:Fe} ${s?he:xe} ${t?Ce:Ee} ${We}`})}function pe(n,e=!1){const o=fi(n);if(!o&&!e)return null;const t=ai(n),i=di(t),s=li(ci(i),i);return o&&o.data("loop-direction",`${s}deg`),s}function li(n,e){const o=[0,180,90,270],t=35,i=o.sort((l,d)=>{const u=Math.min(Math.abs(l-n),360-Math.abs(l-n)),a=Math.min(Math.abs(d-n),360-Math.abs(d-n));return u-a}),r=[[0,180],[90,270]].flatMap(l=>i.filter(d=>l.includes(d)));for(const l of r)if(!e.some(u=>{const a=Math.abs(l-u);return Math.min(a,360-a)<=t}))return l;return n}function ai(n){const e=cy.getElementById(n);if(e.length===0){console.error(`Node with ID ${n} does not exist.`);return}let o=[];return e.connectedEdges(t=>t.style("display")!=="none").forEach(t=>{const i=t.source(),s=t.target();let r;(i.id()!==e.id()||s.id()!==e.id())&&(i.id()===e.id()?r=Ft(t.sourceEndpoint(),e.position()):r=Ft(t.targetEndpoint(),e.position()),o.push(r))}),o}function Ft(n,e){return Object.keys(n).reduce((o,t)=>{if(e.hasOwnProperty(t))o[t]=n[t]-e[t];else throw new Error(`Key ${t} not found in second object`);return o},{})}function di(n){let e=[];return n.forEach(o=>{e.push(ui(o))}),e}function ui(n){let e=Math.atan2(n.y,n.x)*180/Math.PI;return e=(e+90)%360,e}function ci(n){let e=-1,o=null;for(let t=0;t<=360;t++){let i=1/0;for(let s=0;s<n.length;s++){let r=Math.abs(n[s]-t);r=Math.min(r,360-r),i=Math.min(i,r)}i>e&&(e=i,o=t)}return o}function fi(n,e){var o=cy.getElementById(n),t=null;return o.connectedEdges().forEach(function(i){var s=i.source(),r=i.target();if(s.id()===n&&r.id()===n){t=i;return}}),t!==null&&o.connectedEdges().length>1&&!t.hasClass("fixDeg")?t:null}function mi(n){let e,o,t;return{c(){e=G("div"),E(e,"id","cy"),E(e,"class","graph svelte-11pj9ut"),ve(e,"flex-basis",n[1].full?"70%":"100%")},m(i,s){I(i,e,s),n[6](e),o||(t=[oe(e,"mouseover",n[2]),oe(e,"mouseout",n[3]),oe(e,"mousemove",n[4]),oe(e,"drop",n[5]),oe(e,"dragover",gi)],o=!0)},p(i,[s]){s&2&&ve(e,"flex-basis",i[1].full?"70%":"100%")},i:ce,o:ce,d(i){i&&N(e),n[6](null),o=!1,Xe(t)}}}function gi(n){n.preventDefault()}function pi(n,e){let o=Math.atan2(n,-e)*(180/Math.PI);return o<0&&(o+=360),o}function hi(n,e,o){let t,i,s;te(n,De,y=>o(12,t=y)),te(n,U,y=>o(1,i=y)),te(n,ne,y=>o(13,s=y));let r=Y(Q),l=Y(yt),d,u={x:0,y:0};we(()=>{r.mount(d)});function a(y){if(W(U,i.buttonDown=!0,i),(y.key==="Alt"||y.key===" "||y.key.toLowerCase()==="x")&&(l.enableDrawMode(),y.key==="Alt"?W(U,i.drawing="undirected",i):W(U,i.drawing="directed",i)),y.key==="Backspace"){let w=r.$(":selected");w.length>0&&(t.do("remove",w),ie(s.mode)),W(U,i.buttonDown=!1,i)}if(["l","o","c"].includes(y.key.toLowerCase())){let w;switch(y.key.toLowerCase()){case"l":w=me;break;case"o":w=le;break;case"c":w=Le;break}be(w,{...u}),W(U,i.buttonDown=!1,i)}W(U,i.buttonDown=!1,i)}function m(){r.autoungrabify(!1),r.nodes().grabify()}function g(y){(y.key==="Alt"||y.key===" "||y.key.toLowerCase()==="x")&&(l.disableDrawMode(),W(U,i.drawing="none",i),m())}function c(){document.addEventListener("keydown",a),document.addEventListener("keyup",g)}function f(){document.removeEventListener("keydown",a,!1),document.removeEventListener("keyup",g,!1)}function $(y){u.x=y.offsetX,u.y=y.offsetY}r.on("ehcomplete",(y,w,T,C)=>{const p=C,x=w.id(),A=T.id();if(p.remove(),p.init(),x!==A?(i.drawing==="undirected"?p.setUndirected():p.setDirected(),pe(x),pe(A)):(p.makeLoop(),pe(A)),!((p.isUndirected()||p.myIsLoop())&&(w.isConstant()||T.isConstant()))&&!(p.isDirected()&&T.isConstant())&&(p.checkLORegressionMark(),!(p.isDirected()&&w.isConstant()&&T.connectedEdges(O=>O.isUserAdded()&&O.source().isConstant()).length>1))){if(p.myIsLoop()&&w.isOrdered()){ge("error","User-defined variance arrow is not allowed for ordered variables.");return}p.isDirected()&&w.isConstant()?p.makeMeanEdge():p.makeOtherEdge(),t.do("add",p),ie(s.mode)}});function h(y){let w=0;const T=100,C=T*2;y.preventDefault();let p={x:y.offsetX,y:y.offsetY};function x(O,k){let D;if(i.dataAvail){const fe=r.getObservedNodes().map(P=>P.data().label);D=i.columnNames.filter(P=>!fe.includes(P)).map(P=>({text:P,value:P}))}else D=Array.from({length:100},(fe,ee)=>`var${ee+1}`);const z={title:O,inputType:"select",multiple:!0,value:"",inputOptions:D,callback:k};bootbox.prompt(z)}function A(){ge("danger","Either no variable selected or at least one selected variable already is in the model.")}function J(O){return O&&!r.nodes().some(k=>k.data().label===O)}if(i.dragged=="observed-with-name")be(le,p,!0,i.draggedName,!0);else if(i.dragged=="multiple")x("Select Variables",function(O){if(J(O)){const k=r.zoom();O.forEach(D=>{be(le,{x:p.x+w*k,y:p.y},!0,D,!0),w+=T})}else A()});else if(i.dragged=="factor")x("Select Variables",function(O){if(J(O)){const k=r.zoom(),D=be(me,{x:p.x+T*k*O.length/2-je/2*k,y:p.y});O.forEach(z=>{const fe=be(le,{x:p.x+w*k,y:p.y+k*C},!0,z,!0);w+=T,qe(D,fe)}),W(ne,s.fix_first=!0,s),W(ne,s.fix_single=!0,s),W(ne,s.auto_var=!0,s),W(ne,s.intOvFree=!0,s),W(ne,s.intLvFree=!1,s)}else A()});else if(i.dragged=="growth"){let O=0;x("Select Time Points",function(k){if(J(k)){const D=r.zoom(),z=be(Le,{x:p.x+T*D*k.length/2-je/2*D,y:p.y},!0),fe=be(me,{x:p.x+je/2*D,y:p.y+1*C*D},!0,"Intercept"),ee=be(me,{x:p.x+T*D*(k.length-1)-je/2*D,y:p.y+1*C*D},!0,"Slope");qe(z,fe,!0,!1),qe(z,ee,!0,!1);let P=1;k.forEach(re=>{const Ge=be(le,{x:p.x+O*D,y:p.y+2*C*D},!0,re,!0);O+=T,qe(fe,Ge,!0,!0,1),P!=1&&qe(ee,Ge,!0,!0,P-1),P+=1}),W(ne,s.auto_var=!0,s),W(ne,s.intOvFree=!1,s),W(ne,s.intLvFree=!0,s)}})}else be(i.dragged,p);(i.dragged=="multiple"||i.dragged=="factor"||i.dragged=="growth")&&ie(s.mode),W(U,i.dragged=null,i)}let b=!1,S=null,_;r.on("mousedown","edge.loop",function(y){b=!0,S=y.target,S.unpanify(),_=S.style("loop-direction")});let L;r.on("mousemove",function(y){if(!b||!S)return;let T=S.source().renderedPosition();L=pi(u.x-T.x,u.y-T.y);const C=5,p=[0,90,180,270];for(let x=0;x<p.length;x++)if(Math.abs(L-p[x])<=C){L=p[x];break}S.data("loop-direction",`${L}deg`)}),window.addEventListener("mouseup",function(){if(b){if(b=!1,L===void 0||_===`${L}deg`)return;S.data("loop-direction",_),S.addClass("fixDeg"),t.do("style",{eles:S,style:{"loop-direction":`${L}deg`}}),S=null,L=void 0}});function v(y){se[y?"unshift":"push"](()=>{d=y,o(0,d)})}return[d,i,c,f,$,h,v]}class bi extends X{constructor(e){super(),Z(this,e,hi,mi,K,{})}}function yn(n){const e=n.source().position(),o=n.target().position(),t={x:o.x-e.x,y:o.y-e.y},i=Math.sqrt(t.x**2+t.y**2);return{normalizedEdgeVector:{x:t.x/i,y:t.y/i},edgeMidpoint:n.midpoint(),edgeSourcePos:e,edgeTargetPos:o}}function _i(n,e){const{normalizedEdgeVector:o,edgeMidpoint:t,edgeSourcePos:i,edgeTargetPos:s}=yn(n),r=(s.y-t.y)/o.y-70,l=(i.y-t.y)/o.y+70;let d=Math.min(r,e);return d=Math.max(l,d),{newMarginX:d*o.x,newMarginY:d*o.y}}function It(n,e){const{newMarginX:o,newMarginY:t}=_i(n,e);n.style({"text-margin-x":o,"text-margin-y":t})}function vi(n,e,o){let t,i;te(n,U,d=>o(2,t=d)),te(n,ne,d=>o(3,i=d));let s=Y(Q);s.on("add","node",function(d){const u=d.target;if(u.isObserved()){let a=t.columnNames;a&&a.includes(u.getLabel())&&(u.link(),ge("success",`Variable ${u.getLabel()} linked to data`))}t.modelEmpty&&s.edges().length>0&&W(U,t.modelEmpty=!1,t)}),s.on("remove","node",function(d){s.getUserEdges().length==0&&(W(U,t.modelEmpty=!0,t),Shiny.setInputValue("show_help",Math.random())),t.loadingMode||ie(i.mode)}),s.on("remove","edge",function(d){pe(d.target.source().id()),pe(d.target.target().id())}),s.on("add","edge",function(d){W(U,t.everEdge=!0,t),t.modelEmpty&&s.edges().length>0&&W(U,t.modelEmpty=!1,t),pe(d.target.source().id()),pe(d.target.target().id())}),s.on("position","node",function(d){const u=d.target,a=u.neighborhood().nodes(),m=u.connectedEdges(g=>g.isDirected());a.forEach(g=>{pe(g.id())}),m.forEach(g=>{const c=g.data("displacement");c&&It(g,c)})});let r=null,l=!1;return s.on("mousedown",function(d){const u=f=>parseFloat(f.replace("px","")),a=d.position;let m=null,g=1/0;const c=30;s.edges().forEach(function(f){if(f.isDirected()&&!f.hasClass("edgecontrolediting-hascontrolpoints")){const $=u(f.style("text-margin-x")),h=u(f.style("text-margin-y")),b=f.midpoint(),S={x:b.x+$,y:b.y+h},_=Math.abs(a.x-S.x),L=a.y-S.y,v=Math.sqrt(_*_+L*L);v<g&&v<c&&(m=f,g=v)}}),m!==null&&!m.hasClass(".edgecontrolediting-hascontrolpoints")&&(r=m,l=!0,d.preventDefault(),m.unpanify())}),s.on("class","edge",function(d){const u=d.target;u.hasClass("edgecontrolediting-hascontrolpoints")&&(u.style({"text-margin-x":0,"text-margin-y":0}),u.data("displacement",null),r&&u.id()===r.id()&&(r=null,l=!1))}),s.on("mousemove",function(d){if(l&&r){const{normalizedEdgeVector:u,edgeMidpoint:a}=yn(r),m=d.position,g={x:m.x-a.x,y:m.y-a.y};let c=g.x*u.x+g.y*u.y;r.data("displacement",c),It(r,c)}}),s.on("mouseup",function(d){l=!1,r=null}),[]}class $i extends X{constructor(e){super(),Z(this,e,vi,null,K,{})}}function Nt(n,e,o){const t=n.slice();return t[21]=e[o],t}function Tt(n){let e,o,t,i,s,r,l,d,u,a,m,g,c,f,$=n[1],h=[];for(let b=0;b<$.length;b+=1)h[b]=xt(Nt(n,$,b));return{c(){e=G("div"),o=V(),t=G("div"),i=G("button"),i.textContent="Multiple Variables",s=V(),r=G("button"),r.textContent="Factor",l=V(),d=G("button"),d.textContent="Growth",u=V(),a=G("div"),m=V(),g=G("ul");for(let b=0;b<h.length;b+=1)h[b].c();E(e,"class","vertical-bar svelte-r00s5r"),E(i,"class","draggable-item svelte-r00s5r"),E(i,"draggable","true"),E(r,"class","draggable-item svelte-r00s5r"),E(r,"draggable","true"),E(d,"class","draggable-item svelte-r00s5r"),E(d,"draggable","true"),E(t,"id","model-buttons"),E(t,"class","svelte-r00s5r"),E(a,"class","vertical-bar svelte-r00s5r"),E(g,"class","draggable-list svelte-r00s5r")},m(b,S){I(b,e,S),I(b,o,S),I(b,t,S),R(t,i),R(t,s),R(t,r),R(t,l),R(t,d),I(b,u,S),I(b,a,S),I(b,m,S),I(b,g,S);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(g,null);c||(f=[oe(i,"dragstart",n[14]),oe(r,"dragstart",n[15]),oe(d,"dragstart",n[16])],c=!0)},p(b,S){if(S&10){$=b[1];let _;for(_=0;_<$.length;_+=1){const L=Nt(b,$,_);h[_]?h[_].p(L,S):(h[_]=xt(L),h[_].c(),h[_].m(g,null))}for(;_<h.length;_+=1)h[_].d(1);h.length=$.length}},d(b){b&&N(e),b&&N(o),b&&N(t),b&&N(u),b&&N(a),b&&N(m),b&&N(g),Ie(h,b),c=!1,Xe(f)}}}function xt(n){let e,o=n[21]+"",t,i,s,r;function l(...d){return n[17](n[21],...d)}return{c(){e=G("li"),t=_e(o),i=V(),E(e,"draggable","true"),E(e,"class","draggable-item svelte-r00s5r")},m(d,u){I(d,e,u),R(e,t),R(e,i),s||(r=oe(e,"dragstart",l),s=!0)},p(d,u){n=d,u&2&&o!==(o=n[21]+"")&&Re(t,o)},d(d){d&&N(e),s=!1,r()}}}function yi(n){let e,o,t,i,s,r,l,d,u,a,m,g,c,f,$,h=n[0].dataAvail&&Tt(n);return{c(){e=G("div"),o=G("div"),t=G("div"),i=G("button"),s=V(),r=G("button"),l=V(),d=G("div"),u=V(),a=G("div"),m=V(),g=G("div"),c=V(),h&&h.c(),E(i,"class","arrow-btn direct-arrow svelte-r00s5r"),E(i,"title","Draw Directed Arrows"),Pe(i,"active",n[0].drawing==="directed"),E(r,"class","arrow-btn undirected-arrow svelte-r00s5r"),E(r,"title","Draw Undirected Arrows"),Pe(r,"active",n[0].drawing==="undirected"),E(d,"role","button"),E(d,"id","add-manifest-variable"),E(d,"title","Create Observed Variable"),E(d,"draggable","true"),E(d,"class","variable-button svelte-r00s5r"),E(d,"data-button-type",le),E(d,"tabindex","0"),E(a,"role","button"),E(a,"tabindex","0"),E(a,"id","add-latent-variable"),E(a,"title","Create Latent Variable"),E(a,"draggable","true"),E(a,"class","variable-button svelte-r00s5r"),E(a,"data-button-type",me),E(g,"role","button"),E(g,"tabindex","0"),E(g,"id","add-constant-variable"),E(g,"class","variable-button svelte-r00s5r"),E(g,"title","Create Constant Variable"),E(g,"data-button-type","const"),E(g,"draggable","true"),E(t,"id","buttons"),E(t,"class","svelte-r00s5r"),E(o,"id","buttonCont"),E(o,"class","svelte-r00s5r"),E(e,"class","toolbox svelte-r00s5r")},m(b,S){I(b,e,S),R(e,o),R(o,t),R(t,i),R(t,s),R(t,r),R(t,l),R(t,d),R(t,u),R(t,a),R(t,m),R(t,g),R(e,c),h&&h.m(e,null),f||($=[oe(i,"click",n[9]),oe(r,"click",n[10]),oe(d,"dragstart",n[11]),oe(a,"dragstart",n[12]),oe(g,"dragstart",n[13])],f=!0)},p(b,[S]){S&1&&Pe(i,"active",b[0].drawing==="directed"),S&1&&Pe(r,"active",b[0].drawing==="undirected"),b[0].dataAvail?h?h.p(b,S):(h=Tt(b),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:ce,o:ce,d(b){b&&N(e),h&&h.d(),f=!1,Xe($)}}}function wi(n,e,o){let t,i;te(n,U,y=>o(0,t=y)),te(n,Q,y=>o(8,i=y)),U.subscribe(y=>{});function s(y){W(U,t.dragged=y,t)}function r(y,w){W(U,t.dragged="observed-with-name",t),W(U,t.draggedName=w,t)}function l(y){W(U,t.dragged="multiple",t)}function d(y){W(U,t.dragged="factor",t)}function u(y){W(U,t.dragged="growth",t)}let a,m=Y(yt);function g(y){t.drawing===y?(m.disableDrawMode(),W(U,t.drawing="none",t)):(m.enableDrawMode(),W(U,t.drawing=y,t))}const c=()=>{g("directed")},f=()=>{g("undirected")},$=()=>{event.dataTransfer.setData("text/plain","node"),s(le)},h=()=>{s(me)},b=()=>{s(Le)},S=y=>l(),_=y=>d(),L=y=>u(),v=(y,w)=>r(w,y);return n.$$.update=()=>{if(n.$$.dirty&257&&typeof i.getObservedNodes=="function"&&t.columnNames!==null){const y=i.getObservedNodes().map(w=>w.data("label"));o(1,a=t.columnNames.filter(w=>!y.includes(w)))}},[t,a,s,r,l,d,u,g,i,c,f,$,h,b,S,_,L,v]}class ki extends X{constructor(e){super(),Z(this,e,wi,yi,K,{})}}function Ei(n){let e,o,t,i,s;const r=n[1].default,l=Ze(r,n,n[0],null);return i=new ki({}),{c(){e=G("nav"),o=G("ul"),l&&l.c(),t=V(),q(i.$$.fragment),E(o,"class","nav navbar-nav navbar-left"),E(e,"class","navbar navbar-default navbar-static-top navbar-left svelte-12n5yi9")},m(d,u){I(d,e,u),R(e,o),l&&l.m(o,null),R(e,t),j(i,e,null),s=!0},p(d,[u]){l&&l.p&&(!s||u&1)&&Ke(l,r,d,d[0],s?et(r,d[0],u,null):Qe(d[0]),null)},i(d){s||(M(l,d),M(i.$$.fragment,d),s=!0)},o(d){F(l,d),F(i.$$.fragment,d),s=!1},d(d){d&&N(e),l&&l.d(d),H(i)}}}function Ci(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(0,i=s.$$scope)},[i,t]}class Si extends X{constructor(e){super(),Z(this,e,Ci,Ei,K,{})}}function Li(n){let e,o,t,i,s,r,l;const d=n[3].default,u=Ze(d,n,n[2],null);return{c(){e=G("li"),o=G("a"),t=_e(n[0]),i=G("span"),s=V(),r=G("ul"),u&&u.c(),E(i,"class","caret"),E(o,"href","#"),E(o,"class","dropdown-toggle svelte-1oq006n"),E(o,"data-toggle","dropdown"),E(o,"role","button"),E(o,"aria-haspopup","true"),E(o,"aria-expanded","false"),E(o,"draggable","false"),Pe(o,"minimal",n[1]),E(r,"class","dropdown-menu"),E(e,"class","dropdown")},m(a,m){I(a,e,m),R(e,o),R(o,t),R(o,i),R(e,s),R(e,r),u&&u.m(r,null),l=!0},p(a,[m]){(!l||m&1)&&Re(t,a[0]),(!l||m&2)&&Pe(o,"minimal",a[1]),u&&u.p&&(!l||m&4)&&Ke(u,d,a,a[2],l?et(d,a[2],m,null):Qe(a[2]),null)},i(a){l||(M(u,a),l=!0)},o(a){F(u,a),l=!1},d(a){a&&N(e),u&&u.d(a)}}}function Mi(n,e,o){let{$$slots:t={},$$scope:i}=e,{name:s}=e,{minimal:r=!1}=e;return n.$$set=l=>{"name"in l&&o(0,s=l.name),"minimal"in l&&o(1,r=l.minimal),"$$scope"in l&&o(2,i=l.$$scope)},[s,r,i,t]}class tt extends X{constructor(e){super(),Z(this,e,Mi,Li,K,{name:0,minimal:1})}}function Pt(n,e,o){const t=n.slice();return t[4]=e[o],t}function Vt(n){let e;return{c(){e=G("li"),E(e,"class","divider")},m(o,t){I(o,e,t)},d(o){o&&N(e)}}}function Rt(n){let e,o,t=n[4].name+"",i,s,r,l,d;function u(...m){return n[3](n[4],...m)}let a=n[4].divider&&Vt();return{c(){e=G("li"),o=G("a"),i=_e(t),s=V(),a&&a.c(),r=Be(),E(o,"href","#"),Pe(e,"disabled",n[4].disable)},m(m,g){I(m,e,g),R(e,o),R(o,i),I(m,s,g),a&&a.m(m,g),I(m,r,g),l||(d=oe(o,"click",u),l=!0)},p(m,g){n=m,g&1&&t!==(t=n[4].name+"")&&Re(i,t),g&1&&Pe(e,"disabled",n[4].disable),n[4].divider?a||(a=Vt(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(m){m&&N(e),m&&N(s),a&&a.d(m),m&&N(r),l=!1,d()}}}function Di(n){let e,o=n[0],t=[];for(let i=0;i<o.length;i+=1)t[i]=Rt(Pt(n,o,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=Be()},m(i,s){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(i,s);I(i,e,s)},p(i,s){if(s&1){o=i[0];let r;for(r=0;r<o.length;r+=1){const l=Pt(i,o,r);t[r]?t[r].p(l,s):(t[r]=Rt(l),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=o.length}},d(i){Ie(t,i),i&&N(e)}}}function Ai(n){let e,o;return e=new tt({props:{minimal:n[2],name:n[1],$$slots:{default:[Di]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&4&&(s.minimal=t[2]),i&2&&(s.name=t[1]),i&129&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Oi(n,e){e.disable||e.action(n)}function Fi(n,e,o){let{menuItems:t}=e,{name:i}=e,{minimal:s=!1}=e;const r=(l,d)=>Oi(d,l);return n.$$set=l=>{"menuItems"in l&&o(0,t=l.menuItems),"name"in l&&o(1,i=l.name),"minimal"in l&&o(2,s=l.minimal)},[t,i,s,r]}class ut extends X{constructor(e){super(),Z(this,e,Fi,Ai,K,{menuItems:0,name:1,minimal:2})}}function bt(n,e){if(n==null)throw new Error("Columnnames may not be null.");const t=Y(Q).nodes(function(s){return s.isObserved()});if(t.length>0)for(var i=0;i<t.length;i++){const s=t[i],r=s.getLabel();n.includes(r)&&!s.isLinked()?s.link():!n.includes(r)&&s.isLinked()&&s.unlink()}}async function wn(n){Shiny.setInputValue("down-requestData",{goal:n,random:Math.random()})}function _t(){Y(Q).elements().remove(),$n(),U.update(e=>(e.parsedModel=!1,e)),ne.update(e=>(e.fix_first=!0,e.mode="user model",e)),Shiny.setInputValue("show_help",Math.random()),Oe.update(e=>{for(let o in e)e[o]=null;return e})}function vt(n){_t();let e=JSON.parse(n),o=Y(Q),t;t=JSON.parse(e.model);const i=JSON.parse(e.modelOpt),s=JSON.parse(e.gridViewOpt);if(zt(ne,i),zt(ne,s),e.fitCache!==void 0){const r=JSON.parse(e.fitCache);Oe.set(r)}U.update(r=>(r.loadingMode=!0,r)),o.json({elements:t}),o.nodes().forEach(r=>{r.style({width:r.data("width")}),r.style({height:r.data("height")})}),Y(U).dataAvail&&bt(Y(U).columnNames),Y(ne).mode!=="user model"?ue.update(r=>(r.showLav=!0,r)):ue.update(r=>(r.showLav=!1,r)),o.nodes().forEach(r=>{pe(r.id())}),U.update(r=>(r.loadingMode=!1,r))}function $t(){const n=Y(Q);n.nodes().forEach(l=>{l.data("width",l.width()),l.data("height",l.height())});let e=n.json().elements;e.nodes.forEach(l=>{l.classes=l.classes.split(" ").filter(d=>d!==Ue).join(" ")});const o=JSON.stringify(e),t=JSON.stringify(Y(ne)),i=JSON.stringify(Y(ne)),s=JSON.stringify(Y(Oe));return JSON.stringify({model:o,modelOpt:t,gridViewOpt:i,fitCache:s})}function zt(n,e){n.update(o=>{for(let t in e)e.hasOwnProperty(t)&&e[t]!==void 0&&(o[t]=e[t]);return o})}function Ii(n){let e,o;return e=new ut({props:{name:"File",menuItems:n[1],minimal:!n[0]}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.menuItems=t[1]),i&1&&(s.minimal=!t[0]),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Ni(){document.getElementById("dataUpload-fileInput").click()}function Bt(){const n=new Date;return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}_${String(n.getHours()).padStart(2,"0")}-${String(n.getMinutes()).padStart(2,"0")}-${String(n.getSeconds()).padStart(2,"0")}`}function Ti(n,e,o){let t,i;te(n,U,v=>o(2,t=v)),te(n,ht,v=>o(3,i=v));let{full:s=!0}=e;B.use(Nn);function r(){t.modelEmpty?_t():bootbox.confirm("Are you sure you want to create a new model? This will delete the current model.",function(v){v&&_t()})}function l(v,y){ct.saveAs(v,"model."+y)}async function d(){const v=document.createElement("input");v.setAttribute("type","file"),v.setAttribute("accept",".lvm");const y=await new Promise(T=>{v.addEventListener("change",C=>T(C.target.files[0])),v.click()}),w=await new Promise(T=>{const C=new FileReader;C.readAsText(y,"UTF-8"),C.onload=()=>T(C.result)});vt(w)}function u(){t.modelEmpty?d():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(v){v&&d()})}document.getElementById("dataUpload-fileInput").addEventListener("change",function(){this.files&&this.files.length>0&&window.$("#upload-modal").modal()});function a(){t.modelEmpty?m():bootbox.confirm("Are you sure you want to load model and data? This will delete the current model and data.",function(v){v&&m()})}function m(){const v=document.createElement("input");v.setAttribute("type","file"),v.setAttribute("accept",".lvd"),v.addEventListener("change",function(y){const w=y.target.files[0],T=new FileReader;T.readAsArrayBuffer(w),T.onload=function(){const C=T.result;Mt.loadAsync(C).then(function(p){p.file("data.csv").async("base64").then(function(x){Shiny.setInputValue("dataUpload-fileInput",{content:x});const A=setInterval(()=>{t.dataAvail&&(clearInterval(A),p.file("model.lvm").async("text").then(function(J){vt(J)}))},100)})})}}),v.click()}function g(){const v=$t();let y=new Blob([v],{type:"application/json;charset=utf-8"});ct.saveAs(y,"model_"+Bt()+".lvm")}Shiny.addCustomMessageHandler("dataForDownload",function(v){(async()=>{const y=$t(),w=new Mt;w.file("model.lvm",y),w.file("data.csv",v);const T=await w.generateAsync({type:"blob"}),C=new File([T],"model_"+Bt()+".lvd",{type:"application/zip"});ct.saveAs(C)})()});function c(){const v=Y(Q);W(U,t.dataAvail=!1,t),W(U,t.columnNames=null,t),W(U,t.loadedFileName=null,t),W(U,t.ids=null,t),W(ht,i=null,i),v.nodes().unlink(),Shiny.setInputValue("dataUpload-deleteData",Math.random())}function f(){const v=Y(Q);l(v.png({bg:"white"}),"png")}function $(){const v=Y(Q);l(v.jpg(),"jpg")}function h(){return Y(Q).svg({scale:1,full:!0})}function b(){const v=h(),y=new Blob([v],{type:"image/svg+xml;charset=utf-8"});l(y,"svg")}function S(){wn("download")}async function _(){const v=h(),w=new DOMParser().parseFromString(v,"image/svg+xml").documentElement;w.style.position="absolute",w.style.left="-9999px",document.body.appendChild(w);const T=w.getBoundingClientRect();document.body.removeChild(w);const C=T.width,p=T.height,x=new Tn({orientation:C>p?"landscape":"portrait",unit:"pt",format:[C,p]});await xn(w,x,{width:C,height:p}),x.save("model.pdf")}let L;return n.$$set=v=>{"full"in v&&o(0,s=v.full)},n.$$.update=()=>{if(n.$$.dirty&5){let v=[{name:"New Model",action:r,divider:!0},{name:"Load Model",action:u},{name:"Load Data",action:Ni},{name:"Load Model and Data",action:a,divider:!0},{name:"Save Model",action:g,disable:t.modelEmpty},{name:"Save Model and Data",disable:t.modelEmpty||!t.dataAvail,action:S,divider:!0},{name:"Remove Data",action:c,disable:!t.dataAvail,divider:!0},{name:"Export Diagram to PNG",disable:t.modelEmpty,action:f},{name:"Export Diagram to JPG",disable:t.modelEmpty,action:$},{name:"Export Diagram to SVG",disable:t.modelEmpty,action:b},{name:"Export Diagram to PDF",disable:t.modelEmpty,action:_}];s?o(1,L=v):o(1,L=v.filter(y=>["Save Model","Load Model"].includes(y.name)||v.indexOf(y)>=v.length-4))}},[s,L,t]}class kn extends X{constructor(e){super(),Z(this,e,Ti,Ii,K,{full:0})}}function xi(n){let e;return{c(){e=G("span"),E(e,"class","glyphicon glyphicon-ok check-mark invisible"),E(e,"aria-hidden","true")},m(o,t){I(o,e,t)},d(o){o&&N(e)}}}function Pi(n){let e;return{c(){e=G("span"),E(e,"class","glyphicon glyphicon-ok check-mark"),E(e,"aria-hidden","true")},m(o,t){I(o,e,t)},d(o){o&&N(e)}}}function Vi(n){let e,o,t,i,s,r,l,d,u;function a(c,f){return c[0]?Pi:xi}let m=a(n),g=m(n);return{c(){e=G("li"),o=G("label"),t=G("input"),i=V(),g.c(),s=V(),r=_e(n[1]),E(t,"type","checkbox"),E(t,"class","check-box svelte-17cge7g"),t.disabled=n[2],E(o,"class",l=Ve(n[2]?"disabled-label":"")+" svelte-17cge7g"),E(e,"class","svelte-17cge7g")},m(c,f){I(c,e,f),R(e,o),R(o,t),t.checked=n[0],R(o,i),g.m(o,null),R(o,s),R(o,r),d||(u=oe(t,"change",n[3]),d=!0)},p(c,[f]){f&4&&(t.disabled=c[2]),f&1&&(t.checked=c[0]),m!==(m=a(c))&&(g.d(1),g=m(c),g&&(g.c(),g.m(o,s))),f&2&&Re(r,c[1]),f&4&&l!==(l=Ve(c[2]?"disabled-label":"")+" svelte-17cge7g")&&E(o,"class",l)},i:ce,o:ce,d(c){c&&N(e),g.d(),d=!1,u()}}}function Ri(n,e,o){let{name:t}=e,{checked:i}=e,{disable:s=!1}=e;function r(){i=this.checked,o(0,i)}return n.$$set=l=>{"name"in l&&o(1,t=l.name),"checked"in l&&o(0,i=l.checked),"disable"in l&&o(2,s=l.disable)},[i,t,s,r]}class Se extends X{constructor(e){super(),Z(this,e,Ri,Vi,K,{name:1,checked:0,disable:2})}}function zi(n){let e;return{c(){e=G("span"),E(e,"class","glyphicon glyphicon-ok check-mark invisible"),E(e,"aria-hidden","true")},m(o,t){I(o,e,t)},d(o){o&&N(e)}}}function Bi(n){let e;return{c(){e=G("span"),E(e,"class","glyphicon glyphicon-ok check-mark"),E(e,"aria-hidden","true")},m(o,t){I(o,e,t)},d(o){o&&N(e)}}}function Ui(n){let e,o,t,i=!1,s,r,l,d,u,a,m,g;function c(h,b){return h[0]===h[2]?Bi:zi}let f=c(n),$=f(n);return a=On(n[5][0]),{c(){e=G("div"),o=G("label"),t=G("input"),s=V(),$.c(),r=V(),l=_e(n[1]),E(t,"type","radio"),E(t,"name","meanStruc"),t.__value=n[2],t.value=t.__value,t.disabled=n[3],E(t,"class","svelte-lbhkwe"),E(o,"class",d=Ve(n[3]?"text-muted":"")+" svelte-lbhkwe"),E(e,"class",u=Ve(n[3]?"radio disabled":"radio")+" svelte-lbhkwe"),a.p(t)},m(h,b){I(h,e,b),R(e,o),R(o,t),t.checked=t.__value===n[0],R(o,s),$.m(o,null),R(o,r),R(o,l),m||(g=oe(t,"change",n[4]),m=!0)},p(h,[b]){b&4&&(t.__value=h[2],t.value=t.__value,i=!0),b&8&&(t.disabled=h[3]),(i||b&1)&&(t.checked=t.__value===h[0]),f!==(f=c(h))&&($.d(1),$=f(h),$&&($.c(),$.m(o,r))),b&2&&Re(l,h[1]),b&8&&d!==(d=Ve(h[3]?"text-muted":"")+" svelte-lbhkwe")&&E(o,"class",d),b&8&&u!==(u=Ve(h[3]?"radio disabled":"radio")+" svelte-lbhkwe")&&E(e,"class",u)},i:ce,o:ce,d(h){h&&N(e),$.d(),a.r(),m=!1,g()}}}function Gi(n,e,o){let{name:t}=e,{value:i}=e,{group:s}=e,{isDisabled:r=!1}=e;const l=[[]];function d(){s=this.__value,o(0,s)}return n.$$set=u=>{"name"in u&&o(1,t=u.name),"value"in u&&o(2,i=u.value),"group"in u&&o(0,s=u.group),"isDisabled"in u&&o(3,r=u.isDisabled)},[s,t,i,r,d,l]}class nt extends X{constructor(e){super(),Z(this,e,Gi,Ui,K,{name:1,value:2,group:0,isDisabled:3})}}const Ut=[{name:"Arrows Created by Lavaan",modelSlot:"showLav"},{name:"Variance Arrows",modelSlot:"showVar"},{name:"Mean Arrows",modelSlot:"showMean"}];let Gt=[{name:"Estimate",value:"est"},{name:"Confidence Interval",value:"ci"},{name:"Estimate + p-value (stars)",value:"estPVal"},{name:"Estimate + Standard Error",value:"estSE"}];function qi(n,e,o){const t=Y(Q),i=e?"_std":"",s=En(n,i,o);t.style().selector("edge.hasEst").style({label:s}).update();const r=Wi(n,i,o);t.style().selector("edge.hasEst.label").style({label:r}).update();const l=Yi(n,i,o);t.style().selector("edge.hasEstFixed").style({label:l}).update()}function ji(n,e,o){function t(a){return a.reduce((m,g,c)=>(g&&m.push(c),m),[])}const i=Y(Q),s=[e,n,o],r=t(s),l=t(s.map(a=>!a)),d=r.concat(l);function u(a,m){return[c=>c.isLavaanAdded(),c=>c.isLoop(),c=>c.isMean()][a](m)}for(let a of d){const m=i.elements(function(g){return u(a,g)});if(s[a]?m.removeClass("hidden"):m.addClass("hidden"),a==2){const g=m.connectedEdges().connectedNodes(),c=m.connectedEdges();s[a]?c.forEach(f=>{f.removeClass("hidden")}):c.forEach(f=>{f.addClass("hidden")}),g.forEach(f=>{pe(f.id())})}else m.forEach(g=>{pe(g.source().id()),pe(g.target().id())})}}function Hi(n){return n===null?"NA":n<.001?"***":n<.01?"**":n<.05?"*":""}function En(n,e,o){const t=i=>i===null?"NA":i.toFixed(o);switch(n){case"est":return i=>t(i.data("estimates")["est"+e]);case"ci":return i=>`[${t(i.data("estimates")["ciLow"+e])}, ${t(i.data("estimates")["ciHigh"+e])}]`;case"estPVal":return i=>`${t(i.data("estimates")["est"+e])}${Hi(i.data("estimates").p_value)}`;case"estSE":return i=>`${t(i.data("estimates")["est"+e])} (${t(i.data("estimates")["se"+e])})`;default:return()=>"NA"}}function Wi(n,e,o){const t=En(n,e,o);return i=>`${i.data("label")} = ${t(i)}`}function Yi(n,e,o){const t=i=>i===null?"NA":i.toFixed(o);return i=>"@"+t(i.data("estimates")["estFixed"+e])}function Ji(n){let e,o,t,i,s,r;return{c(){e=G("li"),o=_e(n[1]),t=V(),i=G("input"),ve(i,"width","4em"),E(i,"type","number"),E(i,"min",n[2]),ve(e,"padding-left","28px")},m(l,d){I(l,e,d),R(e,o),R(e,t),R(e,i),rt(i,n[0]),s||(r=oe(i,"input",n[3]),s=!0)},p(l,[d]){d&2&&Re(o,l[1]),d&4&&E(i,"min",l[2]),d&1&&dt(i.value)!==l[0]&&rt(i,l[0])},i:ce,o:ce,d(l){l&&N(e),s=!1,r()}}}function Xi(n,e,o){let{name:t}=e,{value:i}=e,{min:s}=e;function r(){i=dt(this.value),o(0,i)}return n.$$set=l=>{"name"in l&&o(1,t=l.name),"value"in l&&o(0,i=l.value),"min"in l&&o(2,s=l.min)},[i,t,s,r]}class at extends X{constructor(e){super(),Z(this,e,Xi,Ji,K,{name:1,value:0,min:2})}}function qt(n,e,o){const t=n.slice();return t[9]=e[o],t}function jt(n,e,o){const t=n.slice();return t[9]=e[o],t[12]=e,t[13]=o,t}function Ht(n){let e,o,t,i;function s(d){n[3](d,n[9])}function r(d){n[4](d,n[9])}let l={disable:!1};return n[9].name!==void 0&&(l.name=n[9].name),n[1][n[9].modelSlot]!==void 0&&(l.checked=n[1][n[9].modelSlot]),e=new Se({props:l}),se.push(()=>ae(e,"name",s)),se.push(()=>ae(e,"checked",r)),{c(){q(e.$$.fragment)},m(d,u){j(e,d,u),i=!0},p(d,u){n=d;const a={};!o&&u&4&&(o=!0,a.name=n[9].name,de(()=>o=!1)),!t&&u&6&&(t=!0,a.checked=n[1][n[9].modelSlot],de(()=>t=!1)),e.$set(a)},i(d){i||(M(e.$$.fragment,d),i=!0)},o(d){F(e.$$.fragment,d),i=!1},d(d){H(e,d)}}}function Wt(n){let e,o,t;function i(r){n[6](r)}let s={name:n[9].name,value:n[9].value};return n[1].view!==void 0&&(s.group=n[1].view),e=new nt({props:s}),se.push(()=>ae(e,"group",i)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!o&&l&2&&(o=!0,d.group=r[1].view,de(()=>o=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function Zi(n){let e,o,t,i,s,r,l,d,u,a,m,g,c,f,$,h,b,S,_,L,v=n[2],y=[];for(let k=0;k<v.length;k+=1)y[k]=Ht(jt(n,v,k));const w=k=>F(y[k],1,1,()=>{y[k]=null});function T(k){n[5](k)}let C={name:"Standardized Estimates",disable:!1};n[1].std!==void 0&&(C.checked=n[1].std),i=new Se({props:C}),se.push(()=>ae(i,"checked",T));let p=Gt,x=[];for(let k=0;k<p.length;k+=1)x[k]=Wt(qt(n,p,k));const A=k=>F(x[k],1,1,()=>{x[k]=null});function J(k){n[8](k)}let O={name:"Number Digits",min:0};return n[1].number_digits!==void 0&&(O.value=n[1].number_digits),h=new at({props:O}),se.push(()=>ae(h,"value",J)),{c(){for(let k=0;k<y.length;k+=1)y[k].c();e=V(),o=G("li"),t=V(),q(i.$$.fragment),r=V(),l=G("li"),d=V();for(let k=0;k<x.length;k+=1)x[k].c();u=V(),a=G("li"),m=V(),g=G("li"),c=_e(`Confidence Level
    `),f=G("input"),$=V(),q(h.$$.fragment),E(o,"class","divider"),E(l,"class","divider"),E(a,"class","divider"),E(f,"type","number"),E(f,"min","0"),E(f,"max","0.999999"),E(f,"step","0.01"),ve(f,"width","4em"),ve(g,"padding-left","28px")},m(k,D){for(let z=0;z<y.length;z+=1)y[z]&&y[z].m(k,D);I(k,e,D),I(k,o,D),I(k,t,D),j(i,k,D),I(k,r,D),I(k,l,D),I(k,d,D);for(let z=0;z<x.length;z+=1)x[z]&&x[z].m(k,D);I(k,u,D),I(k,a,D),I(k,m,D),I(k,g,D),R(g,c),R(g,f),rt(f,n[1].ci),I(k,$,D),j(h,k,D),S=!0,_||(L=oe(f,"input",n[7]),_=!0)},p(k,D){if(D&6){v=k[2];let ee;for(ee=0;ee<v.length;ee+=1){const P=jt(k,v,ee);y[ee]?(y[ee].p(P,D),M(y[ee],1)):(y[ee]=Ht(P),y[ee].c(),M(y[ee],1),y[ee].m(e.parentNode,e))}for($e(),ee=v.length;ee<y.length;ee+=1)w(ee);ye()}const z={};if(!s&&D&2&&(s=!0,z.checked=k[1].std,de(()=>s=!1)),i.$set(z),D&2){p=Gt;let ee;for(ee=0;ee<p.length;ee+=1){const P=qt(k,p,ee);x[ee]?(x[ee].p(P,D),M(x[ee],1)):(x[ee]=Wt(P),x[ee].c(),M(x[ee],1),x[ee].m(u.parentNode,u))}for($e(),ee=p.length;ee<x.length;ee+=1)A(ee);ye()}D&2&&dt(f.value)!==k[1].ci&&rt(f,k[1].ci);const fe={};!b&&D&2&&(b=!0,fe.value=k[1].number_digits,de(()=>b=!1)),h.$set(fe)},i(k){if(!S){for(let D=0;D<v.length;D+=1)M(y[D]);M(i.$$.fragment,k);for(let D=0;D<p.length;D+=1)M(x[D]);M(h.$$.fragment,k),S=!0}},o(k){y=y.filter(Boolean);for(let D=0;D<y.length;D+=1)F(y[D]);F(i.$$.fragment,k),x=x.filter(Boolean);for(let D=0;D<x.length;D+=1)F(x[D]);F(h.$$.fragment,k),S=!1},d(k){Ie(y,k),k&&N(e),k&&N(o),k&&N(t),H(i,k),k&&N(r),k&&N(l),k&&N(d),Ie(x,k),k&&N(u),k&&N(a),k&&N(m),k&&N(g),k&&N($),H(h,k),_=!1,L()}}}function Ki(n){let e,o;return e=new tt({props:{name:"View",minimal:n[0],$$slots:{default:[Zi]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.minimal=t[0]),i&16390&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Qi(n,e,o){let t;te(n,ue,m=>o(1,t=m));let{minimal:i=!1}=e;function s(m,g){n.$$.not_equal(g.name,m)&&(g.name=m,o(2,Ut))}function r(m,g){n.$$.not_equal(t[g.modelSlot],m)&&(t[g.modelSlot]=m,ue.set(t))}function l(m){n.$$.not_equal(t.std,m)&&(t.std=m,ue.set(t))}function d(m){n.$$.not_equal(t.view,m)&&(t.view=m,ue.set(t))}function u(){t.ci=dt(this.value),ue.set(t)}function a(m){n.$$.not_equal(t.number_digits,m)&&(t.number_digits=m,ue.set(t))}return n.$$set=m=>{"minimal"in m&&o(0,i=m.minimal)},n.$$.update=()=>{n.$$.dirty&2&&Shiny.setInputValue("ests-confindence_level",t.ci)},[i,t,Ut,s,r,l,d,u,a]}class Cn extends X{constructor(e){super(),Z(this,e,Qi,Ki,K,{minimal:0})}}function Yt(n,e,o){const t=n.slice();return t[9]=e[o],t}function Jt(n,e,o){const t=n.slice();return t[9]=e[o],t}function Xt(n,e,o){const t=n.slice();return t[9]=e[o],t}function Zt(n){let e,o,t;function i(r){n[4](r)}let s={name:n[9].name,value:n[9].value};return n[0].estimator!==void 0&&(s.group=n[0].estimator),e=new nt({props:s}),se.push(()=>ae(e,"group",i)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!o&&l&1&&(o=!0,d.group=r[0].estimator,de(()=>o=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function Kt(n){let e,o,t;function i(r){n[5](r)}let s={name:n[9].name,value:n[9].value};return n[0].se!==void 0&&(s.group=n[0].se),e=new nt({props:s}),se.push(()=>ae(e,"group",i)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!o&&l&1&&(o=!0,d.group=r[0].se,de(()=>o=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function Qt(n){let e,o,t;function i(r){n[7](r)}let s={name:n[9].name,value:n[9].value};return n[0].missing!==void 0&&(s.group=n[0].missing),e=new nt({props:s}),se.push(()=>ae(e,"group",i)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!o&&l&1&&(o=!0,d.group=r[0].missing,de(()=>o=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function eo(n){let e,o,t,i,s,r,l,d,u,a,m,g,c,f,$,h,b,S,_=n[1],L=[];for(let O=0;O<_.length;O+=1)L[O]=Zt(Xt(n,_,O));const v=O=>F(L[O],1,1,()=>{L[O]=null});let y=n[2],w=[];for(let O=0;O<y.length;O+=1)w[O]=Kt(Jt(n,y,O));const T=O=>F(w[O],1,1,()=>{w[O]=null});function C(O){n[6](O)}let p={name:"Number of Bootstrap Samples:",min:5};n[0].n_boot!==void 0&&(p.value=n[0].n_boot),m=new at({props:p}),se.push(()=>ae(m,"value",C));let x=n[3],A=[];for(let O=0;O<x.length;O+=1)A[O]=Qt(Yt(n,x,O));const J=O=>F(A[O],1,1,()=>{A[O]=null});return{c(){e=G("li"),o=G("a"),o.textContent="Estimator",t=V(),i=G("ul");for(let O=0;O<L.length;O+=1)L[O].c();s=V(),r=G("li"),l=G("a"),l.textContent="Standard Error",d=V(),u=G("ul");for(let O=0;O<w.length;O+=1)w[O].c();a=V(),q(m.$$.fragment),c=V(),f=G("li"),$=G("a"),$.textContent="Missing Values",h=V(),b=G("ul");for(let O=0;O<A.length;O+=1)A[O].c();E(o,"tabindex","-1"),E(o,"href","#"),E(o,"class","svelte-143y7r6"),E(i,"class","dropdown-menu svelte-143y7r6"),E(e,"class","dropdown-submenu svelte-143y7r6"),E(l,"tabindex","-1"),E(l,"href","#"),E(l,"class","svelte-143y7r6"),E(u,"class","dropdown-menu svelte-143y7r6"),E(r,"class","dropdown-submenu svelte-143y7r6"),E($,"tabindex","-1"),E($,"href","#"),E($,"class","svelte-143y7r6"),E(b,"class","dropdown-menu svelte-143y7r6"),E(f,"class","dropdown-submenu svelte-143y7r6")},m(O,k){I(O,e,k),R(e,o),R(e,t),R(e,i);for(let D=0;D<L.length;D+=1)L[D]&&L[D].m(i,null);I(O,s,k),I(O,r,k),R(r,l),R(r,d),R(r,u);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(u,null);R(u,a),j(m,u,null),I(O,c,k),I(O,f,k),R(f,$),R(f,h),R(f,b);for(let D=0;D<A.length;D+=1)A[D]&&A[D].m(b,null);S=!0},p(O,k){if(k&3){_=O[1];let z;for(z=0;z<_.length;z+=1){const fe=Xt(O,_,z);L[z]?(L[z].p(fe,k),M(L[z],1)):(L[z]=Zt(fe),L[z].c(),M(L[z],1),L[z].m(i,null))}for($e(),z=_.length;z<L.length;z+=1)v(z);ye()}if(k&5){y=O[2];let z;for(z=0;z<y.length;z+=1){const fe=Jt(O,y,z);w[z]?(w[z].p(fe,k),M(w[z],1)):(w[z]=Kt(fe),w[z].c(),M(w[z],1),w[z].m(u,a))}for($e(),z=y.length;z<w.length;z+=1)T(z);ye()}const D={};if(!g&&k&1&&(g=!0,D.value=O[0].n_boot,de(()=>g=!1)),m.$set(D),k&9){x=O[3];let z;for(z=0;z<x.length;z+=1){const fe=Yt(O,x,z);A[z]?(A[z].p(fe,k),M(A[z],1)):(A[z]=Qt(fe),A[z].c(),M(A[z],1),A[z].m(b,null))}for($e(),z=x.length;z<A.length;z+=1)J(z);ye()}},i(O){if(!S){for(let k=0;k<_.length;k+=1)M(L[k]);for(let k=0;k<y.length;k+=1)M(w[k]);M(m.$$.fragment,O);for(let k=0;k<x.length;k+=1)M(A[k]);S=!0}},o(O){L=L.filter(Boolean);for(let k=0;k<L.length;k+=1)F(L[k]);w=w.filter(Boolean);for(let k=0;k<w.length;k+=1)F(w[k]);F(m.$$.fragment,O),A=A.filter(Boolean);for(let k=0;k<A.length;k+=1)F(A[k]);S=!1},d(O){O&&N(e),Ie(L,O),O&&N(s),O&&N(r),Ie(w,O),H(m),O&&N(c),O&&N(f),Ie(A,O)}}}function to(n){let e,o;return e=new tt({props:{name:no,$$slots:{default:[eo]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&65537&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}const no="Estimation";function io(n,e,o){let t;te(n,ne,m=>o(0,t=m));const i=[{value:"default",name:"Default"},{value:"ML",name:"Maximum Likelihood (ML)"},{value:"GLS",name:"Generalized Least Squares (GLS)"},{value:"WLS",name:"Weighted Least Squares (WLS)"},{value:"ULS",name:"Unweighted Least Squares (ULS)"},{value:"DWLS",name:"Diagonally Weighted Least Squares (DWLS)"},{value:"DLS",name:"Distributionally-weighted Least Squares (DLW)"}],s=[{value:"default",name:"Default"},{value:"robust",name:"Robust"},{value:"boot",name:"Bootstrap"}],r=[{value:"listwise",name:"Listwise Deletion"},{value:"ml",name:"Full Information Maximum Likelihood (FIML)"}];function l(m){n.$$.not_equal(t.estimator,m)&&(t.estimator=m,ne.set(t))}function d(m){n.$$.not_equal(t.se,m)&&(t.se=m,ne.set(t))}function u(m){n.$$.not_equal(t.n_boot,m)&&(t.n_boot=m,ne.set(t))}function a(m){n.$$.not_equal(t.missing,m)&&(t.missing=m,ne.set(t))}return[t,i,s,r,l,d,u,a]}class oo extends X{constructor(e){super(),Z(this,e,io,to,K,{})}}let pt=0,Sn=!1;function Ln(){return typeof Shiny=="object"&&Shiny!==null}function so(n){const e=Object.keys(n),o=n[e[0]].length,t=[];for(let i=0;i<o;i++){const s={};for(const r of e)s[r]=n[r][i];t.push(s)}return t}function st(n,e=!0){Sn=e,pt=pt+1;let o=bn(!0);o.name=n,o.counter=pt,Ln()&&Shiny.setInputValue("layout-layout",JSON.stringify(o))}Ln()&&Shiny.addCustomMessageHandler("semPlotLayout",function(n){n=so(n);const e=125,o=200;let t=1/0,i=1/0;for(let u=0;u<n.length;u++)for(let a=u+1;a<n.length;a++){const m=Math.abs(n[u].x-n[a].x),g=Math.abs(n[u].y-n[a].y);m<t&&n[u].y===n[a].y&&(t=m),g<i&&g!==0&&(i=g)}const s=e/t,r=o/i;let l={};n.forEach(u=>{const a=u.x*s+400,m=u.y*-1*r+400;l[u.name]={x:a,y:m}});let d={name:"preset",positions:function(u){const a=u.data("label");return l[a]},fit:!0,padding:60,animate:!0};Sn?Y(De).do("layout",{options:d}):Y(Q).layout(d).run()});function ro(n){let e,o;return e=new ut({props:{name:"Apply Layout",menuItems:n[1],minimal:n[0]}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.menuItems=t[1]),i&1&&(s.minimal=t[0]),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function lo(n,e,o){let t,i,s;te(n,U,g=>o(2,i=g)),te(n,De,g=>o(3,s=g));let{minimal:r=!1}=e;Y(Q),we(()=>{B.use(Pn),B.use(Vn),B.use(Rn)});function l(){const g={name:"dagre",rankSep:150,animate:!0};s.do("layout",{options:g})}function d(){const g={name:"breadthfirst",animate:!0,spacingFactor:1};s.do("layout",{options:g})}function u(){const g={name:"circle",animate:!0};s.do("layout",{options:g})}function a(){const g={name:"fcose",animate:!0,idealEdgeLength:c=>150,quality:"proof",randomize:!1,nodeSeparation:200};s.do("layout",{options:g})}function m(){const g={name:"cola",animate:!0,nodeSpacing(c){return 50}};s.do("layout",{options:g})}return n.$$set=g=>{"minimal"in g&&o(0,r=g.minimal)},n.$$.update=()=>{n.$$.dirty&4&&o(1,t=[{name:"Recommended: Tree",action:()=>st("tree"),disable:i.modelEmpty},{name:"Recommended: Tree2",action:()=>st("tree2"),disable:i.modelEmpty},{name:"Recommended: Tree3",action:()=>st("tree3"),disable:i.modelEmpty,divider:!0},{name:"Experimental: Tree",action:l,disable:i.modelEmpty},{name:"Experimental: Tree2",action:d,disable:i.modelEmpty},{name:"Experimental: Circle",action:u,disable:i.modelEmpty},{name:"Experimental: Force-directed",action:a,disable:i.modelEmpty},{name:"Experimental: Cola",action:m,disable:i.modelEmpty}])},[r,t,i]}class Mn extends X{constructor(e){super(),Z(this,e,lo,ro,K,{minimal:0})}}function en(n,e,o){const t=n.slice();return t[11]=e[o],t[12]=e,t[13]=o,t}function tn(n,e,o){const t=n.slice();return t[11]=e[o],t}function nn(n){let e,o,t;function i(r){n[4](r)}let s={name:n[11].name,value:n[11].value};return n[0].meanStruc!==void 0&&(s.group=n[0].meanStruc),e=new nt({props:s}),se.push(()=>ae(e,"group",i)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!o&&l&1&&(o=!0,d.group=r[0].meanStruc,de(()=>o=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function on(n){let e,o,t,i;function s(d){n[9](d,n[11])}function r(d){n[10](d,n[11])}let l={};return n[11].name!==void 0&&(l.name=n[11].name),n[0][n[11].modelProperty]!==void 0&&(l.checked=n[0][n[11].modelProperty]),e=new Se({props:l}),se.push(()=>ae(e,"name",s)),se.push(()=>ae(e,"checked",r)),{c(){q(e.$$.fragment)},m(d,u){j(e,d,u),i=!0},p(d,u){n=d;const a={};!o&&u&2&&(o=!0,a.name=n[11].name,de(()=>o=!1)),!t&&u&3&&(t=!0,a.checked=n[0][n[11].modelProperty],de(()=>t=!1)),e.$set(a)},i(d){i||(M(e.$$.fragment,d),i=!0)},o(d){F(e.$$.fragment,d),i=!1},d(d){H(e,d)}}}function ao(n){let e,o,t,i,s,r,l,d,u,a,m,g,c,f,$,h=n[3],b=[];for(let A=0;A<h.length;A+=1)b[A]=nn(tn(n,h,A));const S=A=>F(b[A],1,1,()=>{b[A]=null});function _(A){n[5](A)}function L(A){n[6](A)}let v={name:"Add Intercepts for all Observed Variables"};n[0].intOvFree!==void 0&&(v.checked=n[0].intOvFree),n[2]!==void 0&&(v.disable=n[2]),r=new Se({props:v}),se.push(()=>ae(r,"checked",_)),se.push(()=>ae(r,"disable",L));function y(A){n[7](A)}function w(A){n[8](A)}let T={name:"Add Intercepts for all Latent Variables"};n[0].intLvFree!==void 0&&(T.checked=n[0].intLvFree),n[2]!==void 0&&(T.disable=n[2]),a=new Se({props:T}),se.push(()=>ae(a,"checked",y)),se.push(()=>ae(a,"disable",w));let C=n[1],p=[];for(let A=0;A<C.length;A+=1)p[A]=on(en(n,C,A));const x=A=>F(p[A],1,1,()=>{p[A]=null});return{c(){e=G("li"),o=G("a"),o.textContent="Add Means?",t=V(),i=G("ul");for(let A=0;A<b.length;A+=1)b[A].c();s=V(),q(r.$$.fragment),u=V(),q(a.$$.fragment),c=V();for(let A=0;A<p.length;A+=1)p[A].c();f=Be(),E(o,"tabindex","-1"),E(o,"href","#"),E(o,"class","svelte-143y7r6"),E(i,"class","dropdown-menu svelte-143y7r6"),E(e,"class","dropdown-submenu svelte-143y7r6")},m(A,J){I(A,e,J),R(e,o),R(e,t),R(e,i);for(let O=0;O<b.length;O+=1)b[O]&&b[O].m(i,null);I(A,s,J),j(r,A,J),I(A,u,J),j(a,A,J),I(A,c,J);for(let O=0;O<p.length;O+=1)p[O]&&p[O].m(A,J);I(A,f,J),$=!0},p(A,J){if(J&9){h=A[3];let D;for(D=0;D<h.length;D+=1){const z=tn(A,h,D);b[D]?(b[D].p(z,J),M(b[D],1)):(b[D]=nn(z),b[D].c(),M(b[D],1),b[D].m(i,null))}for($e(),D=h.length;D<b.length;D+=1)S(D);ye()}const O={};!l&&J&1&&(l=!0,O.checked=A[0].intOvFree,de(()=>l=!1)),!d&&J&4&&(d=!0,O.disable=A[2],de(()=>d=!1)),r.$set(O);const k={};if(!m&&J&1&&(m=!0,k.checked=A[0].intLvFree,de(()=>m=!1)),!g&&J&4&&(g=!0,k.disable=A[2],de(()=>g=!1)),a.$set(k),J&3){C=A[1];let D;for(D=0;D<C.length;D+=1){const z=en(A,C,D);p[D]?(p[D].p(z,J),M(p[D],1)):(p[D]=on(z),p[D].c(),M(p[D],1),p[D].m(f.parentNode,f))}for($e(),D=C.length;D<p.length;D+=1)x(D);ye()}},i(A){if(!$){for(let J=0;J<h.length;J+=1)M(b[J]);M(r.$$.fragment,A),M(a.$$.fragment,A);for(let J=0;J<C.length;J+=1)M(p[J]);$=!0}},o(A){b=b.filter(Boolean);for(let J=0;J<b.length;J+=1)F(b[J]);F(r.$$.fragment,A),F(a.$$.fragment,A),p=p.filter(Boolean);for(let J=0;J<p.length;J+=1)F(p[J]);$=!1},d(A){A&&N(e),Ie(b,A),A&&N(s),H(r,A),A&&N(u),H(a,A),A&&N(c),Ie(p,A),A&&N(f)}}}function uo(n){let e,o;return e=new tt({props:{name:co,$$slots:{default:[ao]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&65543&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}const co="Automatically...";function fo(n,e,o){let t,i;te(n,ne,f=>o(0,i=f));const s=[{name:"Fix Factor Loading of First Indicator at 1",modelProperty:"fix_first"},{name:"Include Variances",modelProperty:"auto_var"},{name:"Include Covariances of Exogenous Latent Variables",modelProperty:"auto_cov_lv_x"},{name:"Include Covariances of Dependent Variables",modelProperty:"auto_cov_y"},{name:"Fix Variance of Only Indicator to 0",modelProperty:"fix_single"},{name:"Treat Exogenous Observed Variables as Fixed Variables",modelProperty:"fixed_x"},{name:"Include Freely Estimated Thresholds for Ordered Variables",modelProperty:"auto.th"},{name:"Include Freely Estimated Response Scaling Parameters for Ordered Variables",modelProperty:"auto.delta"}];let r=[{name:"Default",value:"default"},{name:"Yes",value:"true"},{name:"No",value:"false"}];function l(f){n.$$.not_equal(i.meanStruc,f)&&(i.meanStruc=f,ne.set(i))}function d(f){n.$$.not_equal(i.intOvFree,f)&&(i.intOvFree=f,ne.set(i))}function u(f){t=f,o(2,t),o(0,i)}function a(f){n.$$.not_equal(i.intLvFree,f)&&(i.intLvFree=f,ne.set(i))}function m(f){t=f,o(2,t),o(0,i)}function g(f,$){n.$$.not_equal($.name,f)&&($.name=f,o(1,s))}function c(f,$){n.$$.not_equal(i[$.modelProperty],f)&&(i[$.modelProperty]=f,ne.set(i))}return n.$$.update=()=>{n.$$.dirty&1&&o(2,t=i.meanStruc==="false")},[i,s,t,r,l,d,u,a,m,g,c]}class mo extends X{constructor(e){super(),Z(this,e,fo,uo,K,{})}}function go(n){let e,o;return e=new ut({props:{name:"Help",menuItems:n[0]}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p:ce,i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function po(){Shiny.setInputValue("show_help",Math.random())}function ho(){window.open("https://doi.org/10.1080/10705511.2024.2420678","_blank")}function bo(){bootbox.alert({title:"How to Cite",message:`To cite this package in publications, please use:<br><br>
              <div style="margin-left: 20px;">
                  Karch, J. D. (2025). lavaangui: A Web-Based Graphical Interface for Specifying Lavaan Models by Drawing Path Diagrams.
                  <i>Structural Equation Modeling: A Multidisciplinary Journal,</i> 112. 
                  <a href="https://doi.org/10.1080/10705511.2024.2420678" target="_blank">https://doi.org/10.1080/10705511.2024.2420678</a>
              </div>
              <br>
              A BibTeX entry for LaTeX users is:<br><br>
              <div style="margin-left: 20px;">
                  <pre>
@Article{,
  author = {J. D. Karch},
  year = {2025},
  title = {{lavaangui}: A Web-Based Graphical Interface for Specifying Lavaan Models by Drawing Path Diagrams},
  journal = {Structural Equation Modeling: A Multidisciplinary Journal},
  doi = {10.1080/10705511.2024.2420678},
  publisher = {Routledge},
  pages = {1--12},
}</pre>
              </div>`})}function _o(n){let e;const o=[{name:"Show Commands",action:po},{name:"Open Tutorial",action:ho},{name:"About",action:t},{name:"Cite",action:bo}];function t(){bootbox.alert({title:"About Lavaangui",message:`Version: ${e}<br> Author: Julian D. Karch<br> Email: j.d.karch@fsw.leidenuniv.nl <br> lavaangui is BETA software. Please report any bugs at https://github.com/karchjd/lavaangui/issues.`})}return Shiny.addCustomMessageHandler("version",function(i){e=i[0].join(".")}),[o]}class vo extends X{constructor(e){super(),Z(this,e,_o,go,K,{})}}function $o(n){let e,o,t,i,s,r,l,d,u,a,m,g,c,f,$,h,b,S,_,L,v;function y(P){n[2](P)}let w={name:"Show Grid"};n[1].gridShow!==void 0&&(w.checked=n[1].gridShow),e=new Se({props:w}),se.push(()=>ae(e,"checked",y));function T(P){n[3](P)}let C={name:"Snap to Grid"};n[1].gridSnap!==void 0&&(C.checked=n[1].gridSnap),i=new Se({props:C}),se.push(()=>ae(i,"checked",T));function p(P){n[4](P)}let x={name:"Resize to Grid"};n[1].gridResize!==void 0&&(x.checked=n[1].gridResize),l=new Se({props:x}),se.push(()=>ae(l,"checked",p));function A(P){n[5](P)}let J={name:"Snap to Alignment on Release"};n[1].gridAlign!==void 0&&(J.checked=n[1].gridAlign),a=new Se({props:J}),se.push(()=>ae(a,"checked",A));function O(P){n[6](P)}let k={name:"Move Grid on Pan"};n[1].gridMovePan!==void 0&&(k.checked=n[1].gridMovePan),c=new Se({props:k}),se.push(()=>ae(c,"checked",O));function D(P){n[7](P)}let z={name:"Grid Spacing:",min:5};n[1].gridSpace!==void 0&&(z.value=n[1].gridSpace),h=new at({props:z}),se.push(()=>ae(h,"value",D));function fe(P){n[8](P)}let ee={name:"Line Width:",min:0};return n[1].gridWidth!==void 0&&(ee.value=n[1].gridWidth),_=new at({props:ee}),se.push(()=>ae(_,"value",fe)),{c(){q(e.$$.fragment),t=V(),q(i.$$.fragment),r=V(),q(l.$$.fragment),u=V(),q(a.$$.fragment),g=V(),q(c.$$.fragment),$=V(),q(h.$$.fragment),S=V(),q(_.$$.fragment)},m(P,re){j(e,P,re),I(P,t,re),j(i,P,re),I(P,r,re),j(l,P,re),I(P,u,re),j(a,P,re),I(P,g,re),j(c,P,re),I(P,$,re),j(h,P,re),I(P,S,re),j(_,P,re),v=!0},p(P,re){const Ge={};!o&&re&2&&(o=!0,Ge.checked=P[1].gridShow,de(()=>o=!1)),e.$set(Ge);const wt={};!s&&re&2&&(s=!0,wt.checked=P[1].gridSnap,de(()=>s=!1)),i.$set(wt);const kt={};!d&&re&2&&(d=!0,kt.checked=P[1].gridResize,de(()=>d=!1)),l.$set(kt);const Et={};!m&&re&2&&(m=!0,Et.checked=P[1].gridAlign,de(()=>m=!1)),a.$set(Et);const Ct={};!f&&re&2&&(f=!0,Ct.checked=P[1].gridMovePan,de(()=>f=!1)),c.$set(Ct);const St={};!b&&re&2&&(b=!0,St.value=P[1].gridSpace,de(()=>b=!1)),h.$set(St);const Lt={};!L&&re&2&&(L=!0,Lt.value=P[1].gridWidth,de(()=>L=!1)),_.$set(Lt)},i(P){v||(M(e.$$.fragment,P),M(i.$$.fragment,P),M(l.$$.fragment,P),M(a.$$.fragment,P),M(c.$$.fragment,P),M(h.$$.fragment,P),M(_.$$.fragment,P),v=!0)},o(P){F(e.$$.fragment,P),F(i.$$.fragment,P),F(l.$$.fragment,P),F(a.$$.fragment,P),F(c.$$.fragment,P),F(h.$$.fragment,P),F(_.$$.fragment,P),v=!1},d(P){H(e,P),P&&N(t),H(i,P),P&&N(r),H(l,P),P&&N(u),H(a,P),P&&N(g),H(c,P),P&&N($),H(h,P),P&&N(S),H(_,P)}}}function yo(n){let e,o;return e=new tt({props:{minimal:n[0],name:"Grid Options",$$slots:{default:[$o]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.minimal=t[0]),i&514&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function wo(n,e,o){let t;te(n,ue,g=>o(1,t=g));let{minimal:i=!1}=e;function s(g){n.$$.not_equal(t.gridShow,g)&&(t.gridShow=g,ue.set(t))}function r(g){n.$$.not_equal(t.gridSnap,g)&&(t.gridSnap=g,ue.set(t))}function l(g){n.$$.not_equal(t.gridResize,g)&&(t.gridResize=g,ue.set(t))}function d(g){n.$$.not_equal(t.gridAlign,g)&&(t.gridAlign=g,ue.set(t))}function u(g){n.$$.not_equal(t.gridMovePan,g)&&(t.gridMovePan=g,ue.set(t))}function a(g){n.$$.not_equal(t.gridSpace,g)&&(t.gridSpace=g,ue.set(t))}function m(g){n.$$.not_equal(t.gridWidth,g)&&(t.gridWidth=g,ue.set(t))}return n.$$set=g=>{"minimal"in g&&o(0,i=g.minimal)},[i,t,s,r,l,d,u,a,m]}class Dn extends X{constructor(e){super(),Z(this,e,wo,yo,K,{minimal:0})}}function ko(n){return window.$(document).ready(function(){var e=!1;window.$(".navbar .dropdown").hover(function(){e&&(window.$(".navbar .dropdown").removeClass("open"),window.$(this).addClass("open"))},function(){}),window.$(".navbar .dropdown").on("show.bs.dropdown",function(){e=!0}),window.$(".navbar .dropdown").on("hide.bs.dropdown",function(){window.$(".navbar .dropdown.open").length<=1&&(e=!1)})}),[]}class Eo extends X{constructor(e){super(),Z(this,e,ko,null,K,{})}}function Co(n){let e,o;return e=new ut({props:{name:"Edit",menuItems:n[0]}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.menuItems=t[0]),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function So(n,e,o){let t,i;te(n,U,d=>o(1,t=d)),te(n,De,d=>o(2,i=d));function s(){i.undo()}function r(){i.redo()}let l=[];return n.$$.update=()=>{n.$$.dirty&2&&o(0,l=[{name:"Undo",action:s,disable:t.undoEmpty},{name:"Redo",action:r,disable:t.redoEmpty}])},[l,t]}class Lo extends X{constructor(e){super(),Z(this,e,So,Co,K,{})}}function Mo(n){let e,o,t,i,s,r,l,d,u,a,m,g,c,f,$,h,b,S;return e=new kn({}),t=new Lo({}),s=new Cn({}),l=new mo({}),u=new oo({}),m=new Mn({}),c=new Dn({}),$=new vo({}),b=new Eo({}),{c(){q(e.$$.fragment),o=V(),q(t.$$.fragment),i=V(),q(s.$$.fragment),r=V(),q(l.$$.fragment),d=V(),q(u.$$.fragment),a=V(),q(m.$$.fragment),g=V(),q(c.$$.fragment),f=V(),q($.$$.fragment),h=V(),q(b.$$.fragment)},m(_,L){j(e,_,L),I(_,o,L),j(t,_,L),I(_,i,L),j(s,_,L),I(_,r,L),j(l,_,L),I(_,d,L),j(u,_,L),I(_,a,L),j(m,_,L),I(_,g,L),j(c,_,L),I(_,f,L),j($,_,L),I(_,h,L),j(b,_,L),S=!0},i(_){S||(M(e.$$.fragment,_),M(t.$$.fragment,_),M(s.$$.fragment,_),M(l.$$.fragment,_),M(u.$$.fragment,_),M(m.$$.fragment,_),M(c.$$.fragment,_),M($.$$.fragment,_),M(b.$$.fragment,_),S=!0)},o(_){F(e.$$.fragment,_),F(t.$$.fragment,_),F(s.$$.fragment,_),F(l.$$.fragment,_),F(u.$$.fragment,_),F(m.$$.fragment,_),F(c.$$.fragment,_),F($.$$.fragment,_),F(b.$$.fragment,_),S=!1},d(_){H(e,_),_&&N(o),H(t,_),_&&N(i),H(s,_),_&&N(r),H(l,_),_&&N(d),H(u,_),_&&N(a),H(m,_),_&&N(g),H(c,_),_&&N(f),H($,_),_&&N(h),H(b,_)}}}function Do(n){let e,o;return e=new Si({props:{$$slots:{default:[Mo]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}class Ao extends X{constructor(e){super(),Z(this,e,null,Do,K,{})}}function Oo(n){let e;return{c(){e=G("pre"),E(e,"id","res-results"),E(e,"class","shiny-html-output well svelte-74yvxb"),E(e,"data-testid","result-text")},m(o,t){I(o,e,t)},p:ce,i:ce,o:ce,d(o){o&&N(e)}}}class Fo extends X{constructor(e){super(),Z(this,e,null,Oo,K,{})}}function Io(n){return window.cy=Y(Q),U.subscribe(e=>{window.appState=e}),ne.subscribe(e=>{window.modelOptions=e}),ht.subscribe(e=>{window.dataInfo=e}),Oe.subscribe(e=>{window.fitCache=e}),ue.subscribe(e=>{window.gridViewOptions=e}),De.subscribe(e=>{window.ur=e}),[]}class No extends X{constructor(e){super(),Z(this,e,Io,null,K,{})}}function To(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function sn(n){return n==""?(bootbox.alert("Provide a label"),!1):To(n)?!0:(bootbox.alert("Provide a valid label"),!1)}function xo(n,e){const o=e?"full":"minimal";return n.filter(t=>t.show===o||t.show==="both")}function Po(n,e,o){let t,i,s;te(n,U,c=>o(1,t=c)),te(n,De,c=>o(2,i=c)),te(n,ne,c=>o(3,s=c));let r=Y(Q);B.use(zn);var l=new Bn.ColorPicker("#picker",{width:200,color:"rgb(255, 0, 0)",borderWidth:1,borderColor:"#fff"});function d(c,f){var $;const h=r.$(":selected");if(h.length>1){if(f==="nodes"&&!h.every(b=>b.isNode()))return bootbox.alert("Not all selected elements are nodes. Aborting"),null;if(f==="edges"&&!h.every(b=>b.isEdge()))return bootbox.alert("Not all selected elements are edges. Aborting"),null;if(f==="nodes.edges"&&!h.every(b=>b.isEdge()||b.isNode()))return bootbox.alert("Not all selected elements are nodes or edges. Aborting"),null;$=h}else $=c;return $}const u=[{id:"add-observed",content:"Add Observed Variable",coreAsWell:!0,onClickFunction(c){const f=c.renderedPosition;be(le,f)},show:"full"},{id:"add-latent",content:"Add Latent Variable",coreAsWell:!0,onClickFunction(c){const f=c.renderedPosition;be(me,f)},show:"full"},{id:"add-constant",content:"Add Constant Variable",coreAsWell:!0,onClickFunction(c){const f=c.renderedPosition;be(Le,f)},show:"full"},{id:"label-para",content:"Add/Change Label",selector:`edge.${he}`,onClickFunction(c){const f=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Label",value:f.getLabel(),callback($){if(!sn($))return!1;$!==f.getLabel()&&$!==null&&(f.addLabel($),ie(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"label-remove",content:"Remove Label",selector:`edge.${ze}`,onClickFunction(c){(c.target||c.cyTarget).removeLabel(),ie(s.mode)},show:"both",hasTrailingDivider:!1},{id:"remove-edge",content:"Delete Edge",selector:`edge.${he}`,onClickFunction(c){(c.target||c.cyTarget).remove(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"fix-para",content:"Fix Parameter",selector:`edge.${Ee}.${he}, edge.${Ae}.${he}`,onClickFunction(c){const f=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Value",inputType:"number",step:"any",callback($){if($=="")return bootbox.alert("Provide a value"),!1;$!==null&&(f.fixPara($),ie(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"free-para",content:"Free Parameter",selector:`edge.${Ce}.${he}, edge.${Ae}.${he}`,onClickFunction(c){var f=c.target||c.cyTarget;f.freePara(),ie(s.mode)},show:"full",hasTrailingDivider:!1},{id:"switch-reg",content:"Mark as Regression Relationship",selector:`edge.${He}`,onClickFunction(c){(c.target||c.cyTarget).markRegression(),ie(s.mode)},show:"full",hasTrailingDivider:!1},{id:"switch-factor",content:"Mark as Factor Loading",selector:`edge.${it}`,onClickFunction(c){(c.target||c.cyTarget).markFactload(),ie(s.mode)},show:"full",hasTrailingDivider:!1},{id:"free-force-para",content:"Force Parameter Free",selector:`edge.${Ee}.${he}, edge.${Ce}.${he}`,onClickFunction(c){(c.target||c.cyTarget).forceFreePara(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"revert-arrow",content:"Revert Direction",selector:`edge[isMean="0"].${Me}.${he}`,onClickFunction(c){(c.target||c.cyTarget).revert(),ie(s.mode)},show:"full",hasTrailingDivider:!1},{id:"set-undirected",content:"Set Undirected",selector:`edge[isMean="0"].${Me}.${he}`,onClickFunction(c){(c.target||c.cyTarget).setUndirected(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"set-arrow",content:"Set Directed",selector:`edge.${Fe}.${he}`,onClickFunction(c){(c.target||c.cyTarget).setDirected(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"free-orientation",content:"Free Loop Orientation",selector:`edge.${lt}.fixDeg`,onClickFunction(c){const f=c.target||c.cyTarget;f.removeClass("fixDeg"),pe(f.source().id())},show:"both",hasTrailingDivider:!0},{id:"change-fromUser",content:"Include in User Model",selector:`edge.${xe}`,onClickFunction(c){const f=c.target||c.cyTarget;if(f.myIsLoop()&&f.source().isOrdered()){ge("danger","User-defined variance arrow is not allowed for ordered variables.");return}f.markAddedUser(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"color-edge",content:"Change Edge Color",selector:"edge",show:"both",onClickFunction(c){var f=c.target||c.cyTarget;const $=d(f,"edges");if($===null)return null;m(f,$,"edge")}},{id:"change-line-width",content:"Change Line Width",show:"both",selector:"edge",onClickFunction(c){var f=c.target||c.cyTarget;const $=d(f,"edges");if($===null)return null;bootbox.prompt({title:"Enter New Line Width:",value:f.style("width"),callback(h){h!==null&&i.do("style",{eles:$,style:{width:h}})}})}},{id:"rename-node",show:"full",content:"Rename Variable",selector:`node.${me}, node.${le}`,onClickFunction(c){const f=c.target||c.cyTarget,$=t.columnNames;let h;t.dataAvail&&(h=$.map(S=>`<option value="${S}">${S}</option>`).join(""));const b=t.dataAvail&&f.isObserved()?`
      <label>Or Select From Variables in Your Data:</label>
      <select class="form-control" id="label-dropdown">
        <option value="">--Select--</option>
        ${h}
      </select>
    `:"";bootbox.dialog({title:"Rename Variable",message:`
      <div>
        <label>Enter a label:</label>
        <input type="text" class="form-control" id="new-label" value=${f.getLabel()}>
        ${b}
      </div>
    `,buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Rename",className:"btn-primary",callback(){let S=document.getElementById("new-label").value;const _=t.dataAvail&&f.isObserved()?document.getElementById("label-dropdown").value:"";let L;if(S==f.getLabel()&&_!=""?L=_:L=S,!sn(L))return!1;L&&(f.setLabel(L),$&&$.includes(f.getLabel())?(f.link(),ge("success",`Variable ${f.data("label")} linked to data`)):f.isLinked()&&(f.unlink(),ge("info",`Variable ${f.getLabel()} unlinked`)),ie(s.mode))}}},onShown(S){document.getElementById("new-label").addEventListener("keypress",function(_){_.key==="Enter"&&(_.preventDefault(),S.target.querySelector(".btn-primary").click())})}})}},{id:"remove-node",content:"Delete Variable",selector:`node.${me}, node.${le}, node.${Le}`,onClickFunction(c){(c.target||c.cyTarget).remove(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-latent",content:"Change to Latent",selector:`node.${le}`,onClickFunction(c){(c.target||c.cyTarget).makeLatent(),ie(s.mode)},show:"full",hasTrailingDivider:!1},{id:"change-ordered",content:"Change to Ordered",selector:`node.${le}.${Je}`,onClickFunction(c){const f=c.target||c.cyTarget;f.makeOrdered(),f.connectedEdges().forEach($=>{$.myIsLoop()&&$.isUserAdded()&&($.remove(),ge("warning","Removed variance user-defined arrow as it is not allowed for ordered variables."))}),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-continous",content:"Change to Continous",selector:`node.${le}.${Ye}`,onClickFunction(c){(c.target||c.cyTarget).makeContinous(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-observed",show:"full",content:"Change to Observed",selector:`node.${me}`,hasTrailingDivider:!0,onClickFunction(c){const f=c.target||c.cyTarget;f.makeObserved();let $=t.columnNames;$&&$.includes(f.getLabel())&&(f.link(),bootbox.alert("Variable linked with data set")),ie(s.mode)}},{id:"color-node",content:"Change Background Color",selector:"node",show:"both",onClickFunction(c){var f=c.target||c.cyTarget;const $=d(f,"nodes");if($===null)return null;m(f,$,"nodes")}},{id:"change-border-width",content:"Change Border Width",show:"both",selector:`node.${me}, node.${le}, node.${Le}`,onClickFunction(c){var f=c.target||c.cyTarget;const $=d(f,"nodes");if($===null)return null;bootbox.prompt({title:"Enter New Border Width:",value:f.style("border-width"),callback(h){h!==null&&i.do("style",{eles:$,style:{"border-width":h}})}})}},{id:"change-font-size",content:"Change Font Size",show:"both",hasTrailingDivider:!0,selector:`node.${me}, node.${le}, node.${Le}, edge`,onClickFunction(c){var f=c.target||c.cyTarget;const $=d(f,"nodes.edges");if($===null)return null;bootbox.prompt({title:"Enter New Font Size:",value:f.style("font-size"),callback(h){h!==null&&i.do("style",{eles:$,style:{"font-size":h}})}})}}];let a;function m(c,f,$){var h=document.getElementById("picker");h.style.display="block",h.style.left=event.pageX+"px",h.style.top=event.pageY+"px";let b;a=f;const S=function(v){b=v.hexString};l.on("color:change",S);const _=function(v){h.contains(v.target)||($=="edge"?i.do("style",{eles:a,style:{"line-color":b,"target-arrow-color":b,"source-arrow-color":b}}):i.do("style",{eles:a,style:{"background-color":b}}),h.style.display="none",l.off("color:change",S),document.removeEventListener("click",_),document.removeEventListener("keydown",L))};setTimeout(()=>document.addEventListener("click",_),0);const L=function(v){v.key==="Enter"&&_(v)};document.addEventListener("keydown",L)}const g=xo(u,t.full);return we(()=>{r.contextMenus({menuItems:g})}),[]}class Vo extends X{constructor(e){super(),Z(this,e,Po,null,K,{})}}function Ro(n){let e,o,t,i,s,r,l,d,u,a,m,g,c,f,$,h,b,S,_,L,v,y,w,T;return{c(){e=G("div"),o=G("button"),t=_e("Show Data"),s=V(),r=G("div"),l=G("button"),d=_e("User Model"),a=V(),m=G("button"),g=_e("Autocompleted Model"),f=V(),$=G("button"),h=_e("Estimates"),_=V(),L=G("button"),v=_e("More Results"),E(o,"class","btn btn-lg btn-default"),o.disabled=i=!n[2].dataAvail,E(l,"class",u="btn btn-lg "+(n[1]==="user model"?"btn-primary active":"btn-default")),E(m,"class",c="btn btn-lg "+(n[1]==="full model"?"btn-primary active":"btn-default")),E($,"class",b="btn btn-lg "+(n[1]==="estimate"?"btn-primary active":"btn-default")),$.disabled=S=!n[2].dataAvail||n[2].modelEmpty,E(r,"class","btn-group btn-toggle svelte-xny576"),E(L,"class","btn btn-lg btn-default"),L.disabled=y=n[0].mode!="estimate",E(e,"class","toolbox navbar-static-bottom svelte-xny576")},m(C,p){I(C,e,p),R(e,o),R(o,t),R(e,s),R(e,r),R(r,l),R(l,d),R(r,a),R(r,m),R(m,g),R(r,f),R(r,$),R($,h),R(e,_),R(e,L),R(L,v),w||(T=[oe(o,"click",n[6]),oe(l,"click",n[7]),oe(m,"click",n[8]),oe($,"click",n[9]),oe(L,"click",n[10])],w=!0)},p(C,[p]){p&4&&i!==(i=!C[2].dataAvail)&&(o.disabled=i),p&2&&u!==(u="btn btn-lg "+(C[1]==="user model"?"btn-primary active":"btn-default"))&&E(l,"class",u),p&2&&c!==(c="btn btn-lg "+(C[1]==="full model"?"btn-primary active":"btn-default"))&&E(m,"class",c),p&2&&b!==(b="btn btn-lg "+(C[1]==="estimate"?"btn-primary active":"btn-default"))&&E($,"class",b),p&4&&S!==(S=!C[2].dataAvail||C[2].modelEmpty)&&($.disabled=S),p&1&&y!==(y=C[0].mode!="estimate")&&(L.disabled=y)},i:ce,o:ce,d(C){C&&N(e),w=!1,Xe(T)}}}function zo(){window.$("#data-modal-2").modal()}function Bo(n,e,o){let t,i,s;te(n,ne,$=>o(0,t=$)),te(n,U,$=>o(2,i=$)),te(n,ue,$=>o(11,s=$));let r;function l($){o(1,r=$),$!=="user model"?W(ue,s.showLav=!0,s):W(ue,s.showLav=!1,s),W(ne,t.mode=$,t)}window.$("#data-modal-extend-results").on("hidden.bs.modal",function(){W(U,i.showServerErrors=!0,i)});function d(){window.$("#data-modal-extend-results").modal(),W(U,i.showServerErrors=!1,i)}let u=!1;we(()=>{o(5,u=!0)});const a=()=>zo(),m=()=>l("user model"),g=()=>l("full model"),c=()=>l("estimate"),f=()=>d();return n.$$.update=()=>{n.$$.dirty&33&&u&&o(1,r=t.mode)},[t,r,i,l,d,u,a,m,g,c,f]}class Uo extends X{constructor(e){super(),Z(this,e,Bo,Ro,K,{})}}function Go(){return typeof Shiny=="object"&&Shiny!==null}function qo(n){let e=0,o=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,i=n.nodes().length;n.nodes().forEach(l=>{let d=l.position();e+=d.x,d.x>o&&(o=d.x),d.y>t&&(t=d.y)});let s=e/i,r=t+100;return{x:s,y:r}}function jo(n,e){if(!n)throw new Error(e||"Assertion failed")}function Ho(n,e,o){let t,i,s;te(n,ne,a=>o(0,t=a)),te(n,U,a=>o(1,i=a)),te(n,Oe,a=>o(2,s=a));function r(a,m,g){let c,f,$;return m==="=~"?(c=Me,f=a,$=g):m=="~1"?(f=1,$=a,c=Me):m==="~~"?($=g,f=a,a===g?c=lt:c=Fe):($=a,f=g,c=Me),{directed:c,source:f,target:$}}function l(a,m,g,c){let f=r(a,m,g);f.user=c;const h=Y(Q).edges(function(b){let S;if(f.source!=1?(S=b.source().getLabel()==f.source&&b.target().getLabel()==f.target,f.directed==Fe&&(S=S||b.source().getLabel()==f.target&&b.target().getLabel()==f.source)):S=b.source().isConstant()&&b.target().getLabel()==f.target,f.user!=null)if(f.user==1)S=S&&b.isUserAdded();else if(f.user==0)S=S&&b.isLavaanAdded();else throw new Error("User was neither 0 nor 1");return S});if(h.length>1)throw new Error("Multiple edges found");return h}function d(a,m){W(U,i.meansModelled=!1,i),W(U,i.loadingMode=!0,i);let g=Y(Q);if(!m)g.edges().invalidate();else{let b=function(L,v,y){be(L,y,!1,v)};const h=Array.isArray(a.obs)?a.obs:[a.obs];let S={x:200,y:200};for(let L=0;L<h.length;L++)S.x=S.x+50,b(le,h[L],S);const _=Array.isArray(a.latent)?a.latent:[a.latent];S={x:200,y:100};for(let L=0;L<_.length;L++)S.x=S.x+50,b(me,_[L]);a=a.parTable}const c=new Set;for(let h=0;h<a.lhs.length;h++)a.op[h]==="|"&&c.add(a.lhs[h]);let f=!1,$;for(let h=0;h<a.lhs.length;h++){if(a.op[h]=="~*~"||a.op[h]=="|"||a.op[h]=="==")continue;let b=l(a.lhs[h],a.op[h],a.rhs[h],a.user[h]);if(!m&&a.user[h]==1)jo(b.length==1),b.validate(),b.isModifiedLavaan()&&b.isFixed()&&b.revertLavaanFix(),a.free[h]==0&&!b.isFixed()&&b.fixPara(a.ustart[h]).markModifiedLavaan();else{let S;if(m||b.length==0){const _=r(a.lhs[h],a.op[h],a.rhs[h]);if(m&&i.full&&a.user[h]==0)continue;let L;if(_.source!==1)L=g.nodes(function(y){return y.getLabel()==_.source})[0].id();else{if(W(U,i.meansModelled=!0,i),a.free[h]==0&&a.ustart[h]==0)continue;f||($=be(Le,qo(g),!1),f=!0,g.nodes(function(w){return w.id()==$})[0].markAddedLavaan()),L=$}const v=g.nodes(function(y){return y.getLabel()==_.target})[0].id();S=g.add({groups:"edges",data:{source:L,target:v},classes:_.directed+" nolabel"}),a.label[h]!=""&&S.addLabelImport(a.label[h]),a.user[h]==1?S.markAddedUser():S.markAddedLavaan(),!m&&_.directed==Me&&(pe(L),pe(v))}else!m&&b.length==1&&(S=b);a.free[h]==0?a.ustart[h]!==0&&a.exo[h]!==1?c.has(S.target().getLabel())&&a.op[h]=="~~"?S.fixPara("Total Variance 1"):S.fixPara(a.ustart[h]):S.remove():S.setFree(),m||S.validate(),S.checkLORegressionMark()}}if(!m)g.edges().forEach(h=>{h.isValid()||h.remove()}),g.getLavaanNodes().forEach(h=>{h.connectedEdges().length==0&&(h.remove(),g.nodes().forEach(b=>{pe(b.id())}))});else{st("tree",!1);const h=new Map;g.getUndirectedEdges().forEach(_=>{const L=pe(_.source().id(),!0),v=pe(_.target().id(),!0),y=w=>{h.set(w,(h.get(w)||0)+1)};y(L),y(v)});let b=null,S=0;h.forEach((_,L)=>{_>S&&(S=_,b=L)}),b===180&&g.edges().forEach(_=>{_.isUserAdded()&&_.data("control-point-distances",[100])}),g.fit()}i.parsedModel||W(U,i.parsedModel=!0,i),g.getUserEdges().length>0&&W(U,i.modelEmpty=!1,i),W(U,i.loadingMode=!1,i)}function u(a,m){Y(Q);const g=a.op.some(c=>c.includes("~~"));for(let c=0;c<a.lhs.length;c++){if(a.op[c]=="~*~"||a.op[c]=="|")continue;let f=l(a.lhs[c],a.op[c],a.rhs[c]);if(f.length>0){let $={};f.isFree()?($.est=a.est[c],$.p_value=a.pvalue[c],$.se=a.se[c],$.ciLow=a["ci.lower"][c],$.ciHigh=a["ci.upper"][c],$.est_std=m["est.std"][c],$.se_std=m.se[c],$.ciLow_std=m["ci.lower"][c],$.ciHigh_std=m["ci.upper"][c],f.addClass("hasEst")):g&&a.op[c]=="~~"&&($.estFixed=a.est[c],$.estFixed_std=m["est.std"][c],f.addClass("hasEstFixed")),f.data("estimates",$)}}}return Go()&&(Shiny.addCustomMessageHandler("dataInfo",function(a){bt(a.columns),W(U,i.columnNames=[...a.columns],i),W(U,i.ids=[...a.columns],i),W(U,i.loadedFileName=a.name,i),W(U,i.dataAvail=!0,i),ie(t.mode),window.$("#upload-modal").modal("hide"),a.showData&&window.$("#data-modal-2").modal()}),Shiny.addCustomMessageHandler("lav_failed",function(a){W(U,i.fitting=!1,i),a=="stopped"?ge("danger","Fitting stopped by user"):ge("danger","Fitting failed")}),Shiny.addCustomMessageHandler("fitting",function(a){W(U,i.fitting=!0,i)}),Shiny.addCustomMessageHandler("lav_warning_error",function(a){const m=a.type=="warning"?"warning":"error";a.origin=="loading data"&&window.$("#upload-modal").modal("hide"),ge(a.type,`During ${a.origin} the following ${m} occurred: ${a.message}`)}),Shiny.addCustomMessageHandler("lav_error_fitting",function(a){W(U,i.fitting=!1,i),ge(a.type,"During "+a.origin+" the following error occurred: "+a.message)}),Shiny.addCustomMessageHandler("usecache",function(a){ge("info","Reusing cached results because model and data did not change since last fit")}),Shiny.addCustomMessageHandler("data_missing",function(a){ge("danger","Could not fit model because no data is available")}),Shiny.addCustomMessageHandler("columnames",function(a){const m=Y(Q),g=i.columnNames[a.index];W(U,i.columnNames[a.index]=a.newcolname,i),m.getObservedNodes().forEach(c=>{c.getLabel()==g&&(c.setLabel(a.newcolname),ie(t.mode))}),bt(i.columnNames)}),Shiny.addCustomMessageHandler("missing_vars",function(a){var m=[].concat(a).join(", ");ge("danger","Could not fit model because "+m+" are observed variables in the model but not present in the data.")}),Shiny.addCustomMessageHandler("lav_model",function(a){d(a,!1)}),Shiny.addCustomMessageHandler("imported_model",function(a){d(a,!0);let m=Y(Q);Array.isArray(a.ordered)||(a.ordered=[a.ordered]),a.ordered.forEach(g=>{m.nodes(function(c){return c.getLabel()==g})[0].makeOrdered()}),W(ne,t.fix_first=!1,t),ge("warning","lavaangui only imports user edges. Your full model is very likely different than what you fitted in lavaan because of different options used. To display the model, as you fitted it in lavaan, use plot_lavaan")}),Shiny.addCustomMessageHandler("lav_results",function(a){W(U,i.loadingMode=!0,i),W(Oe,s.lastFitLavFit=a.fitted_model,s),W(Oe,s.lastFitModel=a.model,s),W(Oe,s.lastFitData=a.data,s),W(U,i.fitting=!1,i),W(U,i.loadingMode=!1,i)}),Shiny.addCustomMessageHandler("lav_estimates",function(a){const m=a.normal,g=a.std;u(m,g)}),Shiny.addCustomMessageHandler("setToEstimate",function(a){W(ne,t.mode="estimate",t)})),[]}class Wo extends X{constructor(e){super(),Z(this,e,Ho,null,K,{})}}function Yo(n){Un(B);let e=Y(Q);var o={zoomFactor:.05,zoomDelay:45,minZoom:e.minZoom(),maxZoom:e.maxZoom(),fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit(){return!1},fitAnimationDuration:1e3};return we(()=>{e.panzoom(o),e.on("zoom",function(t){var i=e.zoom();i<o.minZoom?e.zoom(o.minZoom):i>o.maxZoom&&e.zoom(o.maxZoom)})}),[]}class Jo extends X{constructor(e){super(),Z(this,e,Yo,null,K,{})}}function Xo(n){let e,o;const t=n[1].default,i=Ze(t,n,n[0],null);return{c(){e=G("div"),i&&i.c(),E(e,"class","svelte-16igfw6")},m(s,r){I(s,e,r),i&&i.m(e,null),o=!0},p(s,[r]){i&&i.p&&(!o||r&1)&&Ke(i,t,s,s[0],o?et(t,s[0],r,null):Qe(s[0]),null)},i(s){o||(M(i,s),o=!0)},o(s){F(i,s),o=!1},d(s){s&&N(e),i&&i.d(s)}}}function Zo(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(0,i=s.$$scope)},[i,t]}class Ko extends X{constructor(e){super(),Z(this,e,Zo,Xo,K,{})}}function Qo(n,e,o){let t,i;te(n,De,r=>o(0,t=r)),te(n,U,r=>o(1,i=r));let s=Y(Q);return setInterval(()=>{i.drawing=="none"&&s&&(s.autoungrabify(!1),s.nodes().grabify(),W(U,i.undoEmpty=t.isUndoStackEmpty(),i),W(U,i.redoEmpty=t.isRedoStackEmpty(),i))},1e3),window.addEventListener("beforeunload",r=>{r.preventDefault(),r.returnValue=""}),we(()=>{Shiny.unbindAll(),Shiny.bindAll()}),[]}class es extends X{constructor(e){super(),Z(this,e,Qo,null,K,{})}}function rn(n){let e,o,t,i,s,r;return{c(){e=G("div"),o=G("button"),o.innerHTML='<span class="glyphicon glyphicon-refresh spinning svelte-16d2v0h"></span> Fitting...',t=V(),i=G("button"),i.textContent="Cancel",E(o,"class","btn btn-lg btn-secondary fixed-width disabled-button svelte-16d2v0h"),E(o,"id","fitting-button"),o.disabled=!0,E(i,"class","btn btn-lg btn-default fixed-width svelte-16d2v0h"),E(e,"class","center-screen svelte-16d2v0h")},m(l,d){I(l,e,d),R(e,o),R(e,t),R(e,i),s||(r=oe(i,"click",ns),s=!0)},p:ce,d(l){l&&N(e),s=!1,r()}}}function ts(n){let e,o=n[0].fitting&&rn();return{c(){o&&o.c(),e=Be()},m(t,i){o&&o.m(t,i),I(t,e,i)},p(t,[i]){t[0].fitting?o?o.p(t,i):(o=rn(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:ce,o:ce,d(t){o&&o.d(t),t&&N(e)}}}function ns(){Shiny.setInputValue("run-abort",Math.random())}function is(n,e,o){let t;return te(n,U,i=>o(0,t=i)),[t]}class os extends X{constructor(e){super(),Z(this,e,is,ts,K,{})}}function ln(n){let e,o,t=n[2][n[0].type].label+"",i,s,r=n[0].message+"",l,d;return{c(){e=G("div"),o=G("strong"),i=_e(t),s=V(),l=_e(r),E(e,"class",d=Ve(n[2][n[0].type].class+(n[1]?" fadeOut":""))+" svelte-1wv9zbn")},m(u,a){I(u,e,a),R(e,o),R(o,i),R(e,s),R(e,l)},p(u,a){a&1&&t!==(t=u[2][u[0].type].label+"")&&Re(i,t),a&1&&r!==(r=u[0].message+"")&&Re(l,r),a&3&&d!==(d=Ve(u[2][u[0].type].class+(u[1]?" fadeOut":""))+" svelte-1wv9zbn")&&E(e,"class",d)},d(u){u&&N(e)}}}function ss(n){let e,o=n[0].message!==""&&ln(n);return{c(){o&&o.c(),e=Be()},m(t,i){o&&o.m(t,i),I(t,e,i)},p(t,[i]){t[0].message!==""?o?o.p(t,i):(o=ln(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:ce,o:ce,d(t){o&&o.d(t),t&&N(e)}}}function rs(n,e,o){let t;te(n,hn,l=>o(0,t=l));let i={success:{class:"alert-success",label:"Success!"},info:{class:"alert-info",label:"Info!"},warning:{class:"alert-warning",label:"Warning!"},danger:{class:"alert-danger",label:"Danger!"}},s=!1,r;return n.$$.update=()=>{n.$$.dirty&9&&t.message!==""&&(o(1,s=!1),clearTimeout(r),o(3,r=setTimeout(()=>{o(1,s=!0)},1e4)))},[t,s,i,r]}class ls extends X{constructor(e){super(),Z(this,e,rs,ss,K,{})}}function as(n,e){const o={};return n.forEach((t,i)=>{o[t]=e[i]}),o}function ds(n,e){const o=Object.keys(e);let t={};return o.forEach(i=>{n.hasOwnProperty(i)&&(t[i]=n[i])}),t}function us(n,e,o){let t,i,s;te(n,De,l=>o(0,t=l)),te(n,U,l=>o(1,i=l)),te(n,ne,l=>o(2,s=l));let r=Y(Q);return we(()=>{B.use(Gn);const l={isDebug:!0};let d=r.undoRedo(l);De.set(d),d.action("style",function(u){let a={};const m=Object.keys(u.style);return u.eles.forEach(function(g){let c=[];m.forEach(f=>{c.push(g.data(f)||g.style(f)),g.data(f,u.style[f])}),a[g.id()]=as(m,c)}),{eles:u.eles,style:a}},function(u){const a=ds(u.eles[0].style(),u.style[Object.keys(u.style)[0]]);return Object.keys(u.style).forEach(function(m){var g=r.getElementById(m);for(var c in u.style[m])g.data(c,u.style[m][c])}),{eles:u.eles,style:a}}),r.on("afterUndo",function(u,a){a!=="style"&&a!=="move"&&ie(s.mode)}),r.on("afterRedo",function(u,a){a!=="style"&&a!=="move"&&ie(s.mode)}),document.addEventListener("keydown",function(u){(u.ctrlKey||u.metaKey)&&u.target.nodeName==="BODY"&&u.which===90&&!i.fitting&&(u.preventDefault(),u.stopPropagation(),u.shiftKey?t.redo():t.undo())}),document.addEventListener("keyup",function(u){u.metaKey&&u.target.nodeName==="BODY"&&u.which===90&&(u.preventDefault(),u.stopPropagation())})}),[]}class cs extends X{constructor(e){super(),Z(this,e,us,null,K,{})}}function fs(n,e,o){let t;return te(n,U,i=>o(0,t=i)),Shiny.addCustomMessageHandler("fullServer",function(i){W(U,t.full=i.full,t),W(U,t.ready=!0,t),W(U,t.shinyapps=i.shinyapps,t)}),[]}class ms extends X{constructor(e){super(),Z(this,e,fs,null,K,{})}}function gs(n,e,o){let t;te(n,ue,s=>o(1,t=s));let i=!1;return we(()=>{o(0,i=!0)}),n.$$.update=()=>{n.$$.dirty&3&&i&&ji(t.showVar,t.showLav,t.showMean),n.$$.dirty&3&&i&&qi(t.view,t.std,t.number_digits)},[i,t]}class ps extends X{constructor(e){super(),Z(this,e,gs,null,K,{})}}function hs(n){let e,o,t,i;const s=n[6].default,r=Ze(s,n,n[5],null);return{c(){e=G("section"),r&&r.c(),ve(e,"left",n[0]+"px"),ve(e,"top",n[1]+"px"),E(e,"class","draggable svelte-13fkbj1")},m(l,d){I(l,e,d),r&&r.m(e,null),o=!0,t||(i=[oe(window,"mouseup",n[4]),oe(window,"mousemove",n[3]),oe(e,"mousedown",n[2])],t=!0)},p(l,[d]){r&&r.p&&(!o||d&32)&&Ke(r,s,l,l[5],o?et(s,l[5],d,null):Qe(l[5]),null),(!o||d&1)&&ve(e,"left",l[0]+"px"),(!o||d&2)&&ve(e,"top",l[1]+"px")},i(l){o||(M(r,l),o=!0)},o(l){F(r,l),o=!1},d(l){l&&N(e),r&&r.d(l),t=!1,Xe(i)}}}function bs(n,e,o){let{$$slots:t={},$$scope:i}=e,{left:s=100}=e,{top:r=100}=e,l=!1,d=0,u=0;function a(c){l=!0,d=c.clientX-s,u=c.clientY-r}function m(c){l&&(o(0,s=c.clientX-d),o(1,r=c.clientY-u))}function g(){l=!1}return n.$$set=c=>{"left"in c&&o(0,s=c.left),"top"in c&&o(1,r=c.top),"$$scope"in c&&o(5,i=c.$$scope)},[s,r,a,m,g,i,t]}class _s extends X{constructor(e){super(),Z(this,e,bs,hs,K,{left:0,top:1})}}function vs(n){let e,o,t;const i=n[0].default,s=Ze(i,n,n[1],null);return{c(){e=G("ul"),o=G("div"),s&&s.c(),ve(o,"display","flex"),ve(o,"flex-direction","column"),E(e,"class","nav navbar-nav navbar-left"),ve(e,"border","1px solid black"),ve(e,"z-index","9999")},m(r,l){I(r,e,l),R(e,o),s&&s.m(o,null),t=!0},p(r,l){s&&s.p&&(!t||l&2)&&Ke(s,i,r,r[1],t?et(i,r[1],l,null):Qe(r[1]),null)},i(r){t||(M(s,r),t=!0)},o(r){F(s,r),t=!1},d(r){r&&N(e),s&&s.d(r)}}}function $s(n){let e,o;return e=new _s({props:{$$slots:{default:[vs]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function ys(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(1,i=s.$$scope)},[t,i]}class ws extends X{constructor(e){super(),Z(this,e,ys,$s,K,{})}}function ks(n,e){return bootbox.alert({title:"<span style='color: red;'>Error</span>",message:`A ${e} error occurred:<br> <span style='color: red;'>${n}</span>.<br><br>Please consider reporting this issue by sending an email to <a href="mailto:j.d.karch@fsw.leidenuniv.nl">j.d.karch@fsw.leidenuniv.nl</a>.`,centerVertical:!0}),!0}function Es(){return typeof Shiny=="object"&&Shiny!==null}function Cs(n){return Es()&&Shiny.addCustomMessageHandler("serverError",function(e){Y(U).showServerErrors&&ks(e.msg,"Server")}),[]}class Ss extends X{constructor(e){super(),Z(this,e,Cs,null,K,{})}}function Ls(n,e,o){let t;return te(n,ne,i=>o(0,t=i)),n.$$.update=()=>{n.$$.dirty&1&&ie(t.mode)},[t]}class Ms extends X{constructor(e){super(),Z(this,e,Ls,null,K,{})}}function Ds(n){B.use(qn);let e=Y(Q);return we(()=>{e.automove({nodesMatching:".automove-viewport",reposition:"viewport"})}),[]}class As extends X{constructor(e){super(),Z(this,e,Ds,null,K,{})}}function Os(n){jn(B,window.$,pn);let e=Y(Q);return we(()=>{e.nodeEditing({resizeToContentCueImage:"",undoable:!0})}),[]}class Fs extends X{constructor(e){super(),Z(this,e,Os,null,K,{})}}function Is(n){return B("collection","init",function(){return this.addClass(Ee).addClass(We).addClass(he),this}),B("collection","free",function(){return this.hasClass(Ee)}),B("collection","addLabel",function(e){return this.addLabelImport(e).removeClass(Te),this}),B("collection","addLabelImport",function(e){return this.data("label",e).addClass(ze).removeClass(We),this}),B("collection","removeLabel",function(){return this.removeClass(ze).addClass(We).data("label",null),this}),B("collection","setLabel",function(e){return this.data("label",e),this}),B("collection","getLabel",function(){return this.data("label")}),B("collection","fixPara",function(e){return this.data("value",e).removeClass(Ee).removeClass(Ae).removeClass(At).addClass(Ce),this}),B("collection","freePara",function(){return this.removeClass(Ce).removeClass(Ae).removeClass(Te).addClass(Ee),this}),B("collection","setFree",function(){return this.removeClass(Ce).removeClass(Ae).addClass(Ee),this}),B("collection","forceFreePara",function(){return this.removeClass(Ee).removeClass(Ce).removeClass(Te).addClass(Ae),this}),B("collection","revert",function(){const e=this.source().id(),o=this.target().id();return this.move({source:o,target:e}),this}),B("collection","setUndirected",function(){return this.removeClass(Me).addClass(Fe),this}),B("collection","setDirected",function(){return this.removeClass(Fe).addClass(Me),this}),B("collection","isUndirected",function(){return this.hasClass(Fe)}),B("collection","isDirected",function(){return this.hasClass(Me)}),B("collection","makeLoop",function(){return this.addClass(lt),this}),B("collection","myIsLoop",function(){return this.hasClass(lt)}),B("collection","makeMeanEdge",function(){return this.data("isMean","1"),this}),B("collection","isMean",function(){return this.data("isMean")==="1"||this.isConstant()}),B("collection","makeOtherEdge",function(){return this.data("isMean","0"),this}),B("collection","isFixed",function(){return this.hasClass(Ce)}),B("collection","isFree",function(){return this.hasClass(Ee)||this.hasClass(Ae)}),B("collection","isForceFree",function(){return this.hasClass(Ae)}),B("collection","hasLabel",function(){return this.hasClass(ze)}),B("collection","isModifiedLavaan",function(){return this.hasClass(Te)}),B("collection","markModifiedLavaan",function(){return this.addClass(Te),this}),B("collection","markAddedLavaan",function(){return this.addClass(xe).removeClass(he),this}),B("collection","markAddedUser",function(){return this.removeClass(xe).addClass(he),this}),B("collection","isUserAdded",function(){return this.hasClass(he)}),B("collection","isLavaanAdded",function(){return this.hasClass(xe)}),B("collection","getValue",function(){return this.data("value")}),B("collection","setValue",function(e){this.data("value",e)}),B("collection","invalidate",function(){return this.removeClass(ft),this}),B("collection","validate",function(){return this.addClass(ft),this}),B("collection","isValid",function(){return this.hasClass(ft)}),B("collection","revertLavaanFix",function(){this.freePara().removeClass(Te)}),B("collection","removeEstimates",function(){return this.removeClass(At).removeClass(Jn),this.removeData("estimates"),this}),B("collection","checkLORegressionMark",function(){return this.isDirected()&&this.source().isLatent()&&this.target().isObserved()&&(this.addClass(mt),this.addClass(He)),this}),B("collection","isLOReg",function(){return this.isDirected()&&this.source().isLatent()&&this.target().isObserved()&&this.addClass(mt),this.hasClass(mt)}),B("collection","markRegression",function(){return this.addClass(it),this.removeClass(He),this}),B("collection","markFactload",function(){return this.removeClass(it),this.addClass(He),this}),B("collection","isRegression",function(){return this.hasClass(it)}),B("collection","isFactLoad",function(){return this.hasClass(He)}),B("collection","link",function(){return this.addClass(Ue),this}),B("collection","unlink",function(){return this.removeClass(Ue),this}),B("collection","isLinked",function(){return this.hasClass(Ue)}),B("collection","isLatent",function(){return this.hasClass(me)}),B("collection","makeLatent",function(){return this.removeClass(le).addClass(me).removeClass(Ue),this}),B("collection","makeObserved",function(){return this.addClass(le).removeClass(me),this}),B("collection","makeOrdered",function(){return this.removeClass(Je).addClass(Ye),this}),B("collection","isOrdered",function(){return this.hasClass(Ye)}),B("collection","makeContinous",function(){return this.addClass(Je).removeClass(Ye),this}),B("collection","isConstant",function(){return this.hasClass(Le)}),B("collection","isObserved",function(){return this.hasClass(le)}),B("core","getLavaanNodes",function(){return this.nodes(`.${xe}`)}),B("core","getLavaanEdges",function(){return this.edges(`.${xe}`)}),B("core","getObservedNodes",function(){return this.nodes(`.${le}`)}),B("core","getUserEdges",function(){return this.edges(`.${he}`)}),B("core","getUndirectedEdges",function(){return this.edges(`.${Fe}`)}),B("core","getLavaanModifiedEdges",function(){return this.edges(`.${Te}`)}),B("core","getLatentNodes",function(){return this.nodes(function(e){return e.hasClass(me)})}),[]}class Ns extends X{constructor(e){super(),Z(this,e,Is,null,K,{})}}function Ts(n){Hn(B,window.$,pn);let e=Y(Q);return we(()=>{const o="Bend";e.edgeEditing({undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4,addBendMenuItemTitle:null,removeBendMenuItemTitle:null,removeAllBendMenuItemTitle:null,addControlMenuItemTitle:`Add ${o} Point`,removeControlMenuItemTitle:`Remove ${o} Point`,removeAllControlMenuItemTitle:`Remove All ${o} Points`,handleReconnectEdge:!1}),e.style().update()}),[]}class xs extends X{constructor(e){super(),Z(this,e,Ts,null,K,{})}}const an=840;function Ps(n,e,o){let t;te(n,U,r=>o(0,t=r));function i(){var r=setTimeout(s,an*1e3);window.onmousemove=l,window.onmousedown=l,window.onclick=l,window.onscroll=l,window.onkeypress=l;function l(){clearTimeout(r),r=setTimeout(s,an*1e3)}}async function s(){console.log("Timeout");let r=null,l=null;if(t.dataAvail&&(wn("saveData"),l=await new Promise(u=>{Shiny.addCustomMessageHandler("dataForSave",function(a){u(a)})})),t.modelEmpty||(r=$t()),r!=null||l!=null){bootbox.alert("Due to inactivity, you will be disconnected from the server shortly. Your work was saved for you. In case you have already been disconnected now, you can continue where you left off by refreshing the page.");let u=sessionStorage.getItem("sessionId");u||(u=Date.now().toString(),sessionStorage.setItem("sessionId",u),console.log("Session ID save: ",u));var d=new Dt("ModelDatabase");d.version(1).stores({cache:"sessionId, model, data"}),await d.cache.clear(),await d.cache.put({sessionId:u,model:r,data:l})}}return we(async()=>{let r=sessionStorage.getItem("sessionId");if(console.log("Session ID load: ",r),r){var l=new Dt("ModelDatabase");l.version(1).stores({cache:"sessionId, model, data"});const d=await l.cache.get(r);d.model&&(console.log("Model loaded from cache"),vt(d.model)),d.data&&(console.log("Data loaded from cache"),Shiny.setInputValue("dataUpload-fileInput",{content:btoa(d.data)}))}}),i(),[]}class Vs extends X{constructor(e){super(),Z(this,e,Ps,null,K,{})}}function dn(n){let e,o,t,i,s,r,l,d,u,a,m,g,c,f,$,h,b,S,_=n[0].full&&un();o=new ti({});const L=[zs,Rs],v=[];function y(C,p){return C[0].full?0:1}s=y(n),r=v[s]=L[s](n),d=new Ko({props:{$$slots:{default:[Us]},$$scope:{ctx:n}}});let w=n[0].full&&fn();m=new No({}),c=new Wo({}),$=new es({});let T=n[0].shinyapps&&mn();return{c(){_&&_.c(),e=V(),q(o.$$.fragment),t=V(),i=G("div"),r.c(),l=V(),q(d.$$.fragment),u=V(),w&&w.c(),a=V(),q(m.$$.fragment),g=V(),q(c.$$.fragment),f=V(),q($.$$.fragment),h=V(),T&&T.c(),b=Be(),E(i,"class","svelte-15ghafl")},m(C,p){_&&_.m(C,p),I(C,e,p),j(o,C,p),I(C,t,p),I(C,i,p),v[s].m(i,null),R(i,l),j(d,i,null),R(i,u),w&&w.m(i,null),I(C,a,p),j(m,C,p),I(C,g,p),j(c,C,p),I(C,f,p),j($,C,p),I(C,h,p),T&&T.m(C,p),I(C,b,p),S=!0},p(C,p){C[0].full?_?p&1&&M(_,1):(_=un(),_.c(),M(_,1),_.m(e.parentNode,e)):_&&($e(),F(_,1,1,()=>{_=null}),ye());let x=s;s=y(C),s!==x&&($e(),F(v[x],1,1,()=>{v[x]=null}),ye(),r=v[s],r||(r=v[s]=L[s](C),r.c()),M(r,1),r.m(i,l));const A={};p&3&&(A.$$scope={dirty:p,ctx:C}),d.$set(A),C[0].full?w?p&1&&M(w,1):(w=fn(),w.c(),M(w,1),w.m(i,null)):w&&($e(),F(w,1,1,()=>{w=null}),ye()),C[0].shinyapps?T?p&1&&M(T,1):(T=mn(),T.c(),M(T,1),T.m(b.parentNode,b)):T&&($e(),F(T,1,1,()=>{T=null}),ye())},i(C){S||(M(_),M(o.$$.fragment,C),M(r),M(d.$$.fragment,C),M(w),M(m.$$.fragment,C),M(c.$$.fragment,C),M($.$$.fragment,C),M(T),S=!0)},o(C){F(_),F(o.$$.fragment,C),F(r),F(d.$$.fragment,C),F(w),F(m.$$.fragment,C),F(c.$$.fragment,C),F($.$$.fragment,C),F(T),S=!1},d(C){_&&_.d(C),C&&N(e),H(o,C),C&&N(t),C&&N(i),v[s].d(),H(d),w&&w.d(),C&&N(a),H(m,C),C&&N(g),H(c,C),C&&N(f),H($,C),C&&N(h),T&&T.d(C),C&&N(b)}}}function un(n){let e,o;return e=new os({}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Rs(n){let e,o;return e=new ws({props:{$$slots:{default:[Bs]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function zs(n){let e,o;return e=new Ao({}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Bs(n){let e,o,t,i,s,r,l,d;return e=new kn({props:{full:!1}}),t=new Cn({props:{minimal:!0}}),s=new Mn({props:{minimal:!0}}),l=new Dn({props:{minimal:!0}}),{c(){q(e.$$.fragment),o=V(),q(t.$$.fragment),i=V(),q(s.$$.fragment),r=V(),q(l.$$.fragment)},m(u,a){j(e,u,a),I(u,o,a),j(t,u,a),I(u,i,a),j(s,u,a),I(u,r,a),j(l,u,a),d=!0},p:ce,i(u){d||(M(e.$$.fragment,u),M(t.$$.fragment,u),M(s.$$.fragment,u),M(l.$$.fragment,u),d=!0)},o(u){F(e.$$.fragment,u),F(t.$$.fragment,u),F(s.$$.fragment,u),F(l.$$.fragment,u),d=!1},d(u){H(e,u),u&&N(o),H(t,u),u&&N(i),H(s,u),u&&N(r),H(l,u)}}}function cn(n){let e,o;return e=new Fo({}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Us(n){let e,o,t,i,s,r,l,d,u,a,m,g,c,f,$,h,b,S,_,L,v,y,w,T;e=new bi({}),t=new cs({}),s=new Ns({}),l=new Yn({}),u=new As({}),m=new Fs({}),c=new Jo({}),$=new Vo({}),b=new $i({}),_=new ps({}),v=new xs({});let C=n[0].full&&cn();return{c(){q(e.$$.fragment),o=V(),q(t.$$.fragment),i=V(),q(s.$$.fragment),r=V(),q(l.$$.fragment),d=V(),q(u.$$.fragment),a=V(),q(m.$$.fragment),g=V(),q(c.$$.fragment),f=V(),q($.$$.fragment),h=V(),q(b.$$.fragment),S=V(),q(_.$$.fragment),L=V(),q(v.$$.fragment),y=V(),C&&C.c(),w=Be()},m(p,x){j(e,p,x),I(p,o,x),j(t,p,x),I(p,i,x),j(s,p,x),I(p,r,x),j(l,p,x),I(p,d,x),j(u,p,x),I(p,a,x),j(m,p,x),I(p,g,x),j(c,p,x),I(p,f,x),j($,p,x),I(p,h,x),j(b,p,x),I(p,S,x),j(_,p,x),I(p,L,x),j(v,p,x),I(p,y,x),C&&C.m(p,x),I(p,w,x),T=!0},p(p,x){p[0].full?C?x&1&&M(C,1):(C=cn(),C.c(),M(C,1),C.m(w.parentNode,w)):C&&($e(),F(C,1,1,()=>{C=null}),ye())},i(p){T||(M(e.$$.fragment,p),M(t.$$.fragment,p),M(s.$$.fragment,p),M(l.$$.fragment,p),M(u.$$.fragment,p),M(m.$$.fragment,p),M(c.$$.fragment,p),M($.$$.fragment,p),M(b.$$.fragment,p),M(_.$$.fragment,p),M(v.$$.fragment,p),M(C),T=!0)},o(p){F(e.$$.fragment,p),F(t.$$.fragment,p),F(s.$$.fragment,p),F(l.$$.fragment,p),F(u.$$.fragment,p),F(m.$$.fragment,p),F(c.$$.fragment,p),F($.$$.fragment,p),F(b.$$.fragment,p),F(_.$$.fragment,p),F(v.$$.fragment,p),F(C),T=!1},d(p){H(e,p),p&&N(o),H(t,p),p&&N(i),H(s,p),p&&N(r),H(l,p),p&&N(d),H(u,p),p&&N(a),H(m,p),p&&N(g),H(c,p),p&&N(f),H($,p),p&&N(h),H(b,p),p&&N(S),H(_,p),p&&N(L),H(v,p),p&&N(y),C&&C.d(p),p&&N(w)}}}function fn(n){let e,o,t,i,s,r;return e=new ls({}),t=new Uo({}),s=new Ms({}),{c(){q(e.$$.fragment),o=V(),q(t.$$.fragment),i=V(),q(s.$$.fragment)},m(l,d){j(e,l,d),I(l,o,d),j(t,l,d),I(l,i,d),j(s,l,d),r=!0},i(l){r||(M(e.$$.fragment,l),M(t.$$.fragment,l),M(s.$$.fragment,l),r=!0)},o(l){F(e.$$.fragment,l),F(t.$$.fragment,l),F(s.$$.fragment,l),r=!1},d(l){H(e,l),l&&N(o),H(t,l),l&&N(i),H(s,l)}}}function mn(n){let e,o;return e=new Vs({}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Gs(n){let e,o,t,i,s;e=new ms({});let r=n[0].ready&&dn(n);return i=new Ss({}),{c(){q(e.$$.fragment),o=V(),r&&r.c(),t=V(),q(i.$$.fragment)},m(l,d){j(e,l,d),I(l,o,d),r&&r.m(l,d),I(l,t,d),j(i,l,d),s=!0},p(l,[d]){l[0].ready?r?(r.p(l,d),d&1&&M(r,1)):(r=dn(l),r.c(),M(r,1),r.m(t.parentNode,t)):r&&($e(),F(r,1,1,()=>{r=null}),ye())},i(l){s||(M(e.$$.fragment,l),M(r),M(i.$$.fragment,l),s=!0)},o(l){F(e.$$.fragment,l),F(r),F(i.$$.fragment,l),s=!1},d(l){H(e,l),l&&N(o),r&&r.d(l),l&&N(t),H(i,l)}}}function qs(n,e,o){let t;return te(n,U,i=>o(0,t=i)),[t]}class js extends X{constructor(e){super(),Z(this,e,qs,Gs,K,{})}}new js({target:document.getElementById("app")});
