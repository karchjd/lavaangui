import{d as kn,w as Ie,S as Z,i as J,s as X,c as ee,g as W,o as we,e as R,a as k,b as _e,f as D,l as oe,n as ie,h as A,r as Je,j as H,k as le,m as I,p as x,q as Oe,t as be,u as Pe,v as Xe,x as G,y as B,z as Ke,A as Qe,B as et,C as S,D as L,E as U,F as it,G as Ge,H as Te,I as Cn,J as st,K as at,L as ae,M as ve,N as ye,O as ue}from"./svelte-4598ef91.js";import{c as q}from"./cytoscape-86e840ae.js";import{g as En}from"./cytoscape-grid-guide-eb2f2e88.js";import{e as Sn}from"./cytoscape-edgehandles-455db19b.js";import{v as sn}from"./uuid-a960c1f4.js";import{J as kt}from"./jszip-133f2485.js";import{s as Ln}from"./cytoscape-svg-5a8e6db6.js";import{F as ft}from"./file-saver-05fab67f.js";import{E as Mn}from"./jspdf-a7c15206.js";import{U as Dn}from"./svg2pdf.js-d0866cf6.js";import{d as An}from"./cytoscape-dagre-a4f19369.js";import{f as On}from"./cytoscape-fcose-2999cda1.js";import{c as Fn}from"./cytoscape-cola-af60e250.js";import{c as xn}from"./cytoscape-context-menus-cfc05c35.js";import{i as In}from"./@jaames-324f80d4.js";import{p as Nn}from"./cytoscape-panzoom-81d89c13.js";import{u as Tn}from"./cytoscape-undo-redo-eac3a982.js";import{a as Pn}from"./cytoscape-automove-085c6bfa.js";import{K as ln}from"./konva-bc9c0e16.js";import{n as Vn}from"./cytoscape-node-editing-170df28d.js";import{e as Rn}from"./cytoscape-edge-editing-b8b574b0.js";import"./core-js-bbf708ea.js";import"./lodash-6eb5ace2.js";import"./heap-8ffeb77a.js";import"./functional-red-black-tree-9a31655a.js";import"./lodash.memoize-ae7939c9.js";import"./lodash.throttle-e32db46a.js";import"./dagre-9b2543cb.js";import"./graphlib-a6487d85.js";import"./@babel-75df473a.js";import"./fflate-8981c52c.js";import"./cssesc-5de85916.js";import"./font-family-papandreou-066b018a.js";import"./svgpath-76644159.js";import"./specificity-c7128631.js";import"./cose-base-3e61f9ec.js";import"./layout-base-45dab9bc.js";import"./webcola-fe958753.js";import"./jquery-793df3aa.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}})();const Q=Ie(null),rn=Ie(null),Re=Ie(null);let te=Ie({meanStruc:"default",intOvFree:!0,intLvFree:!1,estimator:"default",se:"default",missing:"listwise",n_boot:1e3,fix_first:!0,fix_single:!0,auto_var:!0,auto_cov_lv_x:!0,auto_cov_y:!0,fixed_x:!0,mode:"user model"}),de=Ie({gridShow:!1,gridSpace:26,gridColor:"#dedede",gridWidth:1,gridMovePan:!1,gridSnap:!1,gridAlign:!0,gridResize:!1,showLav:!0,showVar:!0,showMean:!0,std:!1,view:"est",ci:.95,number_digits:2}),Ae=Ie({lastFitModel:null,lastFitLavFit:null,lastFitData:null}),j=Ie({fitting:!1,loadingMode:!1,runCounter:0,modelEmpty:!0,dataAvail:!1,columnNames:null,loadedFileName:null,ids:null,dragged:null,draggedName:null,drawing:!1,full:!0,ready:!1,parsedModel:!1,meansModelled:null,buttonDown:!1,showServerErrors:!0,everEdge:!1}),mt=Ie(0);kn(j,n=>n.columnNames);const an=Ie({type:"info",message:"",key:0});function he(n,e){an.update(i=>({type:n,message:e,key:i.key+1}))}he("info","Greetings");function zn(n,e,i){let t;ee(n,de,r=>i(1,t=r));let o=!1;En(q);let s=W(Q);var l={snapToGridOnRelease:!1,drawGrid:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:2e3,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};return we(()=>{s.gridGuide(l),i(0,o=!0)}),n.$$.update=()=>{n.$$.dirty&3&&o&&t.gridShow!==void 0&&W(Q).gridGuide({drawGrid:t.gridShow}),n.$$.dirty&3&&o&&t.gridSpace!==void 0&&W(Q).gridGuide({gridSpacing:t.gridSpace}),n.$$.dirty&3&&o&&t.gridWidth!==void 0&&W(Q).gridGuide({lineWidth:t.gridWidth}),n.$$.dirty&3&&o&&t.gridMovePan!==void 0&&W(Q).gridGuide({panGrid:t.gridMovePan}),n.$$.dirty&3&&o&&t.gridSnap!==void 0&&W(Q).gridGuide({snapToGridDuringDrag:t.gridSnap}),n.$$.dirty&3&&o&&t.gridAlign!==void 0&&W(Q).gridGuide({snapToAlignmentLocationOnRelease:t.gridAlign}),n.$$.dirty&3&&o&&t.gridResize!==void 0&&W(Q).gridGuide({resize:t.gridResize})},[o,t]}class Gn extends Z{constructor(e){super(),J(this,e,zn,null,X,{})}}const re="observed-variable",fe="latent-variable",Se="constant",ke="free",We="nolabel",me="fromUser",Ve="label",Ne="byLav",Ce="fixed",Me="forcefree",Fe="directed",xe="undirected",lt="loop",ze="linked",De="fromLav",Ct="hasEst",ut="validated",Ze="continous",Ye="ordered",Bn="hasEstFixed",je=80,Un=80,un=[{selector:"element",style:{"font-size":function(n){return n.data("font-size")||14}}},{selector:"node",style:{width:je.toString(),height:"80","background-color":function(n){return n.data("background-color")||"white"},"border-color":function(n){return n.data("border-color")||"grey"},"border-width":function(n){return n.data("border-width")||"2px"},label:"data(label)","text-valign":"center","text-halign":"center"}},{selector:`node.${re}`,style:{shape:"rectangle"}},{selector:`node.${re}.${Ye}`,style:{"border-style":"double","border-width":5}},{selector:`node.${fe}`,style:{shape:"ellipse","border-color":"black"}},{selector:`node.${Se}`,style:{shape:"triangle",label:"1","text-valign":"center","text-margin-y":"10px","border-color":"black"}},{selector:`node.${ze}`,style:{"border-color":"black"}},{selector:"edge",style:{width:function(n){return n.data("width")||3},"line-color":function(n){return n.data("line-color")||"#000"},"target-arrow-color":function(n){return n.data("target-arrow-color")||"#000"},"source-arrow-color":function(n){return n.data("source-arrow-color")||"#000"},"target-arrow-shape":"triangle","curve-style":"bezier","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":Un,"z-index":10,color:"#000","text-outline-color":"#fff","text-outline-width":"2px","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4px"}},{selector:"edge.loop",style:{"curve-style":"bezier","source-arrow-shape":"triangle","loop-direction":function(n){return n.data("loop-direction")||0},"loop-sweep":.8,"control-point-step-size":n=>{const e=n.source(),i=parseInt(e.style("height")),t=parseInt(e.style("width"));let o;return n.style("loop-direction")=="0deg"||n.style("loop-direction")=="180deg"?o=i:n.style("loop-direction")=="90deg"||n.style("loop-direction")=="270deg"?o=t:o=Math.max(t,i),o/80*60}}},{selector:`edge.${xe}`,style:{"curve-style":"unbundled-bezier","control-point-distances":[-100],"control-point-weights":[.5],"source-arrow-shape":"triangle"}},{selector:`edge.${xe}.${De}`,style:{"control-point-distances":[100]}},{selector:`edge.${Ve}, edge.${Ve}`,style:{label:function(n){return n.data("label")}}},{selector:`edge.${Ce}.${Ve}`,style:{label:function(n){return n.data("label")+"@"+n.data("value")}}},{selector:`edge.${Ce}.${We}`,style:{label:function(n){return"@"+n.data("value")}}},{selector:`edge.${Me}`,style:{"line-color":"blue"}},{selector:`edge.${De}, edge.${Ne}`,style:{"line-style":"dashed"}},{selector:"edge:selected",style:{"underlay-opacity":.5,"underlay-color":"#928ff8"}},{selector:"node:selected",style:{"underlay-color":"#928ff8","underlay-opacity":.5}}],He={autoungrabify:!1,autolock:!1,style:un,minZoom:.2,maxZoom:5},qn={preview:!1,hoverDelay:150,handleNodes:"node",snap:!0,handleColor:"#ff0000",handleSize:10,canConnect:function(n,e){return!cy.edges(function(t){if(!t.isUserAdded())return!1;const o=t.source().id()==n.id()&&t.target().id()==e.id(),s=t.source().id()==e.id()&&t.target().id()==n.id();return o||s}).length}},jn={undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4};function Hn(n){q.use(Sn);var e=q(He);return e.boxSelectionEnabled(!0),Q.set(e),rn.set(e.edgehandles(qn)),[]}class Wn extends Z{constructor(e){super(),J(this,e,Hn,null,X,{})}}function se(n){var e=W(j);if(!e.full)return;let i=W(Q);const t=i.edges();for(var o=0;o<t.length;o++)t[o].removeEstimates();if(i.getUserEdges().length==0){i.getLavaanNodes().remove(),i.getLavaanEdges().remove();return}if(!e.dataAvail&&n=="estimate"){he("danger","Model not send to lavaan because no data available");return}let s=dn(n);Shiny.setInputValue("run-fromJavascript",JSON.stringify(s)),Shiny.setInputValue("runCounter",Math.random()),n==="user model"&&i.getLavaanModifiedEdges().forEach(l=>{l.freePara()})}function Yn(n,e){for(let i=0;i<n.length;i++)if(n[i]===e)return!0;return!1}function ot(n,e){let i;n==null?i="1":i=n.getLabel();let t=!1,o;if(e.isFixed()&&!e.isModifiedLavaan()?(o=e.getValue()+"*"+i,t=!0):e.isForceFree()&&(o="NA*"+i,t=!0),e.hasLabel()){const s=e.getLabel();t?o+=" + "+s+"*"+i:(t=!0,o=s+"*"+i)}else t||(o=i);return o}class Zn{constructor(e,i,t=null,o=null,s=null,l=null){this.mode=e,Object.assign(this,{model:{options:t,syntax:o,R_script:i,ordered_labels:l},forceUpdate:Math.random(),cache:s})}}function dn(n){let e=W(Q),i=W(j),t="",o="";o+=`library(lavaan)
`,i.dataAvail?o+=`data <- read.csv("${i.loadedFileName}")
`:o+=`#make sure your data is loaded into the 'data' variable
`;const s=e.getLatentNodes();let l=!1;for(let m=0;m<s.length;m++){const y=s[m];let M="";const O=y.connectedEdges(function(w){return w.isDirected()&&w.source().id()==y.id()&&w.target().isObserved()});if(O.length>0){l||(t+=`# measurement model
`,l=!0);const w=Math.max(...O.map(v=>v.target().position().x))-Math.min(...O.map(v=>v.target().position().x)),N=Math.max(...O.map(v=>v.target().position().y))-Math.min(...O.map(v=>v.target().position().y)),z=w>=N?"x":"y",$=O.map((v,Y)=>({index:Y,value:v.target().position()[z]})).sort((v,Y)=>v.value-Y.value).map(v=>v.index);for(let v=0;v<O.length;v++){const Y=O[$[v]].target();v>0&&(M+=" + "),M+=ot(Y,O[$[v]])}t+=" "+y.getLabel()+" =~ "+M+`
`}else y.connectedEdges(function(w){return w.isUserAdded()}).length>0&&(l||(t+=`# measurement model
`,l=!0),t+=" "+y.getLabel()+` =~ 0
`)}function r(m){return m.isDirected()&&!m.source().isConstant()&&!(m.source().isLatent()&&m.target().isObserved())&&(m.isUserAdded()||m.isModifiedLavaan())}let u=e.edges(r),d=[];for(let m=0;m<u.length;m++)Yn(d,u[m].target())||d.push(u[m].target());if(d.length>0){t+=`
# regressions`;for(let m=0;m<d.length;m++){const y=d[m],M=y.connectedEdges(O=>r(O)&&O.target().same(y));if(M.length>0){let O="";for(var a=0;a<M.length;a++){var f=M[a].source();a>0&&(O+=" + "),O+=ot(f,M[a])}t+=`
 `+y.getLabel()+" ~ "+O}}}let g=e.edges(function(m){return(m.isUndirected()||m.myIsLoop())&&(m.isUserAdded()||m.isModifiedLavaan())});if(g.length>0){t+=`

# residual (co)variances`;for(let m=0;m<g.length;m++){let y=g[m].source().data("label");t+=`
 `+y+" ~~ "+ot(g[m].target(),g[m])}}const c=e.nodes(function(m){return m.isConstant()});for(let m=0;m<c.length;m++){const M=c[m].connectedEdges(function(O){return O.isUserAdded()});if(M.length>0){t+=`
# intercepts
`;for(var a=0;a<M.length;a++){var f=M[a].target();t+=f.getLabel()+" ~ "+ot(void 0,M[a])+`
`}}}t=`'
`+t+`'

`;function p(m,y=60){return m.split(`
`).map(M=>{if(M.includes("+")&&M.length>y){const O=M.split(" + ");let w=[],N=O[0];const z=M.match(/^\s*/)[0],$=N.indexOf("~")+1;for(let v=1;v<O.length;v++)N.length+O[v].length+3>y?(w.push(N+" + "),N=z+" ".repeat($)+O[v]):N+=" + "+O[v];return w.push(N),w.join(`
`)}return M}).join(`
`)}t=p(t);const _=e.nodes(function(m){return m.isOrdered()}).map(m=>m.getLabel()),h=Jn(_);return o+="model <-"+t,o+="result <- lavaan(model, data, "+h,new Zn(n,o,h,t=t,W(Ae),_)}function Jn(n){const e=W(te),i=Le(e.meanStruc),t=Le(e.intOvFree),o=Le(e.intLvFree);let s=`meanstructure = ${i},
		 int.ov.free = ${t}, int.lv.free = ${o},
		 estimator = ${dt(e.estimator)}, se = ${dt(e.se)},
		 missing = ${dt(e.missing)}, auto.fix.first = ${Le(e.fix_first)},
		 auto.fix.single = ${Le(e.fix_single)}, auto.var = ${Le(e.auto_var)},
		 auto.cov.lv.x = ${Le(e.auto_cov_lv_x)}, auto.cov.y = ${Le(e.auto_cov_y)},
  		 fixed.x = ${Le(e.fixed_x)}`;if(e.se=="boot"){const l=`, bootstrap = ${e.n_boot})`;s=s+l}else s=s+")";return n.length>0&&(s=`ordered = ${'c("'+n.join('", "')+'")'}, ${s}`),s}function dt(n){return'"'+n+'"'}function Le(n){if(n==!0||n=="true")return"TRUE";if(n==!1||n=="false")return"FALSE";if(n=="default")return'"default"';throw new Error("Should not happen")}let cn,fn;function mn(){cn=1,fn=1}mn();function pe(n,e,i=!0,t=null){let o=W(Q),s=sn(),l;if(t!==null){if(o.nodes().find(u=>u.data().label===t)){he("danger","Node with the same label already exists.");return}l=t}else n==re?l="x"+cn++:n==fe?l="f"+fn++:l=void 0,o.nodes().find(u=>u.data().label===l)&&(l=l+".1");let r=W(Re);return e?r.do("add",{group:"nodes",data:{id:s,label:l},classes:[n,Ze],renderedPosition:e}):(e={x:Math.random()*400+50,y:Math.random()*400+50},o.add({group:"nodes",data:{id:s,label:l},classes:[n,Ze],renderedPosition:e})),i&&se(W(te).mode),s}function qe(n,e,i=!0,t=!1,o=null,s=!0){let l=W(Q),r=sn();return l.add({group:"edges",data:{id:r,source:n,target:e,value:t?o:void 0},classes:`${i?Fe:xe} ${s?me:De} ${t?Ce:ke} ${We}`})}function $e(n){const e=no(n);if(e!=null){const i=Kn(n),t=Qn(i);let o=to(t);o=Xn(o,t),e.data("loop-direction",`${o}deg`)}}function Xn(n,e){const i=[0,180,90,270],t=35,o=i.sort((r,u)=>{const d=Math.min(Math.abs(r-n),360-Math.abs(r-n)),a=Math.min(Math.abs(u-n),360-Math.abs(u-n));return d-a}),l=[[0,180],[90,270]].flatMap(r=>o.filter(u=>r.includes(u)));for(const r of l)if(!e.some(d=>{const a=Math.abs(r-d);return Math.min(a,360-a)<=t}))return r;return n}function Kn(n){const e=cy.getElementById(n);if(e.length===0){console.error(`Node with ID ${n} does not exist.`);return}let i=[];return e.connectedEdges().forEach(t=>{const o=t.source(),s=t.target();let l;(o.id()!==e.id()||s.id()!==e.id())&&(o.id()===e.id()?l=Et(t.sourceEndpoint(),e.position()):l=Et(t.targetEndpoint(),e.position()),i.push(l))}),i}function Et(n,e){return Object.keys(n).reduce((i,t)=>{if(e.hasOwnProperty(t))i[t]=n[t]-e[t];else throw new Error(`Key ${t} not found in second object`);return i},{})}function Qn(n){let e=[];return n.forEach(i=>{e.push(eo(i))}),e}function eo(n){let e=Math.atan2(n.y,n.x)*180/Math.PI;return e=(e+90)%360,e}function to(n){let e=-1,i=null;for(let t=0;t<=360;t++){let o=1/0;for(let s=0;s<n.length;s++){let l=Math.abs(n[s]-t);l=Math.min(l,360-l),o=Math.min(o,l)}o>e&&(e=o,i=t)}return i}function no(n,e){var i=cy.getElementById(n),t=null;return i.connectedEdges().forEach(function(o){var s=o.source(),l=o.target();if(s.id()===n&&l.id()===n){t=o;return}}),t!==null&&i.connectedEdges().length>1&&!t.hasClass("fixDeg")?t:null}function oo(n){let e,i,t;return{c(){e=R("div"),k(e,"id","cy"),k(e,"class","graph svelte-11pj9ut"),_e(e,"flex-basis",n[1].full?"70%":"100%")},m(o,s){D(o,e,s),n[6](e),i||(t=[oe(e,"mouseover",n[2]),oe(e,"mouseout",n[3]),oe(e,"mousemove",n[4]),oe(e,"drop",n[5]),oe(e,"dragover",io)],i=!0)},p(o,[s]){s&2&&_e(e,"flex-basis",o[1].full?"70%":"100%")},i:ie,o:ie,d(o){o&&A(e),n[6](null),i=!1,Je(t)}}}function io(n){n.preventDefault()}function so(n,e){let i=Math.atan2(n,-e)*(180/Math.PI);return i<0&&(i+=360),i}function lo(n,e,i){let t,o,s;ee(n,Re,w=>i(13,t=w)),ee(n,j,w=>i(1,o=w)),ee(n,te,w=>i(14,s=w));let l=W(Q),r=W(rn),u,d={x:0,y:0},a;we(()=>{l.mount(u)});function f(w){if(H(j,o.buttonDown=!0,o),(w.key==="Alt"||w.key===" "||w.key.toLowerCase()==="x")&&(r.enableDrawMode(),a=!1,H(j,o.drawing=!0,o),w.key==="Alt"&&(a=!0)),w.key==="Backspace"){let N=l.$(":selected");N.length>0&&(t.do("remove",N),se(s.mode)),H(j,o.buttonDown=!1,o)}if(["l","o","c"].includes(w.key.toLowerCase())){let N;switch(w.key.toLowerCase()){case"l":N=fe;break;case"o":N=re;break;case"c":N=Se;break}pe(N,{...d}),H(j,o.buttonDown=!1,o)}H(j,o.buttonDown=!1,o)}function g(){l.autoungrabify(!1),l.nodes().grabify()}function c(w){H(j,o.drawing=!1,o),g(),(w.key==="Alt"||w.key===" "||w.key.toLowerCase()==="x")&&r.disableDrawMode()}function p(){document.addEventListener("keydown",f),document.addEventListener("keyup",c)}function b(){document.removeEventListener("keydown",f,!1),document.removeEventListener("keyup",c,!1),r.disableDrawMode()}function _(w){d.x=w.offsetX,d.y=w.offsetY}l.on("ehcomplete",(w,N,z,$)=>{const v=$,Y=N.id(),ge=z.id();v.remove(),v.init(),Y!==ge?(a?v.setUndirected():v.setDirected(),$e(Y),$e(ge)):(v.makeLoop(),$e(ge)),!((v.isUndirected()||v.myIsLoop())&&(N.isConstant()||z.isConstant()))&&(v.isDirected()&&z.isConstant()||v.isDirected()&&N.isConstant()&&z.connectedEdges(C=>C.isUserAdded()&&C.source().isConstant()).length>1||(v.isDirected()&&N.isConstant()?v.makeMeanEdge():v.makeOtherEdge(),t.do("add",v),se(s.mode)))});function h(w){let N=0;const z=100,$=z*2;w.preventDefault();let v={x:w.offsetX,y:w.offsetY};function Y(C,V){let F;if(o.dataAvail){const K=l.getObservedNodes().map(ne=>ne.data().label);F=o.columnNames.filter(ne=>!K.includes(ne)).map(ne=>({text:ne,value:ne}))}else F=Array.from({length:100},(K,P)=>`var${P+1}`);const ce={title:C,inputType:"select",multiple:!0,value:"",inputOptions:F,callback:V};bootbox.prompt(ce)}function ge(){he("danger","Either no variable selected or at least one selected variable already is in the model.")}function T(C){return C&&!l.nodes().some(V=>V.data().label===C)}if(o.dragged=="observed-with-name")pe(re,v,!0,o.draggedName);else if(o.dragged=="multiple")Y("Select Variables",function(C){if(T(C)){const V=l.zoom();C.forEach(F=>{pe(re,{x:v.x+N*V,y:v.y},!0,F),N+=z})}else ge()});else if(o.dragged=="factor")Y("Select Variables",function(C){if(T(C)){const V=l.zoom(),F=pe(fe,{x:v.x+z*V*C.length/2-je/2*V,y:v.y});C.forEach(ce=>{const K=pe(re,{x:v.x+N*V,y:v.y+V*$},!0,ce);N+=z,qe(F,K)}),H(te,s.fix_first=!0,s),H(te,s.fix_single=!0,s),H(te,s.auto_var=!0,s),H(te,s.intOvFree=!0,s),H(te,s.intLvFree=!1,s)}else ge()});else if(o.dragged=="growth"){let C=0;Y("Select Time Points",function(V){if(T(V)){const F=l.zoom(),ce=pe(Se,{x:v.x+z*F*V.length/2-je/2*F,y:v.y},!0),K=pe(fe,{x:v.x+je/2*F,y:v.y+1*$*F},!0,"Intercept"),P=pe(fe,{x:v.x+z*F*(V.length-1)-je/2*F,y:v.y+1*$*F},!0,"Slope");qe(ce,K,!0,!1),qe(ce,P,!0,!1);let ne=1;V.forEach(nt=>{const Ue=pe(re,{x:v.x+C*F,y:v.y+2*$*F},!0,nt);C+=z,qe(K,Ue,!0,!0,1),ne!=1&&qe(P,Ue,!0,!0,ne-1),ne+=1}),H(te,s.auto_var=!0,s),H(te,s.intOvFree=!1,s),H(te,s.intLvFree=!0,s)}})}else pe(o.dragged,v);(o.dragged=="multiple"||o.dragged=="factor"||o.dragged=="growth")&&se(s.mode),H(j,o.dragged=null,o)}let E=!1,m=null,y;l.on("mousedown","edge.loop",function(w){E=!0,m=w.target,m.unpanify(),y=m.style("loop-direction")});let M;l.on("mousemove",function(w){if(!E||!m)return;let z=m.source().renderedPosition();M=so(d.x-z.x,d.y-z.y);const $=5,v=[0,90,180,270];for(let Y=0;Y<v.length;Y++)if(Math.abs(M-v[Y])<=$){M=v[Y];break}m.data("loop-direction",`${M}deg`)}),window.addEventListener("mouseup",function(){if(E){if(E=!1,M===void 0||y===`${M}deg`)return;m.data("loop-direction",y),m.addClass("fixDeg"),t.do("style",{eles:m,style:{"loop-direction":`${M}deg`}}),m=null}});function O(w){le[w?"unshift":"push"](()=>{u=w,i(0,u)})}return[u,o,p,b,_,h,O]}class ro extends Z{constructor(e){super(),J(this,e,lo,oo,X,{})}}function ao(n,e,i){let t,o;ee(n,j,u=>i(2,t=u)),ee(n,te,u=>i(3,o=u));let s=W(Q);s.on("add","node",function(u){const d=u.target;if(d.isObserved()){let a=t.columnNames;a&&a.includes(d.getLabel())&&(d.link(),he("success",`Variable ${d.getLabel()} linked to data`))}t.modelEmpty&&s.edges().length>0&&H(j,t.modelEmpty=!1,t)}),s.on("remove","node",function(u){s.getUserEdges().length==0&&(H(j,t.modelEmpty=!0,t),Shiny.setInputValue("show_help",Math.random())),t.loadingMode||se(o.mode)}),s.on("remove","edge",function(u){$e(u.target.source().id()),$e(u.target.target().id())}),s.on("add","edge",function(u){H(j,t.everEdge=!0,t),t.modelEmpty&&s.edges().length>0&&H(j,t.modelEmpty=!1,t),$e(u.target.source().id()),$e(u.target.target().id())}),s.on("position","node",function(u){u.target.neighborhood().nodes().forEach(f=>{const g=f.id();$e(g)})});let l=null,r=!1;return s.on("mousedown",function(u){const d=p=>parseFloat(p.replace("px","")),a=u.position;let f=null,g=1/0;const c=30;s.edges().forEach(function(p){if(p.isDirected()){const b=d(p.style("text-margin-x")),_=d(p.style("text-margin-y")),h=p.midpoint(),E={x:h.x+b,y:h.y+_},m=Math.abs(a.x-E.x),y=a.y-E.y,M=Math.sqrt(m*m+y*y);M<g&&M<c&&(f=p,g=M)}}),f!==null&&(l=f,r=!0,u.preventDefault(),f.unpanify())}),s.on("mousemove",function(u){if(r&&l){const d=u.position,a=l.midpoint(),f=l.source().position(),g=l.target().position(),c={x:g.x-f.x,y:g.y-f.y},p=Math.sqrt(c.x**2+c.y**2),b={x:c.x/p,y:c.y/p},_={x:d.x-a.x,y:d.y-a.y};let h=_.x*b.x+_.y*b.y;const E=(g.y-a.y)/b.y-70,m=(f.y-a.y)/b.y+70;let y=Math.min(E,h);y=Math.max(m,y);const M=y*b.x,O=y*b.y;l.style({"text-margin-x":M,"text-margin-y":O})}}),s.on("mouseup",function(u){r=!1,l=null}),[]}class uo extends Z{constructor(e){super(),J(this,e,ao,null,X,{})}}function St(n,e,i){const t=n.slice();return t[19]=e[i],t}function Lt(n){let e,i,t,o,s,l,r,u,d,a,f,g,c,p,b=n[1],_=[];for(let h=0;h<b.length;h+=1)_[h]=Mt(St(n,b,h));return{c(){e=R("div"),i=I(),t=R("div"),o=R("button"),o.textContent="Multiple Variables",s=I(),l=R("button"),l.textContent="Factor",r=I(),u=R("button"),u.textContent="Growth",d=I(),a=R("div"),f=I(),g=R("ul");for(let h=0;h<_.length;h+=1)_[h].c();k(e,"class","vertical-bar svelte-1ecko2"),k(o,"class","draggable-item svelte-1ecko2"),k(o,"draggable","true"),k(l,"class","draggable-item svelte-1ecko2"),k(l,"draggable","true"),k(u,"class","draggable-item svelte-1ecko2"),k(u,"draggable","true"),k(t,"id","model-buttons"),k(t,"class","svelte-1ecko2"),k(a,"class","vertical-bar svelte-1ecko2"),k(g,"class","draggable-list svelte-1ecko2")},m(h,E){D(h,e,E),D(h,i,E),D(h,t,E),x(t,o),x(t,s),x(t,l),x(t,r),x(t,u),D(h,d,E),D(h,a,E),D(h,f,E),D(h,g,E);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(g,null);c||(p=[oe(o,"dragstart",n[13]),oe(l,"dragstart",n[14]),oe(u,"dragstart",n[15])],c=!0)},p(h,E){if(E&10){b=h[1];let m;for(m=0;m<b.length;m+=1){const y=St(h,b,m);_[m]?_[m].p(y,E):(_[m]=Mt(y),_[m].c(),_[m].m(g,null))}for(;m<_.length;m+=1)_[m].d(1);_.length=b.length}},d(h){h&&A(e),h&&A(i),h&&A(t),h&&A(d),h&&A(a),h&&A(f),h&&A(g),Oe(_,h),c=!1,Je(p)}}}function Mt(n){let e,i=n[19]+"",t,o,s,l;function r(...u){return n[16](n[19],...u)}return{c(){e=R("li"),t=be(i),o=I(),k(e,"draggable","true"),k(e,"class","draggable-item svelte-1ecko2")},m(u,d){D(u,e,d),x(e,t),x(e,o),s||(l=oe(e,"dragstart",r),s=!0)},p(u,d){n=u,d&2&&i!==(i=n[19]+"")&&Pe(t,i)},d(u){u&&A(e),s=!1,l()}}}function co(n){let e,i,t,o,s,l,r,u,d,a,f,g,c,p,b,_=n[0].dataAvail&&Lt(n);return{c(){e=R("div"),i=R("div"),t=R("div"),o=R("button"),o.textContent="➔",s=I(),l=R("button"),l.textContent="↔",r=I(),u=R("div"),d=I(),a=R("div"),f=I(),g=R("div"),c=I(),_&&_.c(),k(o,"id","directed-arrow"),k(o,"class","arrow-btn svelte-1ecko2"),k(o,"title","Directed Arrow"),k(l,"id","undirected-arrow"),k(l,"class","arrow-btn svelte-1ecko2"),k(l,"title","Undirected Arrow"),k(u,"role","button"),k(u,"id","add-manifest-variable"),k(u,"title","Create Observed Variable"),k(u,"draggable","true"),k(u,"class","variable-button svelte-1ecko2"),k(u,"data-button-type",re),k(u,"tabindex","0"),k(a,"role","button"),k(a,"tabindex","0"),k(a,"id","add-latent-variable"),k(a,"title","Create Latent Variable"),k(a,"draggable","true"),k(a,"class","variable-button svelte-1ecko2"),k(a,"data-button-type",fe),k(g,"role","button"),k(g,"tabindex","0"),k(g,"id","add-constant-variable"),k(g,"class","variable-button svelte-1ecko2"),k(g,"title","Create Constant Variable"),k(g,"data-button-type","const"),k(g,"draggable","true"),k(t,"id","buttons"),k(t,"class","svelte-1ecko2"),k(i,"id","buttonCont"),k(i,"class","svelte-1ecko2"),k(e,"class","toolbox svelte-1ecko2")},m(h,E){D(h,e,E),x(e,i),x(i,t),x(t,o),x(t,s),x(t,l),x(t,r),x(t,u),x(t,d),x(t,a),x(t,f),x(t,g),x(e,c),_&&_.m(e,null),p||(b=[oe(o,"click",n[8]),oe(l,"click",n[9]),oe(u,"dragstart",n[10]),oe(a,"dragstart",n[11]),oe(g,"dragstart",n[12])],p=!0)},p(h,[E]){h[0].dataAvail?_?_.p(h,E):(_=Lt(h),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},i:ie,o:ie,d(h){h&&A(e),_&&_.d(),p=!1,Je(b)}}}function Dt(n){n==="directed"?bootbox.alert("Connect two nodes with a directed edge by dragging from one to another while holding the SPACE key or the X key."):n==="undirected"?bootbox.alert("Connect two nodes with an undirected edge by dragging from one to another while holding the ALT or OPTION key."):bootbox.alert("Error: Unknown edge type.")}function fo(n,e,i){let t,o;ee(n,j,y=>i(0,t=y)),ee(n,Q,y=>i(7,o=y)),j.subscribe(y=>{});function s(y){H(j,t.dragged=y,t)}function l(y,M){H(j,t.dragged="observed-with-name",t),H(j,t.draggedName=M,t)}function r(y){H(j,t.dragged="multiple",t)}function u(y){H(j,t.dragged="factor",t)}function d(y){H(j,t.dragged="growth",t)}let a;const f=()=>{Dt("directed")},g=()=>{Dt("undirected")},c=()=>{event.dataTransfer.setData("text/plain","node"),s(re)},p=()=>{s(fe)},b=()=>{s(Se)},_=y=>r(),h=y=>u(),E=y=>d(),m=(y,M)=>l(M,y);return n.$$.update=()=>{if(n.$$.dirty&129&&typeof o.getObservedNodes=="function"&&t.columnNames!==null){const y=o.getObservedNodes().map(M=>M.data("label"));i(1,a=t.columnNames.filter(M=>!y.includes(M)))}},[t,a,s,l,r,u,d,o,f,g,c,p,b,_,h,E,m]}class mo extends Z{constructor(e){super(),J(this,e,fo,co,X,{})}}function go(n){let e,i,t,o,s;const l=n[1].default,r=Xe(l,n,n[0],null);return o=new mo({}),{c(){e=R("nav"),i=R("ul"),r&&r.c(),t=I(),G(o.$$.fragment),k(i,"class","nav navbar-nav navbar-left"),k(e,"class","navbar navbar-default navbar-static-top navbar-left svelte-12n5yi9")},m(u,d){D(u,e,d),x(e,i),r&&r.m(i,null),x(e,t),B(o,e,null),s=!0},p(u,[d]){r&&r.p&&(!s||d&1)&&Ke(r,l,u,u[0],s?et(l,u[0],d,null):Qe(u[0]),null)},i(u){s||(S(r,u),S(o.$$.fragment,u),s=!0)},o(u){L(r,u),L(o.$$.fragment,u),s=!1},d(u){u&&A(e),r&&r.d(u),U(o)}}}function po(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=s=>{"$$scope"in s&&i(0,o=s.$$scope)},[o,t]}class ho extends Z{constructor(e){super(),J(this,e,po,go,X,{})}}function bo(n){let e,i,t,o,s,l,r;const u=n[3].default,d=Xe(u,n,n[2],null);return{c(){e=R("li"),i=R("a"),t=be(n[0]),o=R("span"),s=I(),l=R("ul"),d&&d.c(),k(o,"class","caret"),k(i,"href","#"),k(i,"class","dropdown-toggle svelte-1oq006n"),k(i,"data-toggle","dropdown"),k(i,"role","button"),k(i,"aria-haspopup","true"),k(i,"aria-expanded","false"),k(i,"draggable","false"),it(i,"minimal",n[1]),k(l,"class","dropdown-menu"),k(e,"class","dropdown")},m(a,f){D(a,e,f),x(e,i),x(i,t),x(i,o),x(e,s),x(e,l),d&&d.m(l,null),r=!0},p(a,[f]){(!r||f&1)&&Pe(t,a[0]),(!r||f&2)&&it(i,"minimal",a[1]),d&&d.p&&(!r||f&4)&&Ke(d,u,a,a[2],r?et(u,a[2],f,null):Qe(a[2]),null)},i(a){r||(S(d,a),r=!0)},o(a){L(d,a),r=!1},d(a){a&&A(e),d&&d.d(a)}}}function _o(n,e,i){let{$$slots:t={},$$scope:o}=e,{name:s}=e,{minimal:l=!1}=e;return n.$$set=r=>{"name"in r&&i(0,s=r.name),"minimal"in r&&i(1,l=r.minimal),"$$scope"in r&&i(2,o=r.$$scope)},[s,l,o,t]}class Be extends Z{constructor(e){super(),J(this,e,_o,bo,X,{name:0,minimal:1})}}function At(n,e,i){const t=n.slice();return t[4]=e[i],t}function Ot(n){let e;return{c(){e=R("li"),k(e,"class","divider")},m(i,t){D(i,e,t)},d(i){i&&A(e)}}}function Ft(n){let e,i,t=n[4].name+"",o,s,l,r,u;function d(...f){return n[3](n[4],...f)}let a=n[4].divider&&Ot();return{c(){e=R("li"),i=R("a"),o=be(t),s=I(),a&&a.c(),l=Ge(),k(i,"href","#"),it(e,"disabled",n[4].disable)},m(f,g){D(f,e,g),x(e,i),x(i,o),D(f,s,g),a&&a.m(f,g),D(f,l,g),r||(u=oe(i,"click",d),r=!0)},p(f,g){n=f,g&1&&t!==(t=n[4].name+"")&&Pe(o,t),g&1&&it(e,"disabled",n[4].disable),n[4].divider?a||(a=Ot(),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null)},d(f){f&&A(e),f&&A(s),a&&a.d(f),f&&A(l),r=!1,u()}}}function $o(n){let e,i=n[0],t=[];for(let o=0;o<i.length;o+=1)t[o]=Ft(At(n,i,o));return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=Ge()},m(o,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(o,s);D(o,e,s)},p(o,s){if(s&1){i=o[0];let l;for(l=0;l<i.length;l+=1){const r=At(o,i,l);t[l]?t[l].p(r,s):(t[l]=Ft(r),t[l].c(),t[l].m(e.parentNode,e))}for(;l<t.length;l+=1)t[l].d(1);t.length=i.length}},d(o){Oe(t,o),o&&A(e)}}}function vo(n){let e,i;return e=new Be({props:{minimal:n[2],name:n[1],$$slots:{default:[$o]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const s={};o&4&&(s.minimal=t[2]),o&2&&(s.name=t[1]),o&129&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function yo(n,e){e.disable||e.action(n)}function wo(n,e,i){let{menuItems:t}=e,{name:o}=e,{minimal:s=!1}=e;const l=(r,u)=>yo(u,r);return n.$$set=r=>{"menuItems"in r&&i(0,t=r.menuItems),"name"in r&&i(1,o=r.name),"minimal"in r&&i(2,s=r.minimal)},[t,o,s,l]}class ht extends Z{constructor(e){super(),J(this,e,wo,vo,X,{menuItems:0,name:1,minimal:2})}}function gt(n,e){if(n==null)throw new Error("Columnnames may not be null.");const t=W(Q).nodes(function(s){return s.isObserved()});if(t.length>0)for(var o=0;o<t.length;o++){const s=t[o],l=s.getLabel();n.includes(l)&&!s.isLinked()?s.link():!n.includes(l)&&s.isLinked()&&s.unlink()}}function ko(){const n=W(Q);bt(n.png({bg:"white"}),"png")}function Co(){const n=W(Q);bt(n.jpg(),"jpg")}function gn(){return W(Q).svg({scale:1,full:!0})}function Eo(){const n=gn(),e=new Blob([n],{type:"image/svg+xml;charset=utf-8"});bt(e,"svg")}function xt(n,e){for(let i in e)e.hasOwnProperty(i)&&e[i]!==void 0&&(n[i]=e[i])}function So(){W(Q).elements().remove(),mn();let e=W(j),i=W(te),t=W(Ae);e.parsedModel=!1,i.fix_first=!0,i.mode="user model",Shiny.setInputValue("show_help",Math.random());for(let o in t)t[o]=null}function Lo(n){So();let e=JSON.parse(n),i=W(Q),t=W(de),o=W(te),s=W(j);W(Ae);let l;l=JSON.parse(e.model);const r=JSON.parse(e.modelOpt),u=JSON.parse(e.gridViewOpt);xt(o,r),xt(t,u),e.fitCache!=null&&JSON.parse(e.fitCache),s.loadingMode=!0,i.json({elements:l}),i.style(un),i.edgeEditing(jn),i.style().update(),i.minZoom(He.minZoom),i.maxZoom(He.maxZoom),i.autolock(He.autolock),i.autoungrabify(He.autoungrabify),i.nodeEditing({resizeToContentCueImage:"",undoable:!0}),i.nodes().forEach(d=>{console.log(d.data("width")),d.style({width:d.data("width")}),d.style({height:d.data("height")})}),s.dataAvail&&gt(s.columnNames),o.mode!=="user model"?u.showLav=!0:u.showLav=!1,i.nodes().forEach(d=>{$e(d.id())}),s.loadingMode=!1}async function pn(n="model.pdf"){const e=gn(),t=new DOMParser().parseFromString(e,"image/svg+xml").documentElement;t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const o=t.getBoundingClientRect();document.body.removeChild(t);const s=o.width,l=o.height,r=new Mn({orientation:s>l?"landscape":"portrait",unit:"pt",format:[s,l]});return await Dn(t,r,{width:s,height:l}),r.output()}function bt(n,e){ft.saveAs(n,"model."+e)}function Mo(n){let e,i;return e=new ht({props:{name:"File",menuItems:n[1],minimal:!n[0]}}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const s={};o&2&&(s.menuItems=t[1]),o&1&&(s.minimal=!t[0]),e.$set(s)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}async function It(){const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept",".lvm");const e=await new Promise(t=>{n.addEventListener("change",o=>t(o.target.files[0])),n.click()}),i=await new Promise(t=>{const o=new FileReader;o.readAsText(e,"UTF-8"),o.onload=()=>t(o.result)});parseModel(i)}function Do(){document.getElementById("dataUpload-fileInput").click()}function Nt(){const n=new Date;return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}_${String(n.getHours()).padStart(2,"0")}-${String(n.getMinutes()).padStart(2,"0")}-${String(n.getSeconds()).padStart(2,"0")}`}async function Ao(){Shiny.setInputValue("down-requestData",Math.random())}function Oo(n,e,i){let t,o,s,l;ee(n,j,h=>i(2,t=h)),ee(n,mt,h=>i(3,o=h)),ee(n,Ae,h=>i(4,s=h)),ee(n,te,h=>i(5,l=h));let{full:r=!0}=e;q.use(Ln);function u(){t.modelEmpty?reset():bootbox.confirm("Are you sure you want to create a new model? This will delete the current model.",function(h){h&&reset()})}function d(){t.modelEmpty?It():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(h){h&&It()})}function a(){t.modelEmpty?f():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(h){h&&f()})}function f(){const h=document.createElement("input");h.setAttribute("type","file"),h.setAttribute("accept",".lvd"),h.addEventListener("change",function(E){const m=E.target.files[0],y=new FileReader;y.readAsArrayBuffer(m),y.onload=function(){const M=y.result;kt.loadAsync(M).then(function(O){O.file("data.csv").async("base64").then(function(w){Shiny.setInputValue("dataUpload-fileInput",{content:w});const N=setInterval(()=>{t.dataAvail&&(clearInterval(N),O.file("model.lvm").async("text").then(function(z){parseModel(z)}))},100)})})}}),h.click()}function g(){const h=W(Q);q(),h.nodes().forEach(N=>{N.data("width",N.width()),N.data("height",N.height())});let E=h.json().elements;E.nodes.forEach(N=>{N.classes=N.classes.split(" ").filter(z=>z!==ze).join(" ")});const m=JSON.stringify(E),y=JSON.stringify(l),M=JSON.stringify(l),O=JSON.stringify(s);return JSON.stringify({model:m,modelOpt:y,gridViewOpt:M,fitCache:O})}function c(){const h=g();let E=new Blob([h],{type:"application/json;charset=utf-8"});ft.saveAs(E,"model_"+Nt()+".lvm")}Shiny.addCustomMessageHandler("dataForDownload",function(h){(async()=>{const E=g(),m=new kt;m.file("model.lvm",E),m.file("data.csv",h);const y=await m.generateAsync({type:"blob"}),M=new File([y],"model_"+Nt()+".lvd",{type:"application/zip"});ft.saveAs(M)})()});function p(){const h=W(Q);H(j,t.dataAvail=!1,t),H(j,t.columnNames=null,t),H(j,t.loadedFileName=null,t),H(j,t.ids=null,t),H(mt,o=null,o),h.nodes().unlink(),Shiny.setInputValue("dataUpload-deleteData",Math.random())}function b(){const h=g();Shiny.setInputValue("modelForR",h)}let _;return n.$$set=h=>{"full"in h&&i(0,r=h.full)},n.$$.update=()=>{if(n.$$.dirty&5){let h=[{name:"New Model",action:u},{name:"Load Model",action:d},{name:"Load Data",action:Do},{name:"Load Model and Data",action:a},{name:"Download Model",action:c,disable:t.modelEmpty},{name:"Remove Data",action:p,disable:!t.dataAvail},{name:"Download Model and Data",disable:t.modelEmpty||!t.dataAvail,action:Ao,divider:!0},{name:"Save Changes For R",disable:t.modelEmpty||!t.dataAvail,action:b,divider:!0},{name:"Export Diagram to PNG",disable:t.modelEmpty,action:ko},{name:"Export Diagram to JPG",disable:t.modelEmpty,action:Co},{name:"Export Diagram to SVG",disable:t.modelEmpty,action:Eo},{name:"Export Diagram to PDF",disable:t.modelEmpty,action:pn}];r?i(1,_=h.filter(E=>!["Save Changes For R"].includes(E.name))):i(1,_=h.filter(E=>["Download Model","Load Model","Save Changes For R"].includes(E.name)||h.indexOf(E)>=h.length-4))}},[r,_,t]}class hn extends Z{constructor(e){super(),J(this,e,Oo,Mo,X,{full:0})}}function Fo(n){let e;return{c(){e=R("span"),k(e,"class","glyphicon glyphicon-ok check-mark invisible"),k(e,"aria-hidden","true")},m(i,t){D(i,e,t)},d(i){i&&A(e)}}}function xo(n){let e;return{c(){e=R("span"),k(e,"class","glyphicon glyphicon-ok check-mark"),k(e,"aria-hidden","true")},m(i,t){D(i,e,t)},d(i){i&&A(e)}}}function Io(n){let e,i,t,o,s,l,r,u,d;function a(c,p){return c[0]?xo:Fo}let f=a(n),g=f(n);return{c(){e=R("li"),i=R("label"),t=R("input"),o=I(),g.c(),s=I(),l=be(n[1]),k(t,"type","checkbox"),k(t,"class","check-box svelte-17cge7g"),t.disabled=n[2],k(i,"class",r=Te(n[2]?"disabled-label":"")+" svelte-17cge7g"),k(e,"class","svelte-17cge7g")},m(c,p){D(c,e,p),x(e,i),x(i,t),t.checked=n[0],x(i,o),g.m(i,null),x(i,s),x(i,l),u||(d=oe(t,"change",n[3]),u=!0)},p(c,[p]){p&4&&(t.disabled=c[2]),p&1&&(t.checked=c[0]),f!==(f=a(c))&&(g.d(1),g=f(c),g&&(g.c(),g.m(i,s))),p&2&&Pe(l,c[1]),p&4&&r!==(r=Te(c[2]?"disabled-label":"")+" svelte-17cge7g")&&k(i,"class",r)},i:ie,o:ie,d(c){c&&A(e),g.d(),u=!1,d()}}}function No(n,e,i){let{name:t}=e,{checked:o}=e,{disable:s=!1}=e;function l(){o=this.checked,i(0,o)}return n.$$set=r=>{"name"in r&&i(1,t=r.name),"checked"in r&&i(0,o=r.checked),"disable"in r&&i(2,s=r.disable)},[o,t,s,l]}class Ee extends Z{constructor(e){super(),J(this,e,No,Io,X,{name:1,checked:0,disable:2})}}function To(n){let e;return{c(){e=R("span"),k(e,"class","glyphicon glyphicon-ok check-mark invisible"),k(e,"aria-hidden","true")},m(i,t){D(i,e,t)},d(i){i&&A(e)}}}function Po(n){let e;return{c(){e=R("span"),k(e,"class","glyphicon glyphicon-ok check-mark"),k(e,"aria-hidden","true")},m(i,t){D(i,e,t)},d(i){i&&A(e)}}}function Vo(n){let e,i,t,o=!1,s,l,r,u,d,a,f,g;function c(_,h){return _[0]===_[2]?Po:To}let p=c(n),b=p(n);return a=Cn(n[5][0]),{c(){e=R("div"),i=R("label"),t=R("input"),s=I(),b.c(),l=I(),r=be(n[1]),k(t,"type","radio"),k(t,"name","meanStruc"),t.__value=n[2],t.value=t.__value,t.disabled=n[3],k(t,"class","svelte-lbhkwe"),k(i,"class",u=Te(n[3]?"text-muted":"")+" svelte-lbhkwe"),k(e,"class",d=Te(n[3]?"radio disabled":"radio")+" svelte-lbhkwe"),a.p(t)},m(_,h){D(_,e,h),x(e,i),x(i,t),t.checked=t.__value===n[0],x(i,s),b.m(i,null),x(i,l),x(i,r),f||(g=oe(t,"change",n[4]),f=!0)},p(_,[h]){h&4&&(t.__value=_[2],t.value=t.__value,o=!0),h&8&&(t.disabled=_[3]),(o||h&1)&&(t.checked=t.__value===_[0]),p!==(p=c(_))&&(b.d(1),b=p(_),b&&(b.c(),b.m(i,l))),h&2&&Pe(r,_[1]),h&8&&u!==(u=Te(_[3]?"text-muted":"")+" svelte-lbhkwe")&&k(i,"class",u),h&8&&d!==(d=Te(_[3]?"radio disabled":"radio")+" svelte-lbhkwe")&&k(e,"class",d)},i:ie,o:ie,d(_){_&&A(e),b.d(),a.r(),f=!1,g()}}}function Ro(n,e,i){let{name:t}=e,{value:o}=e,{group:s}=e,{isDisabled:l=!1}=e;const r=[[]];function u(){s=this.__value,i(0,s)}return n.$$set=d=>{"name"in d&&i(1,t=d.name),"value"in d&&i(2,o=d.value),"group"in d&&i(0,s=d.group),"isDisabled"in d&&i(3,l=d.isDisabled)},[s,t,o,l,u,r]}class tt extends Z{constructor(e){super(),J(this,e,Ro,Vo,X,{name:1,value:2,group:0,isDisabled:3})}}const Tt=[{name:"Arrows Created by Lavaan",modelSlot:"showLav"},{name:"Variance Arrows",modelSlot:"showVar"},{name:"Mean Arrows",modelSlot:"showMean"}];let Pt=[{name:"Estimate",value:"est"},{name:"Confidence Interval",value:"ci"},{name:"Estimate + p-value (stars)",value:"estPVal"},{name:"Estimate + Standard Error",value:"estSE"}];function zo(n,e,i){const t=W(Q),o=e?"_std":"",s=bn(n,o,i);t.style().selector("edge.hasEst").style({label:s}).update();const l=Uo(n,o,i);t.style().selector("edge.hasEst.label").style({label:l}).update();const r=qo(n,o,i);t.style().selector("edge.hasEstFixed").style({label:r}).update()}function Go(n,e,i,t){function o(a){return a.reduce((f,g,c)=>(g&&f.push(c),f),[])}const s=W(Q),l=[e,n,i],r=o(l),u=o(l.map(a=>!a));function d(a,f){return[c=>c.isLavaanAdded(),c=>c.isLoop(),c=>c.isMean()][a](f)}for(let a of r)s.elements(function(f){return d(a,f)}).show();for(let a of u)s.elements(function(f){return d(a,f)}).hide()}function Bo(n){return n===null?"NA":n<.001?"***":n<.01?"**":n<.05?"*":""}function bn(n,e,i){const t=o=>o===null?"NA":o.toFixed(i);switch(n){case"est":return o=>t(o.data("estimates")["est"+e]);case"ci":return o=>`[${t(o.data("estimates")["ciLow"+e])}, ${t(o.data("estimates")["ciHigh"+e])}]`;case"estPVal":return o=>`${t(o.data("estimates")["est"+e])}${Bo(o.data("estimates").p_value)}`;case"estSE":return o=>`${t(o.data("estimates")["est"+e])} (${t(o.data("estimates")["se"+e])})`;default:return()=>"NA"}}function Uo(n,e,i){const t=bn(n,e,i);return o=>`${o.data("label")} = ${t(o)}`}function qo(n,e,i){const t=o=>o===null?"NA":o.toFixed(i);return o=>"@"+t(o.data("estimates")["estFixed"+e])}function jo(n){let e,i,t,o,s,l;return{c(){e=R("li"),i=be(n[1]),t=I(),o=R("input"),_e(o,"width","4em"),k(o,"type","number"),k(o,"min",n[2]),_e(e,"padding-left","28px")},m(r,u){D(r,e,u),x(e,i),x(e,t),x(e,o),st(o,n[0]),s||(l=oe(o,"input",n[3]),s=!0)},p(r,[u]){u&2&&Pe(i,r[1]),u&4&&k(o,"min",r[2]),u&1&&at(o.value)!==r[0]&&st(o,r[0])},i:ie,o:ie,d(r){r&&A(e),s=!1,l()}}}function Ho(n,e,i){let{name:t}=e,{value:o}=e,{min:s}=e;function l(){o=at(this.value),i(0,o)}return n.$$set=r=>{"name"in r&&i(1,t=r.name),"value"in r&&i(0,o=r.value),"min"in r&&i(2,s=r.min)},[o,t,s,l]}class rt extends Z{constructor(e){super(),J(this,e,Ho,jo,X,{name:1,value:0,min:2})}}function Vt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Rt(n,e,i){const t=n.slice();return t[9]=e[i],t[12]=e,t[13]=i,t}function zt(n){let e,i,t,o;function s(u){n[3](u,n[9])}function l(u){n[4](u,n[9])}let r={disable:!1};return n[9].name!==void 0&&(r.name=n[9].name),n[1][n[9].modelSlot]!==void 0&&(r.checked=n[1][n[9].modelSlot]),e=new Ee({props:r}),le.push(()=>ae(e,"name",s)),le.push(()=>ae(e,"checked",l)),{c(){G(e.$$.fragment)},m(u,d){B(e,u,d),o=!0},p(u,d){n=u;const a={};!i&&d&4&&(i=!0,a.name=n[9].name,ue(()=>i=!1)),!t&&d&6&&(t=!0,a.checked=n[1][n[9].modelSlot],ue(()=>t=!1)),e.$set(a)},i(u){o||(S(e.$$.fragment,u),o=!0)},o(u){L(e.$$.fragment,u),o=!1},d(u){U(e,u)}}}function Gt(n){let e,i,t;function o(l){n[6](l)}let s={name:n[9].name,value:n[9].value};return n[1].view!==void 0&&(s.group=n[1].view),e=new tt({props:s}),le.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(l,r){B(e,l,r),t=!0},p(l,r){const u={};!i&&r&2&&(i=!0,u.group=l[1].view,ue(()=>i=!1)),e.$set(u)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Wo(n){let e,i,t,o,s,l,r,u,d,a,f,g,c,p,b,_,h,E,m,y,M=n[2],O=[];for(let C=0;C<M.length;C+=1)O[C]=zt(Rt(n,M,C));const w=C=>L(O[C],1,1,()=>{O[C]=null});function N(C){n[5](C)}let z={name:"Standardized Estimates",disable:!1};n[1].std!==void 0&&(z.checked=n[1].std),o=new Ee({props:z}),le.push(()=>ae(o,"checked",N));let $=Pt,v=[];for(let C=0;C<$.length;C+=1)v[C]=Gt(Vt(n,$,C));const Y=C=>L(v[C],1,1,()=>{v[C]=null});function ge(C){n[8](C)}let T={name:"Number Digits",min:0};return n[1].number_digits!==void 0&&(T.value=n[1].number_digits),_=new rt({props:T}),le.push(()=>ae(_,"value",ge)),{c(){for(let C=0;C<O.length;C+=1)O[C].c();e=I(),i=R("li"),t=I(),G(o.$$.fragment),l=I(),r=R("li"),u=I();for(let C=0;C<v.length;C+=1)v[C].c();d=I(),a=R("li"),f=I(),g=R("li"),c=be(`Confidence Level
    `),p=R("input"),b=I(),G(_.$$.fragment),k(i,"class","divider"),k(r,"class","divider"),k(a,"class","divider"),k(p,"type","number"),k(p,"min","0"),k(p,"max","0.999999"),k(p,"step","0.01"),_e(p,"width","4em"),_e(g,"padding-left","28px")},m(C,V){for(let F=0;F<O.length;F+=1)O[F]&&O[F].m(C,V);D(C,e,V),D(C,i,V),D(C,t,V),B(o,C,V),D(C,l,V),D(C,r,V),D(C,u,V);for(let F=0;F<v.length;F+=1)v[F]&&v[F].m(C,V);D(C,d,V),D(C,a,V),D(C,f,V),D(C,g,V),x(g,c),x(g,p),st(p,n[1].ci),D(C,b,V),B(_,C,V),E=!0,m||(y=oe(p,"input",n[7]),m=!0)},p(C,V){if(V&6){M=C[2];let K;for(K=0;K<M.length;K+=1){const P=Rt(C,M,K);O[K]?(O[K].p(P,V),S(O[K],1)):(O[K]=zt(P),O[K].c(),S(O[K],1),O[K].m(e.parentNode,e))}for(ve(),K=M.length;K<O.length;K+=1)w(K);ye()}const F={};if(!s&&V&2&&(s=!0,F.checked=C[1].std,ue(()=>s=!1)),o.$set(F),V&2){$=Pt;let K;for(K=0;K<$.length;K+=1){const P=Vt(C,$,K);v[K]?(v[K].p(P,V),S(v[K],1)):(v[K]=Gt(P),v[K].c(),S(v[K],1),v[K].m(d.parentNode,d))}for(ve(),K=$.length;K<v.length;K+=1)Y(K);ye()}V&2&&at(p.value)!==C[1].ci&&st(p,C[1].ci);const ce={};!h&&V&2&&(h=!0,ce.value=C[1].number_digits,ue(()=>h=!1)),_.$set(ce)},i(C){if(!E){for(let V=0;V<M.length;V+=1)S(O[V]);S(o.$$.fragment,C);for(let V=0;V<$.length;V+=1)S(v[V]);S(_.$$.fragment,C),E=!0}},o(C){O=O.filter(Boolean);for(let V=0;V<O.length;V+=1)L(O[V]);L(o.$$.fragment,C),v=v.filter(Boolean);for(let V=0;V<v.length;V+=1)L(v[V]);L(_.$$.fragment,C),E=!1},d(C){Oe(O,C),C&&A(e),C&&A(i),C&&A(t),U(o,C),C&&A(l),C&&A(r),C&&A(u),Oe(v,C),C&&A(d),C&&A(a),C&&A(f),C&&A(g),C&&A(b),U(_,C),m=!1,y()}}}function Yo(n){let e,i;return e=new Be({props:{name:"View",minimal:n[0],$$slots:{default:[Wo]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const s={};o&1&&(s.minimal=t[0]),o&16390&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function Zo(n,e,i){let t;ee(n,de,f=>i(1,t=f));let{minimal:o=!1}=e;function s(f,g){n.$$.not_equal(g.name,f)&&(g.name=f,i(2,Tt))}function l(f,g){n.$$.not_equal(t[g.modelSlot],f)&&(t[g.modelSlot]=f,de.set(t))}function r(f){n.$$.not_equal(t.std,f)&&(t.std=f,de.set(t))}function u(f){n.$$.not_equal(t.view,f)&&(t.view=f,de.set(t))}function d(){t.ci=at(this.value),de.set(t)}function a(f){n.$$.not_equal(t.number_digits,f)&&(t.number_digits=f,de.set(t))}return n.$$set=f=>{"minimal"in f&&i(0,o=f.minimal)},n.$$.update=()=>{n.$$.dirty&2&&Shiny.setInputValue("ests-confindence_level",t.ci)},[o,t,Tt,s,l,r,u,d,a]}class _n extends Z{constructor(e){super(),J(this,e,Zo,Yo,X,{minimal:0})}}function Bt(n,e,i){const t=n.slice();return t[8]=e[i],t}function Ut(n){let e,i,t;function o(l){n[3](l)}let s={name:n[8].name,value:n[8].value};return n[0].meanStruc!==void 0&&(s.group=n[0].meanStruc),e=new tt({props:s}),le.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(l,r){B(e,l,r),t=!0},p(l,r){const u={};!i&&r&1&&(i=!0,u.group=l[0].meanStruc,ue(()=>i=!1)),e.$set(u)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Jo(n){let e,i,t,o,s,l,r,u,d,a,f,g,c,p=n[2],b=[];for(let w=0;w<p.length;w+=1)b[w]=Ut(Bt(n,p,w));const _=w=>L(b[w],1,1,()=>{b[w]=null});function h(w){n[4](w)}function E(w){n[5](w)}let m={name:"Add Intercepts for all Observed Variables"};n[0].intOvFree!==void 0&&(m.checked=n[0].intOvFree),n[1]!==void 0&&(m.disable=n[1]),l=new Ee({props:m}),le.push(()=>ae(l,"checked",h)),le.push(()=>ae(l,"disable",E));function y(w){n[6](w)}function M(w){n[7](w)}let O={name:"Add Intercepts for all Latent Variables"};return n[0].intLvFree!==void 0&&(O.checked=n[0].intLvFree),n[1]!==void 0&&(O.disable=n[1]),a=new Ee({props:O}),le.push(()=>ae(a,"checked",y)),le.push(()=>ae(a,"disable",M)),{c(){e=R("li"),i=R("a"),i.textContent="Model Means?",t=I(),o=R("ul");for(let w=0;w<b.length;w+=1)b[w].c();s=I(),G(l.$$.fragment),d=I(),G(a.$$.fragment),k(i,"tabindex","-1"),k(i,"href","#"),k(i,"class","svelte-143y7r6"),k(o,"class","dropdown-menu svelte-143y7r6"),k(e,"class","dropdown-submenu svelte-143y7r6")},m(w,N){D(w,e,N),x(e,i),x(e,t),x(e,o);for(let z=0;z<b.length;z+=1)b[z]&&b[z].m(o,null);D(w,s,N),B(l,w,N),D(w,d,N),B(a,w,N),c=!0},p(w,N){if(N&5){p=w[2];let v;for(v=0;v<p.length;v+=1){const Y=Bt(w,p,v);b[v]?(b[v].p(Y,N),S(b[v],1)):(b[v]=Ut(Y),b[v].c(),S(b[v],1),b[v].m(o,null))}for(ve(),v=p.length;v<b.length;v+=1)_(v);ye()}const z={};!r&&N&1&&(r=!0,z.checked=w[0].intOvFree,ue(()=>r=!1)),!u&&N&2&&(u=!0,z.disable=w[1],ue(()=>u=!1)),l.$set(z);const $={};!f&&N&1&&(f=!0,$.checked=w[0].intLvFree,ue(()=>f=!1)),!g&&N&2&&(g=!0,$.disable=w[1],ue(()=>g=!1)),a.$set($)},i(w){if(!c){for(let N=0;N<p.length;N+=1)S(b[N]);S(l.$$.fragment,w),S(a.$$.fragment,w),c=!0}},o(w){b=b.filter(Boolean);for(let N=0;N<b.length;N+=1)L(b[N]);L(l.$$.fragment,w),L(a.$$.fragment,w),c=!1},d(w){w&&A(e),Oe(b,w),w&&A(s),U(l,w),w&&A(d),U(a,w)}}}function Xo(n){let e,i;return e=new Be({props:{name:Ko,$$slots:{default:[Jo]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const s={};o&2051&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}let Ko="Mean Options";function Qo(n,e,i){let t,o;ee(n,te,f=>i(0,o=f));let s=[{name:"Automatic",value:"default"},{name:"Yes",value:"true"},{name:"No",value:"false"}];function l(f){n.$$.not_equal(o.meanStruc,f)&&(o.meanStruc=f,te.set(o))}function r(f){n.$$.not_equal(o.intOvFree,f)&&(o.intOvFree=f,te.set(o))}function u(f){t=f,i(1,t),i(0,o)}function d(f){n.$$.not_equal(o.intLvFree,f)&&(o.intLvFree=f,te.set(o))}function a(f){t=f,i(1,t),i(0,o)}return n.$$.update=()=>{n.$$.dirty&1&&i(1,t=o.meanStruc==="false")},[o,t,s,l,r,u,d,a]}class ei extends Z{constructor(e){super(),J(this,e,Qo,Xo,X,{})}}function qt(n,e,i){const t=n.slice();return t[9]=e[i],t}function jt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Ht(n,e,i){const t=n.slice();return t[9]=e[i],t}function Wt(n){let e,i,t;function o(l){n[4](l)}let s={name:n[9].name,value:n[9].value};return n[0].estimator!==void 0&&(s.group=n[0].estimator),e=new tt({props:s}),le.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(l,r){B(e,l,r),t=!0},p(l,r){const u={};!i&&r&1&&(i=!0,u.group=l[0].estimator,ue(()=>i=!1)),e.$set(u)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Yt(n){let e,i,t;function o(l){n[5](l)}let s={name:n[9].name,value:n[9].value};return n[0].se!==void 0&&(s.group=n[0].se),e=new tt({props:s}),le.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(l,r){B(e,l,r),t=!0},p(l,r){const u={};!i&&r&1&&(i=!0,u.group=l[0].se,ue(()=>i=!1)),e.$set(u)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Zt(n){let e,i,t;function o(l){n[7](l)}let s={name:n[9].name,value:n[9].value};return n[0].missing!==void 0&&(s.group=n[0].missing),e=new tt({props:s}),le.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(l,r){B(e,l,r),t=!0},p(l,r){const u={};!i&&r&1&&(i=!0,u.group=l[0].missing,ue(()=>i=!1)),e.$set(u)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function ti(n){let e,i,t,o,s,l,r,u,d,a,f,g,c,p,b,_,h,E,m=n[1],y=[];for(let T=0;T<m.length;T+=1)y[T]=Wt(Ht(n,m,T));const M=T=>L(y[T],1,1,()=>{y[T]=null});let O=n[2],w=[];for(let T=0;T<O.length;T+=1)w[T]=Yt(jt(n,O,T));const N=T=>L(w[T],1,1,()=>{w[T]=null});function z(T){n[6](T)}let $={name:"Number of Bootstrap Samples:",min:5};n[0].n_boot!==void 0&&($.value=n[0].n_boot),f=new rt({props:$}),le.push(()=>ae(f,"value",z));let v=n[3],Y=[];for(let T=0;T<v.length;T+=1)Y[T]=Zt(qt(n,v,T));const ge=T=>L(Y[T],1,1,()=>{Y[T]=null});return{c(){e=R("li"),i=R("a"),i.textContent="Estimator",t=I(),o=R("ul");for(let T=0;T<y.length;T+=1)y[T].c();s=I(),l=R("li"),r=R("a"),r.textContent="Standard Error",u=I(),d=R("ul");for(let T=0;T<w.length;T+=1)w[T].c();a=I(),G(f.$$.fragment),c=I(),p=R("li"),b=R("a"),b.textContent="Missing Values",_=I(),h=R("ul");for(let T=0;T<Y.length;T+=1)Y[T].c();k(i,"tabindex","-1"),k(i,"href","#"),k(i,"class","svelte-143y7r6"),k(o,"class","dropdown-menu svelte-143y7r6"),k(e,"class","dropdown-submenu svelte-143y7r6"),k(r,"tabindex","-1"),k(r,"href","#"),k(r,"class","svelte-143y7r6"),k(d,"class","dropdown-menu svelte-143y7r6"),k(l,"class","dropdown-submenu svelte-143y7r6"),k(b,"tabindex","-1"),k(b,"href","#"),k(b,"class","svelte-143y7r6"),k(h,"class","dropdown-menu svelte-143y7r6"),k(p,"class","dropdown-submenu svelte-143y7r6")},m(T,C){D(T,e,C),x(e,i),x(e,t),x(e,o);for(let V=0;V<y.length;V+=1)y[V]&&y[V].m(o,null);D(T,s,C),D(T,l,C),x(l,r),x(l,u),x(l,d);for(let V=0;V<w.length;V+=1)w[V]&&w[V].m(d,null);x(d,a),B(f,d,null),D(T,c,C),D(T,p,C),x(p,b),x(p,_),x(p,h);for(let V=0;V<Y.length;V+=1)Y[V]&&Y[V].m(h,null);E=!0},p(T,C){if(C&3){m=T[1];let F;for(F=0;F<m.length;F+=1){const ce=Ht(T,m,F);y[F]?(y[F].p(ce,C),S(y[F],1)):(y[F]=Wt(ce),y[F].c(),S(y[F],1),y[F].m(o,null))}for(ve(),F=m.length;F<y.length;F+=1)M(F);ye()}if(C&5){O=T[2];let F;for(F=0;F<O.length;F+=1){const ce=jt(T,O,F);w[F]?(w[F].p(ce,C),S(w[F],1)):(w[F]=Yt(ce),w[F].c(),S(w[F],1),w[F].m(d,a))}for(ve(),F=O.length;F<w.length;F+=1)N(F);ye()}const V={};if(!g&&C&1&&(g=!0,V.value=T[0].n_boot,ue(()=>g=!1)),f.$set(V),C&9){v=T[3];let F;for(F=0;F<v.length;F+=1){const ce=qt(T,v,F);Y[F]?(Y[F].p(ce,C),S(Y[F],1)):(Y[F]=Zt(ce),Y[F].c(),S(Y[F],1),Y[F].m(h,null))}for(ve(),F=v.length;F<Y.length;F+=1)ge(F);ye()}},i(T){if(!E){for(let C=0;C<m.length;C+=1)S(y[C]);for(let C=0;C<O.length;C+=1)S(w[C]);S(f.$$.fragment,T);for(let C=0;C<v.length;C+=1)S(Y[C]);E=!0}},o(T){y=y.filter(Boolean);for(let C=0;C<y.length;C+=1)L(y[C]);w=w.filter(Boolean);for(let C=0;C<w.length;C+=1)L(w[C]);L(f.$$.fragment,T),Y=Y.filter(Boolean);for(let C=0;C<Y.length;C+=1)L(Y[C]);E=!1},d(T){T&&A(e),Oe(y,T),T&&A(s),T&&A(l),Oe(w,T),U(f),T&&A(c),T&&A(p),Oe(Y,T)}}}function ni(n){let e,i;return e=new Be({props:{name:oi,$$slots:{default:[ti]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const s={};o&65537&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}const oi="Estimation";function ii(n,e,i){let t;ee(n,te,f=>i(0,t=f));const o=[{value:"default",name:"Default"},{value:"ML",name:"Maximum Likelihood (ML)"},{value:"GLS",name:"Generalized Least Squares (GLS)"},{value:"WLS",name:"Weighted Least Squares (WLS)"},{value:"ULS",name:"Unweighted Least Squares (ULS)"},{value:"DLS",name:"Distributionally-weighted Least Squares (DLW)"}],s=[{value:"default",name:"Default"},{value:"robust",name:"Robust"},{value:"boot",name:"Bootstrap"}],l=[{value:"listwise",name:"Listwise"},{value:"ml",name:"Full Information Maximum Likelihood (FIML)"}];function r(f){n.$$.not_equal(t.estimator,f)&&(t.estimator=f,te.set(t))}function u(f){n.$$.not_equal(t.se,f)&&(t.se=f,te.set(t))}function d(f){n.$$.not_equal(t.n_boot,f)&&(t.n_boot=f,te.set(t))}function a(f){n.$$.not_equal(t.missing,f)&&(t.missing=f,te.set(t))}return[t,o,s,l,r,u,d,a]}class si extends Z{constructor(e){super(),J(this,e,ii,ni,X,{})}}let ct=0,$n=!1;function vn(){return typeof Shiny=="object"&&Shiny!==null}function li(n){const e=Object.keys(n),i=n[e[0]].length,t=[];for(let o=0;o<i;o++){const s={};for(const l of e)s[l]=n[l][o];t.push(s)}return t}function pt(n,e=!0){$n=e,ct=ct+1;let i=dn(!0);i.name=n,i.counter=ct,vn()&&Shiny.setInputValue("layout-layout",JSON.stringify(i))}vn()&&Shiny.addCustomMessageHandler("semPlotLayout",function(n){n=li(n);const e=125,i=200;let t=1/0,o=1/0;for(let d=0;d<n.length;d++)for(let a=d+1;a<n.length;a++){const f=Math.abs(n[d].x-n[a].x),g=Math.abs(n[d].y-n[a].y);f<t&&n[d].y===n[a].y&&(t=f),g<o&&n[d].x===n[a].x&&(o=g)}const s=e/t,l=i/o;let r={};n.forEach(d=>{const a=d.x*s+400,f=d.y*-1*l+400;r[d.name]={x:a,y:f}});let u={name:"preset",positions:function(d){const a=d.data("label");return r[a]},fit:!0,padding:60,animate:!0};$n?W(Re).do("layout",{options:u}):W(Q).layout(u).run()});function ri(n){let e,i;return e=new ht({props:{name:"Apply Layout",menuItems:n[1],minimal:n[0]}}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const s={};o&2&&(s.menuItems=t[1]),o&1&&(s.minimal=t[0]),e.$set(s)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function ai(n,e,i){let t,o,s;ee(n,j,g=>i(2,o=g)),ee(n,Re,g=>i(3,s=g));let{minimal:l=!1}=e;W(Q),we(()=>{q.use(An),q.use(On),q.use(Fn)});function r(){const g={name:"dagre",rankSep:150,animate:!0};s.do("layout",{options:g})}function u(){const g={name:"breadthfirst",animate:!0,spacingFactor:1};s.do("layout",{options:g})}function d(){const g={name:"circle",animate:!0};s.do("layout",{options:g})}function a(){const g={name:"fcose",animate:!0,idealEdgeLength:c=>150,quality:"proof",randomize:!1,nodeSeparation:200};s.do("layout",{options:g})}function f(){const g={name:"cola",animate:!0,nodeSpacing(c){return 50}};s.do("layout",{options:g})}return n.$$set=g=>{"minimal"in g&&i(0,l=g.minimal)},n.$$.update=()=>{n.$$.dirty&4&&i(1,t=[{name:"Recommended: Tree",action:()=>pt("tree"),disable:o.modelEmpty},{name:"Recommended: Tree2",action:()=>pt("tree2"),disable:o.modelEmpty},{name:"Experimental: Tree",action:r,disable:o.modelEmpty},{name:"Experimental: Tree2",action:u,disable:o.modelEmpty},{name:"Experimental: Circle",action:d,disable:o.modelEmpty},{name:"Experimental: Force-directed",action:a,disable:o.modelEmpty},{name:"Experimental: Cola",action:f,disable:o.modelEmpty}])},[l,t,o]}class yn extends Z{constructor(e){super(),J(this,e,ai,ri,X,{minimal:0})}}function Jt(n,e,i){const t=n.slice();return t[4]=e[i],t[5]=e,t[6]=i,t}function Xt(n){let e,i,t,o;function s(u){n[2](u,n[4])}function l(u){n[3](u,n[4])}let r={};return n[4].name!==void 0&&(r.name=n[4].name),n[1][n[4].modelProperty]!==void 0&&(r.checked=n[1][n[4].modelProperty]),e=new Ee({props:r}),le.push(()=>ae(e,"name",s)),le.push(()=>ae(e,"checked",l)),{c(){G(e.$$.fragment)},m(u,d){B(e,u,d),o=!0},p(u,d){n=u;const a={};!i&&d&1&&(i=!0,a.name=n[4].name,ue(()=>i=!1)),!t&&d&3&&(t=!0,a.checked=n[1][n[4].modelProperty],ue(()=>t=!1)),e.$set(a)},i(u){o||(S(e.$$.fragment,u),o=!0)},o(u){L(e.$$.fragment,u),o=!1},d(u){U(e,u)}}}function ui(n){let e,i,t=n[0],o=[];for(let l=0;l<t.length;l+=1)o[l]=Xt(Jt(n,t,l));const s=l=>L(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=Ge()},m(l,r){for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(l,r);D(l,e,r),i=!0},p(l,r){if(r&3){t=l[0];let u;for(u=0;u<t.length;u+=1){const d=Jt(l,t,u);o[u]?(o[u].p(d,r),S(o[u],1)):(o[u]=Xt(d),o[u].c(),S(o[u],1),o[u].m(e.parentNode,e))}for(ve(),u=t.length;u<o.length;u+=1)s(u);ye()}},i(l){if(!i){for(let r=0;r<t.length;r+=1)S(o[r]);i=!0}},o(l){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)L(o[r]);i=!1},d(l){Oe(o,l),l&&A(e)}}}function di(n){let e,i;return e=new Be({props:{name:ci,$$slots:{default:[ui]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const s={};o&131&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}const ci="Automatically..";function fi(n,e,i){let t;ee(n,te,r=>i(1,t=r));const o=[{name:"Fix Factor Loading of First Indicator at 1",modelProperty:"fix_first"},{name:"Include Variances",modelProperty:"auto_var"},{name:"Include Covariances of Exogenous Latent Variables",modelProperty:"auto_cov_lv_x"},{name:"Include Covariances of Dependent Variables",modelProperty:"auto_cov_y"},{name:"Fix Variance of Only Indicator to 0",modelProperty:"fix_single"},{name:"Treat Exogenous Observed Variables as Fixed Variables",modelProperty:"fixed_x"}];function s(r,u){n.$$.not_equal(u.name,r)&&(u.name=r,i(0,o))}function l(r,u){n.$$.not_equal(t[u.modelProperty],r)&&(t[u.modelProperty]=r,te.set(t))}return[o,t,s,l]}class mi extends Z{constructor(e){super(),J(this,e,fi,di,X,{})}}function gi(n){let e,i;return e=new ht({props:{name:"Help",menuItems:n[0]}}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p:ie,i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function pi(){Shiny.setInputValue("show_help",Math.random())}function hi(){window.open("https://karchjd.github.io/docs.lavaangui/","_blank")}function bi(n){let e;const i=[{name:"Show Commands",action:pi},{name:"Open Manual",action:hi},{name:"About",action:t}];function t(){bootbox.alert({title:"About Lavaangui",message:`Version: ${e}<br> Autor: Julian D. Karch<br> Email: j.d.karch@fsw.leidenuniv.nl`})}return Shiny.addCustomMessageHandler("version",function(o){e=o[0].join(".")}),[i]}class _i extends Z{constructor(e){super(),J(this,e,bi,gi,X,{})}}function $i(n){let e,i,t,o,s,l,r,u,d,a,f,g,c,p,b,_,h,E,m,y,M;function O(P){n[2](P)}let w={name:"Show Grid"};n[1].gridShow!==void 0&&(w.checked=n[1].gridShow),e=new Ee({props:w}),le.push(()=>ae(e,"checked",O));function N(P){n[3](P)}let z={name:"Snap to Grid"};n[1].gridSnap!==void 0&&(z.checked=n[1].gridSnap),o=new Ee({props:z}),le.push(()=>ae(o,"checked",N));function $(P){n[4](P)}let v={name:"Resize to Grid"};n[1].gridResize!==void 0&&(v.checked=n[1].gridResize),r=new Ee({props:v}),le.push(()=>ae(r,"checked",$));function Y(P){n[5](P)}let ge={name:"Snap to Alignment on Release"};n[1].gridAlign!==void 0&&(ge.checked=n[1].gridAlign),a=new Ee({props:ge}),le.push(()=>ae(a,"checked",Y));function T(P){n[6](P)}let C={name:"Move Grid on Pan"};n[1].gridMovePan!==void 0&&(C.checked=n[1].gridMovePan),c=new Ee({props:C}),le.push(()=>ae(c,"checked",T));function V(P){n[7](P)}let F={name:"Grid Spacing:",min:5};n[1].gridSpace!==void 0&&(F.value=n[1].gridSpace),_=new rt({props:F}),le.push(()=>ae(_,"value",V));function ce(P){n[8](P)}let K={name:"Line Width:",min:0};return n[1].gridWidth!==void 0&&(K.value=n[1].gridWidth),m=new rt({props:K}),le.push(()=>ae(m,"value",ce)),{c(){G(e.$$.fragment),t=I(),G(o.$$.fragment),l=I(),G(r.$$.fragment),d=I(),G(a.$$.fragment),g=I(),G(c.$$.fragment),b=I(),G(_.$$.fragment),E=I(),G(m.$$.fragment)},m(P,ne){B(e,P,ne),D(P,t,ne),B(o,P,ne),D(P,l,ne),B(r,P,ne),D(P,d,ne),B(a,P,ne),D(P,g,ne),B(c,P,ne),D(P,b,ne),B(_,P,ne),D(P,E,ne),B(m,P,ne),M=!0},p(P,ne){const nt={};!i&&ne&2&&(i=!0,nt.checked=P[1].gridShow,ue(()=>i=!1)),e.$set(nt);const Ue={};!s&&ne&2&&(s=!0,Ue.checked=P[1].gridSnap,ue(()=>s=!1)),o.$set(Ue);const _t={};!u&&ne&2&&(u=!0,_t.checked=P[1].gridResize,ue(()=>u=!1)),r.$set(_t);const $t={};!f&&ne&2&&(f=!0,$t.checked=P[1].gridAlign,ue(()=>f=!1)),a.$set($t);const vt={};!p&&ne&2&&(p=!0,vt.checked=P[1].gridMovePan,ue(()=>p=!1)),c.$set(vt);const yt={};!h&&ne&2&&(h=!0,yt.value=P[1].gridSpace,ue(()=>h=!1)),_.$set(yt);const wt={};!y&&ne&2&&(y=!0,wt.value=P[1].gridWidth,ue(()=>y=!1)),m.$set(wt)},i(P){M||(S(e.$$.fragment,P),S(o.$$.fragment,P),S(r.$$.fragment,P),S(a.$$.fragment,P),S(c.$$.fragment,P),S(_.$$.fragment,P),S(m.$$.fragment,P),M=!0)},o(P){L(e.$$.fragment,P),L(o.$$.fragment,P),L(r.$$.fragment,P),L(a.$$.fragment,P),L(c.$$.fragment,P),L(_.$$.fragment,P),L(m.$$.fragment,P),M=!1},d(P){U(e,P),P&&A(t),U(o,P),P&&A(l),U(r,P),P&&A(d),U(a,P),P&&A(g),U(c,P),P&&A(b),U(_,P),P&&A(E),U(m,P)}}}function vi(n){let e,i;return e=new Be({props:{minimal:n[0],name:"Grid Options",$$slots:{default:[$i]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const s={};o&1&&(s.minimal=t[0]),o&514&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function yi(n,e,i){let t;ee(n,de,g=>i(1,t=g));let{minimal:o=!1}=e;function s(g){n.$$.not_equal(t.gridShow,g)&&(t.gridShow=g,de.set(t))}function l(g){n.$$.not_equal(t.gridSnap,g)&&(t.gridSnap=g,de.set(t))}function r(g){n.$$.not_equal(t.gridResize,g)&&(t.gridResize=g,de.set(t))}function u(g){n.$$.not_equal(t.gridAlign,g)&&(t.gridAlign=g,de.set(t))}function d(g){n.$$.not_equal(t.gridMovePan,g)&&(t.gridMovePan=g,de.set(t))}function a(g){n.$$.not_equal(t.gridSpace,g)&&(t.gridSpace=g,de.set(t))}function f(g){n.$$.not_equal(t.gridWidth,g)&&(t.gridWidth=g,de.set(t))}return n.$$set=g=>{"minimal"in g&&i(0,o=g.minimal)},[o,t,s,l,r,u,d,a,f]}class wn extends Z{constructor(e){super(),J(this,e,yi,vi,X,{minimal:0})}}function wi(n){return window.$(document).ready(function(){var e=!1;window.$(".navbar .dropdown").hover(function(){e&&(window.$(".navbar .dropdown").removeClass("open"),window.$(this).addClass("open"))},function(){}),window.$(".navbar .dropdown").on("show.bs.dropdown",function(){e=!0}),window.$(".navbar .dropdown").on("hide.bs.dropdown",function(){window.$(".navbar .dropdown.open").length<=1&&(e=!1)})}),[]}class ki extends Z{constructor(e){super(),J(this,e,wi,null,X,{})}}function Ci(n){let e,i,t,o,s,l,r,u,d,a,f,g,c,p,b,_,h,E;return e=new hn({}),t=new _n({}),s=new ei({}),r=new mi({}),d=new si({}),f=new yn({}),c=new wn({}),b=new _i({}),h=new ki({}),{c(){G(e.$$.fragment),i=I(),G(t.$$.fragment),o=I(),G(s.$$.fragment),l=I(),G(r.$$.fragment),u=I(),G(d.$$.fragment),a=I(),G(f.$$.fragment),g=I(),G(c.$$.fragment),p=I(),G(b.$$.fragment),_=I(),G(h.$$.fragment)},m(m,y){B(e,m,y),D(m,i,y),B(t,m,y),D(m,o,y),B(s,m,y),D(m,l,y),B(r,m,y),D(m,u,y),B(d,m,y),D(m,a,y),B(f,m,y),D(m,g,y),B(c,m,y),D(m,p,y),B(b,m,y),D(m,_,y),B(h,m,y),E=!0},i(m){E||(S(e.$$.fragment,m),S(t.$$.fragment,m),S(s.$$.fragment,m),S(r.$$.fragment,m),S(d.$$.fragment,m),S(f.$$.fragment,m),S(c.$$.fragment,m),S(b.$$.fragment,m),S(h.$$.fragment,m),E=!0)},o(m){L(e.$$.fragment,m),L(t.$$.fragment,m),L(s.$$.fragment,m),L(r.$$.fragment,m),L(d.$$.fragment,m),L(f.$$.fragment,m),L(c.$$.fragment,m),L(b.$$.fragment,m),L(h.$$.fragment,m),E=!1},d(m){U(e,m),m&&A(i),U(t,m),m&&A(o),U(s,m),m&&A(l),U(r,m),m&&A(u),U(d,m),m&&A(a),U(f,m),m&&A(g),U(c,m),m&&A(p),U(b,m),m&&A(_),U(h,m)}}}function Ei(n){let e,i;return e=new ho({props:{$$slots:{default:[Ci]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}class Si extends Z{constructor(e){super(),J(this,e,null,Ei,X,{})}}function Li(n){let e;return{c(){e=R("pre"),k(e,"id","res-results"),k(e,"class","shiny-html-output well svelte-74yvxb"),k(e,"data-testid","result-text")},m(i,t){D(i,e,t)},p:ie,i:ie,o:ie,d(i){i&&A(e)}}}class Mi extends Z{constructor(e){super(),J(this,e,null,Li,X,{})}}function Di(n){return window.cy=W(Q),j.subscribe(e=>{window.appState=e}),te.subscribe(e=>{window.modelOptions=e}),mt.subscribe(e=>{window.dataInfo=e}),Ae.subscribe(e=>{window.fitCache=e}),de.subscribe(e=>{window.gridViewOptions=e}),[]}class Ai extends Z{constructor(e){super(),J(this,e,Di,null,X,{})}}function Oi(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function Kt(n){return n==""?(bootbox.alert("Provide a label"),!1):Oi(n)?!0:(bootbox.alert("Provide a valid label"),!1)}function Fi(n,e){const i=e?"full":"minimal";return n.filter(t=>t.show===i||t.show==="both")}function xi(n,e,i){let t,o,s;ee(n,j,c=>i(1,t=c)),ee(n,Re,c=>i(2,o=c)),ee(n,te,c=>i(3,s=c));let l=W(Q);q.use(xn);var r=new In.ColorPicker("#picker",{width:200,color:"rgb(255, 0, 0)",borderWidth:1,borderColor:"#fff"});function u(c,p){var b;const _=l.$(":selected");if(_.length>1){if(p==="nodes"&&!_.every(h=>h.isNode()))return bootbox.alert("Not all selected elements are nodes. Aborting"),null;if(p==="edges"&&!_.every(h=>h.isEdge()))return bootbox.alert("Not all selected elements are edges. Aborting"),null;if(p==="nodes.edges"&&!_.every(h=>h.isEdge()||h.isNode()))return bootbox.alert("Not all selected elements are nodes or edges. Aborting"),null;b=_}else b=c;return b}const d=[{id:"add-observed",content:"Add Observed Variable",coreAsWell:!0,onClickFunction(c){const p=c.renderedPosition;pe(re,p)},show:"full"},{id:"add-latent",content:"Add Latent Variable",coreAsWell:!0,onClickFunction(c){const p=c.renderedPosition;pe(fe,p)},show:"full"},{id:"add-constant",content:"Add Constant Variable",coreAsWell:!0,onClickFunction(c){const p=c.renderedPosition;pe(Se,p)},show:"full"},{id:"label-para",content:"Add/Change Label",selector:`edge.${me}`,onClickFunction(c){const p=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Label",value:p.getLabel(),callback(b){if(!Kt(b))return!1;b!==p.getLabel()&&b!==null&&(p.addLabel(b),se(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"label-remove",content:"Remove Label",selector:`edge.${Ve}`,onClickFunction(c){(c.target||c.cyTarget).removeLabel(),se(s.mode)},show:"both",hasTrailingDivider:!1},{id:"remove-edge",content:"Delete Edge",selector:`edge.${me}`,onClickFunction(c){(c.target||c.cyTarget).remove(),se(s.mode)},show:"full",hasTrailingDivider:!0},{id:"fix-para",content:"Fix Parameter",selector:`edge.${ke}.${me}, edge.${Me}.${me}`,onClickFunction(c){const p=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Value",inputType:"number",callback(b){if(b=="")return bootbox.alert("Provide a value"),!1;b!==null&&(p.fixPara(b),se(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"free-para",content:"Free Parameter",selector:`edge.${Ce}.${me}, edge.${Me}.${me}`,onClickFunction(c){var p=c.target||c.cyTarget;p.freePara(),se(s.mode)},show:"full",hasTrailingDivider:!1},{id:"free-force-para",content:"Force Parameter Free",selector:`edge.${ke}.${me}, edge.${Ce}.${me}`,onClickFunction(c){(c.target||c.cyTarget).forceFreePara(),se(s.mode)},show:"full",hasTrailingDivider:!0},{id:"revert-arrow",content:"Revert Direction",selector:`edge[isMean="0"].${Fe}.${me}`,onClickFunction(c){(c.target||c.cyTarget).revert(),se(s.mode)},show:"full",hasTrailingDivider:!1},{id:"set-undirected",content:"Set Undirected",selector:`edge[isMean="0"].${Fe}.${me}`,onClickFunction(c){(c.target||c.cyTarget).setUndirected(),se(s.mode)},show:"full",hasTrailingDivider:!0},{id:"set-arrow",content:"Set Directed",selector:`edge.${xe}.${me}`,onClickFunction(c){(c.target||c.cyTarget).setDirected(),se(s.mode)},show:"full",hasTrailingDivider:!0},{id:"free-orientation",content:"Free Loop Orientation",selector:`edge.${lt}.fixDeg`,onClickFunction(c){const p=c.target||c.cyTarget;p.removeClass("fixDeg"),$e(p.source().id())},show:"both",hasTrailingDivider:!0},{id:"change-fromUser",content:"Explicitly Include in Model",selector:`edge.${De}`,onClickFunction(c){(c.target||c.cyTarget).markAddedUser(),se(s.mode)},show:"full",hasTrailingDivider:!0},{id:"color-edge",content:"Change Edge Color",selector:"edge",show:"both",onClickFunction(c){var p=c.target||c.cyTarget;const b=u(p,"edges");if(b===null)return null;f(p,b,"edge")}},{id:"change-line-width",content:"Change Line Width",show:"both",selector:"edge",onClickFunction(c){var p=c.target||c.cyTarget;const b=u(p,"edges");if(b===null)return null;bootbox.prompt({title:"Enter New Line Width:",value:p.style("width"),callback(_){_!==null&&o.do("style",{eles:b,style:{width:_}})}})}},{id:"rename-node",show:"full",content:"Rename Variable",selector:`node.${fe}, node.${re}`,onClickFunction(c){const p=c.target||c.cyTarget,b=t.columnNames;let _;t.dataAvail&&(_=b.map(E=>`<option value="${E}">${E}</option>`).join(""));const h=t.dataAvail&&p.isObserved()?`
      <label>Or Select From Variables in Your Data:</label>
      <select class="form-control" id="label-dropdown">
        <option value="">--Select--</option>
        ${_}
      </select>
    `:"";bootbox.dialog({title:"Rename Variable",message:`
      <div>
        <label>Enter a label:</label>
        <input type="text" class="form-control" id="new-label" value=${p.getLabel()}>
        ${h}
      </div>
    `,buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Rename",className:"btn-primary",callback(){let E=document.getElementById("new-label").value;const m=t.dataAvail&&p.isObserved()?document.getElementById("label-dropdown").value:"";let y;if(E==p.getLabel()?y=m:y=E,!Kt(y))return!1;y&&(p.setLabel(y),b&&b.includes(p.getLabel())?(p.link(),he("success",`Variable ${p.data("label")} linked to data`)):p.isLinked()&&(p.unlink(),he("info",`Variable ${p.getLabel()} unlinked`)),se(s.mode))}}},onShown(E){document.getElementById("new-label").addEventListener("keypress",function(m){m.key==="Enter"&&(m.preventDefault(),E.target.querySelector(".btn-primary").click())})}})}},{id:"remove-node",content:"Delete Variable",selector:`node.${fe}, node.${re}, node.${Se}`,onClickFunction(c){(c.target||c.cyTarget).remove(),se(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-latent",content:"Change to Latent",selector:`node.${re}`,onClickFunction(c){(c.target||c.cyTarget).makeLatent(),se(s.mode)},show:"full",hasTrailingDivider:!1},{id:"change-ordered",content:"Change to Ordered",selector:`node.${re}.${Ze}`,onClickFunction(c){(c.target||c.cyTarget).makeOrdered(),se(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-continous",content:"Change to Continous",selector:`node.${re}.${Ye}`,onClickFunction(c){(c.target||c.cyTarget).makeContinous(),se(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-observed",show:"full",content:"Change to Observed",selector:`node.${fe}`,hasTrailingDivider:!0,onClickFunction(c){const p=c.target||c.cyTarget;p.makeObserved();let b=t.columnNames;b&&b.includes(p.getLabel())&&(p.link(),bootbox.alert("Variable linked with data set")),se(s.mode)}},{id:"color-node",content:"Change Background Color",selector:"node",show:"both",onClickFunction(c){var p=c.target||c.cyTarget;const b=u(p,"nodes");if(b===null)return null;f(p,b,"nodes")}},{id:"change-border-width",content:"Change Border Width",show:"both",selector:`node.${fe}, node.${re}, node.${Se}`,onClickFunction(c){var p=c.target||c.cyTarget;const b=u(p,"nodes");if(b===null)return null;bootbox.prompt({title:"Enter New Border Width:",value:p.style("border-width"),callback(_){_!==null&&o.do("style",{eles:b,style:{"border-width":_}})}})}},{id:"change-font-size",content:"Change Font Size",show:"both",hasTrailingDivider:!0,selector:`node.${fe}, node.${re}, node.${Se}, edge`,onClickFunction(c){var p=c.target||c.cyTarget;const b=u(p,"nodes.edges");if(b===null)return null;bootbox.prompt({title:"Enter New Font Size:",value:p.style("font-size"),callback(_){_!==null&&o.do("style",{eles:b,style:{"font-size":_}})}})}}];let a;function f(c,p,b){var _=document.getElementById("picker");_.style.display="block",_.style.left=event.pageX+"px",_.style.top=event.pageY+"px";let h;a=p;const E=function(M){h=M.hexString};r.on("color:change",E);const m=function(M){_.contains(M.target)||(b=="edge"?o.do("style",{eles:a,style:{"line-color":h,"target-arrow-color":h,"source-arrow-color":h}}):o.do("style",{eles:a,style:{"background-color":h}}),_.style.display="none",r.off("color:change",E),document.removeEventListener("click",m),document.removeEventListener("keydown",y))};setTimeout(()=>document.addEventListener("click",m),0);const y=function(M){M.key==="Enter"&&m(M)};document.addEventListener("keydown",y)}const g=Fi(d,t.full);return we(()=>{l.contextMenus({menuItems:g})}),[]}class Ii extends Z{constructor(e){super(),J(this,e,xi,null,X,{})}}function Ni(n){let e;return{c(){e=R("div"),e.innerHTML=`<label class="control-label shiny-label-null" for="fileInput" id="fileInput-label"></label> 
  <div class="input-group svelte-1qxcvef"><label class="input-group-btn input-group-prepend"><span class="btn btn-default btn-file">Browse...
        <input id="dataUpload-fileInput" name="fileInput" type="file" style="position: absolute !important; top: -99999px !important; left: -99999px !important;" accept=".csv,.sav, .xlsx, .rds"/></span></label> 
    <input type="text" class="form-control" placeholder="No file selected" readonly="readonly"/></div> 
  <div id="fileInput_progress" class="progress active shiny-file-input-progress svelte-1qxcvef"><div class="progress-bar svelte-1qxcvef"></div></div>`,k(e,"class","form-group shiny-input-container svelte-1qxcvef")},m(i,t){D(i,e,t)},p:ie,i:ie,o:ie,d(i){i&&A(e)}}}class Ti extends Z{constructor(e){super(),J(this,e,null,Ni,X,{})}}function Pi(n){let e,i,t,o,s,l,r,u,d,a,f,g,c,p,b,_,h,E,m,y,M,O,w,N;return{c(){e=R("div"),i=R("button"),t=be("Show Data"),s=I(),l=R("div"),r=R("button"),u=be("User Model"),a=I(),f=R("button"),g=be("Lavaan Model"),p=I(),b=R("button"),_=be("Estimates"),m=I(),y=R("button"),M=be("More Results"),k(i,"class","btn btn-lg btn-default"),i.disabled=o=!n[2].dataAvail,k(r,"class",d="btn btn-lg "+(n[1]==="user model"?"btn-primary active":"btn-default")),k(f,"class",c="btn btn-lg "+(n[1]==="full model"?"btn-primary active":"btn-default")),k(b,"class",h="btn btn-lg "+(n[1]==="estimate"?"btn-primary active":"btn-default")),b.disabled=E=!n[2].dataAvail||n[2].modelEmpty,k(l,"class","btn-group btn-toggle svelte-xny576"),k(y,"class","btn btn-lg btn-default"),y.disabled=O=n[0].mode!="estimate",k(e,"class","toolbox navbar-static-bottom svelte-xny576")},m(z,$){D(z,e,$),x(e,i),x(i,t),x(e,s),x(e,l),x(l,r),x(r,u),x(l,a),x(l,f),x(f,g),x(l,p),x(l,b),x(b,_),x(e,m),x(e,y),x(y,M),w||(N=[oe(i,"click",n[6]),oe(r,"click",n[7]),oe(f,"click",n[8]),oe(b,"click",n[9]),oe(y,"click",n[10])],w=!0)},p(z,[$]){$&4&&o!==(o=!z[2].dataAvail)&&(i.disabled=o),$&2&&d!==(d="btn btn-lg "+(z[1]==="user model"?"btn-primary active":"btn-default"))&&k(r,"class",d),$&2&&c!==(c="btn btn-lg "+(z[1]==="full model"?"btn-primary active":"btn-default"))&&k(f,"class",c),$&2&&h!==(h="btn btn-lg "+(z[1]==="estimate"?"btn-primary active":"btn-default"))&&k(b,"class",h),$&4&&E!==(E=!z[2].dataAvail||z[2].modelEmpty)&&(b.disabled=E),$&1&&O!==(O=z[0].mode!="estimate")&&(y.disabled=O)},i:ie,o:ie,d(z){z&&A(e),w=!1,Je(N)}}}function Vi(){window.$("#data-modal-2").modal()}function Ri(n,e,i){let t,o,s;ee(n,te,b=>i(0,t=b)),ee(n,j,b=>i(2,o=b)),ee(n,de,b=>i(11,s=b));let l;function r(b){i(1,l=b),b!=="user model"?H(de,s.showLav=!0,s):H(de,s.showLav=!1,s),H(te,t.mode=b,t)}window.$("#data-modal-extend-results").on("hidden.bs.modal",function(){H(j,o.showServerErrors=!0,o)});function u(){window.$("#data-modal-extend-results").modal(),H(j,o.showServerErrors=!1,o)}let d=!1;we(()=>{i(5,d=!0)});const a=()=>Vi(),f=()=>r("user model"),g=()=>r("full model"),c=()=>r("estimate"),p=()=>u();return n.$$.update=()=>{n.$$.dirty&33&&d&&i(1,l=t.mode)},[t,l,o,r,u,d,a,f,g,c,p]}class zi extends Z{constructor(e){super(),J(this,e,Ri,Pi,X,{})}}function Gi(){return typeof Shiny=="object"&&Shiny!==null}function Bi(n){let e=0,i=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,o=n.nodes().length;n.nodes().forEach(r=>{let u=r.position();e+=u.x,u.x>i&&(i=u.x),u.y>t&&(t=u.y)});let s=e/o,l=t+100;return{x:s,y:l}}function Ui(n,e){if(!n)throw new Error(e||"Assertion failed")}function qi(n,e,i){let t,o,s;ee(n,te,a=>i(0,t=a)),ee(n,j,a=>i(1,o=a)),ee(n,Ae,a=>i(2,s=a));function l(a,f,g){let c,p,b;return f==="=~"?(c=Fe,p=a,b=g):f=="~1"?(p=1,b=a,c=Fe):(b=a,p=g,f==="~~"?a===g?c=lt:c=xe:c=Fe),{directed:c,source:p,target:b}}function r(a,f,g,c){let p=l(a,f,g);p.user=c;const _=W(Q).edges(function(h){let E;if(p.source!=1?(E=h.source().getLabel()==p.source&&h.target().getLabel()==p.target,p.directed==xe&&(E=E||h.source().getLabel()==p.target&&h.target().getLabel()==p.source)):E=h.source().isConstant()&&h.target().getLabel()==p.target,p.user!=null)if(p.user==1)E=E&&h.isUserAdded();else if(p.user==0)E=E&&h.isLavaanAdded();else throw new Error("User was neither 0 nor 1");return E});if(_.length>1)throw new Error("Multiple edges found");return _}function u(a,f){H(j,o.meansModelled=!1,o),H(j,o.loadingMode=!0,o);let g=W(Q);if(!f)g.edges().invalidate();else{let h=function(y,M,O){pe(y,O,!1,M)};const _=Array.isArray(a.obs)?a.obs:[a.obs];let E={x:200,y:200};for(let y=0;y<_.length;y++)E.x=E.x+50,h(re,_[y],E);const m=Array.isArray(a.latent)?a.latent:[a.latent];E={x:200,y:100};for(let y=0;y<m.length;y++)E.x=E.x+50,h(fe,m[y]);a=a.parTable}const c=new Set;for(let _=0;_<a.lhs.length;_++)a.op[_]==="|"&&c.add(a.lhs[_]);let p=!1,b;for(let _=0;_<a.lhs.length;_++){if(a.op[_]=="~*~"||a.op[_]=="|")continue;let h=r(a.lhs[_],a.op[_],a.rhs[_],a.user[_]);if(!f&&a.user[_]==1)Ui(h.length==1),h.validate(),h.isModifiedLavaan()&&h.isFixed()&&h.revertLavaanFix(),a.free[_]==0&&!h.isFixed()&&h.fixPara(a.ustart[_]).markModifiedLavaan();else{let E;if(f||h.length==0){const m=l(a.lhs[_],a.op[_],a.rhs[_]);if(f&&o.full&&a.user[_]==0)continue;let y;if(m.source!==1)y=g.nodes(function(O){return O.getLabel()==m.source})[0].id();else{if(H(j,o.meansModelled=!0,o),a.free[_]==0&&a.ustart[_]==0)continue;p||(b=pe(Se,Bi(g),!1),p=!0,g.nodes(function(w){return w.id()==b})[0].markAddedLavaan()),y=b}const M=g.nodes(function(O){return O.getLabel()==m.target})[0].id();E=g.add({groups:"edges",data:{source:y,target:M},classes:m.directed+" nolabel"}),a.label[_]!=""&&E.addLabelImport(a.label[_]),a.user[_]==1?E.markAddedUser():E.markAddedLavaan(),$e(y),$e(M)}else!f&&h.length==1&&(E=h);a.free[_]==0?a.ustart[_]!==0&&a.exo[_]!==1?c.has(E.target().getLabel())&&a.op[_]=="~~"?E.fixPara("Total Variance 1"):E.fixPara(a.ustart[_]):E.remove():E.setFree(),f||E.validate()}}f?(pt("tree",!1),g.fit()):(g.edges().forEach(_=>{_.isValid()||_.remove()}),g.getLavaanNodes().forEach(_=>{_.connectedEdges().length==0&&(_.remove(),g.nodes().forEach(h=>{$e(h.id())}))})),o.parsedModel||H(j,o.parsedModel=!0,o),g.getUserEdges().length>0&&H(j,o.modelEmpty=!1,o),H(j,o.loadingMode=!1,o)}function d(a,f){W(Q);const g=a.op.some(c=>c.includes("~~"));for(let c=0;c<a.lhs.length;c++){if(a.op[c]=="~*~"||a.op[c]=="|")continue;let p=r(a.lhs[c],a.op[c],a.rhs[c]);if(p.length>0){let b={};p.isFree()?(b.est=a.est[c],b.p_value=a.pvalue[c],b.se=a.se[c],b.ciLow=a["ci.lower"][c],b.ciHigh=a["ci.upper"][c],b.est_std=f["est.std"][c],b.se_std=f.se[c],b.ciLow_std=f["ci.lower"][c],b.ciHigh_std=f["ci.upper"][c],p.addClass("hasEst")):g&&a.op[c]=="~~"&&(b.estFixed=a.est[c],b.estFixed_std=f["est.std"][c],p.addClass("hasEstFixed")),p.data("estimates",b)}}}return Gi()&&(Shiny.addCustomMessageHandler("dataInfo",function(a){gt(a.columns),H(j,o.columnNames=[...a.columns],o),H(j,o.ids=[...a.columns],o),H(j,o.loadedFileName=a.name,o),H(j,o.dataAvail=!0,o),se(t.mode),a.showData&&window.$("#data-modal-2").modal()}),Shiny.addCustomMessageHandler("lav_failed",function(a){H(j,o.fitting=!1,o),a=="stopped"?he("danger","Fitting stopped by user"):he("danger","Fitting failed")}),Shiny.addCustomMessageHandler("fitting",function(a){H(j,o.fitting=!0,o)}),Shiny.addCustomMessageHandler("lav_warning_error",function(a){const f=a.type=="warning"?"warning":"error";he(a.type,`During ${a.origin} the following ${f} occurred: ${a.message}`)}),Shiny.addCustomMessageHandler("lav_error_fitting",function(a){H(j,o.fitting=!1,o),he(a.type,"During "+a.origin+" the following error occurred: "+a.message)}),Shiny.addCustomMessageHandler("usecache",function(a){he("info","Reusing cached results because model and data did not change since last fit")}),Shiny.addCustomMessageHandler("data_missing",function(a){he("danger","Could not fit model because no data is available")}),Shiny.addCustomMessageHandler("columnames",function(a){const f=W(Q),g=o.columnNames[a.index];H(j,o.columnNames[a.index]=a.newcolname,o),f.getObservedNodes().forEach(c=>{c.getLabel()==g&&(c.setLabel(a.newcolname),se(t.mode))}),gt(o.columnNames)}),Shiny.addCustomMessageHandler("missing_vars",function(a){var f=[].concat(a).join(", ");he("danger","Could not fit model because "+f+" are observed variables in the model but not present in the data.")}),Shiny.addCustomMessageHandler("lav_model",function(a){u(a,!1)}),Shiny.addCustomMessageHandler("imported_model",function(a){u(a,!0);let f=W(Q);Array.isArray(a.ordered)||(a.ordered=[a.ordered]),a.ordered.forEach(g=>{f.nodes(function(c){return c.getLabel()==g})[0].makeOrdered()}),H(te,t.fix_first=!1,t),he("warning","start_gui only imports user edges. Your full model is very likely different than what you fitted in lavaan because of different options used. To display the model, as you fitted it in lavaan, use plot_interactive")}),Shiny.addCustomMessageHandler("lav_results",function(a){H(j,o.loadingMode=!0,o),H(Ae,s.lastFitLavFit=a.fitted_model,s),H(Ae,s.lastFitModel=a.model,s),H(Ae,s.lastFitData=a.data,s),H(j,o.fitting=!1,o),H(j,o.loadingMode=!1,o)}),Shiny.addCustomMessageHandler("lav_estimates",function(a){const f=a.normal,g=a.std;d(f,g)}),Shiny.addCustomMessageHandler("setToEstimate",function(a){H(te,t.mode="estimate",t)})),[]}class ji extends Z{constructor(e){super(),J(this,e,qi,null,X,{})}}function Hi(n){Nn(q);let e=W(Q);var i={zoomFactor:.05,zoomDelay:45,minZoom:e.minZoom(),maxZoom:e.maxZoom(),fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit(){return!1},fitAnimationDuration:1e3};return we(()=>{e.panzoom(i),e.on("zoom",function(t){var o=e.zoom();o<i.minZoom?e.zoom(i.minZoom):o>i.maxZoom&&e.zoom(i.maxZoom)})}),[]}class Wi extends Z{constructor(e){super(),J(this,e,Hi,null,X,{})}}function Yi(n){let e,i;const t=n[1].default,o=Xe(t,n,n[0],null);return{c(){e=R("div"),o&&o.c(),k(e,"class","svelte-16igfw6")},m(s,l){D(s,e,l),o&&o.m(e,null),i=!0},p(s,[l]){o&&o.p&&(!i||l&1)&&Ke(o,t,s,s[0],i?et(t,s[0],l,null):Qe(s[0]),null)},i(s){i||(S(o,s),i=!0)},o(s){L(o,s),i=!1},d(s){s&&A(e),o&&o.d(s)}}}function Zi(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=s=>{"$$scope"in s&&i(0,o=s.$$scope)},[o,t]}class Ji extends Z{constructor(e){super(),J(this,e,Zi,Yi,X,{})}}function Xi(n,e,i){let t;ee(n,j,s=>i(0,t=s));let o=W(Q);return setInterval(()=>{!t.drawing&&o&&(o.autoungrabify(!1),o.nodes().grabify())},1e3),we(()=>{Shiny.unbindAll(),Shiny.bindAll()}),[]}class Ki extends Z{constructor(e){super(),J(this,e,Xi,null,X,{})}}function Qt(n){let e,i,t,o,s,l;return{c(){e=R("div"),i=R("button"),i.innerHTML='<span class="glyphicon glyphicon-refresh spinning svelte-16d2v0h"></span> Fitting...',t=I(),o=R("button"),o.textContent="Cancel",k(i,"class","btn btn-lg btn-secondary fixed-width disabled-button svelte-16d2v0h"),k(i,"id","fitting-button"),i.disabled=!0,k(o,"class","btn btn-lg btn-default fixed-width svelte-16d2v0h"),k(e,"class","center-screen svelte-16d2v0h")},m(r,u){D(r,e,u),x(e,i),x(e,t),x(e,o),s||(l=oe(o,"click",es),s=!0)},p:ie,d(r){r&&A(e),s=!1,l()}}}function Qi(n){let e,i=n[0].fitting&&Qt();return{c(){i&&i.c(),e=Ge()},m(t,o){i&&i.m(t,o),D(t,e,o)},p(t,[o]){t[0].fitting?i?i.p(t,o):(i=Qt(),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ie,o:ie,d(t){i&&i.d(t),t&&A(e)}}}function es(){Shiny.setInputValue("run-abort",Math.random())}function ts(n,e,i){let t;return ee(n,j,o=>i(0,t=o)),[t]}class ns extends Z{constructor(e){super(),J(this,e,ts,Qi,X,{})}}function en(n){let e,i,t=n[2][n[0].type].label+"",o,s,l=n[0].message+"",r,u;return{c(){e=R("div"),i=R("strong"),o=be(t),s=I(),r=be(l),k(e,"class",u=Te(n[2][n[0].type].class+(n[1]?" fadeOut":""))+" svelte-1wv9zbn")},m(d,a){D(d,e,a),x(e,i),x(i,o),x(e,s),x(e,r)},p(d,a){a&1&&t!==(t=d[2][d[0].type].label+"")&&Pe(o,t),a&1&&l!==(l=d[0].message+"")&&Pe(r,l),a&3&&u!==(u=Te(d[2][d[0].type].class+(d[1]?" fadeOut":""))+" svelte-1wv9zbn")&&k(e,"class",u)},d(d){d&&A(e)}}}function os(n){let e,i=n[0].message!==""&&en(n);return{c(){i&&i.c(),e=Ge()},m(t,o){i&&i.m(t,o),D(t,e,o)},p(t,[o]){t[0].message!==""?i?i.p(t,o):(i=en(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ie,o:ie,d(t){i&&i.d(t),t&&A(e)}}}function is(n,e,i){let t;ee(n,an,r=>i(0,t=r));let o={success:{class:"alert-success",label:"Success!"},info:{class:"alert-info",label:"Info!"},warning:{class:"alert-warning",label:"Warning!"},danger:{class:"alert-danger",label:"Danger!"}},s=!1,l;return n.$$.update=()=>{n.$$.dirty&9&&t.message!==""&&(i(1,s=!1),clearTimeout(l),i(3,l=setTimeout(()=>{i(1,s=!0)},1e4)))},[t,s,o,l]}class ss extends Z{constructor(e){super(),J(this,e,is,os,X,{})}}function ls(n,e){const i={};return n.forEach((t,o)=>{i[t]=e[o]}),i}function rs(n,e,i){let t;ee(n,Re,s=>i(0,t=s));let o=W(Q);return we(()=>{q.use(Tn);const s={isDebug:!0};let l=o.undoRedo(s);Re.set(l),l.action("style",function(r){let u={};const d=Object.keys(r.style);return r.eles.forEach(function(a){let f=[];d.forEach(g=>{f.push(a.data(g)||a.style(g)),a.data(g,r.style[g])}),u[a.id()]=ls(d,f)}),{eles:r.eles,style:u}},function(r){const u=r.eles[0].style();return Object.keys(r.style).forEach(function(d){var a=o.getElementById(d);for(var f in r.style[d])a.data(f,r.style[d][f])}),{eles:r.eles,style:u}}),document.addEventListener("keydown",function(r){(r.ctrlKey||r.metaKey)&&r.target.nodeName==="BODY"&&(r.which===90||r.which===89)&&(r.preventDefault(),r.stopPropagation(),r.which===90?t.undo():r.which===89&&t.redo())}),document.addEventListener("keyup",function(r){r.metaKey&&r.target.nodeName==="BODY"&&(r.which===90||r.which===89)&&(r.preventDefault(),r.stopPropagation())})}),[]}class as extends Z{constructor(e){super(),J(this,e,rs,null,X,{})}}function us(){return typeof Shiny=="object"&&Shiny!==null}function ds(n,e,i){let t;return ee(n,j,o=>i(0,t=o)),us()?Shiny.addCustomMessageHandler("full",function(o){H(j,t.full=o,t),H(j,t.ready=!0,t)}):(H(j,t.full=!0,t),H(j,t.ready=!0,t)),[]}class cs extends Z{constructor(e){super(),J(this,e,ds,null,X,{})}}function fs(n,e,i){let t;ee(n,de,s=>i(1,t=s));let o=!1;return we(()=>{i(0,o=!0)}),n.$$.update=()=>{n.$$.dirty&3&&o&&Go(t.showVar,t.showLav,t.showMean),n.$$.dirty&3&&o&&zo(t.view,t.std,t.number_digits)},[o,t]}class ms extends Z{constructor(e){super(),J(this,e,fs,null,X,{})}}function gs(n){let e,i,t,o;const s=n[6].default,l=Xe(s,n,n[5],null);return{c(){e=R("section"),l&&l.c(),_e(e,"left",n[0]+"px"),_e(e,"top",n[1]+"px"),k(e,"class","draggable svelte-13fkbj1")},m(r,u){D(r,e,u),l&&l.m(e,null),i=!0,t||(o=[oe(window,"mouseup",n[4]),oe(window,"mousemove",n[3]),oe(e,"mousedown",n[2])],t=!0)},p(r,[u]){l&&l.p&&(!i||u&32)&&Ke(l,s,r,r[5],i?et(s,r[5],u,null):Qe(r[5]),null),(!i||u&1)&&_e(e,"left",r[0]+"px"),(!i||u&2)&&_e(e,"top",r[1]+"px")},i(r){i||(S(l,r),i=!0)},o(r){L(l,r),i=!1},d(r){r&&A(e),l&&l.d(r),t=!1,Je(o)}}}function ps(n,e,i){let{$$slots:t={},$$scope:o}=e,{left:s=100}=e,{top:l=100}=e,r=!1,u=0,d=0;function a(c){r=!0,u=c.clientX-s,d=c.clientY-l}function f(c){r&&(i(0,s=c.clientX-u),i(1,l=c.clientY-d))}function g(){r=!1}return n.$$set=c=>{"left"in c&&i(0,s=c.left),"top"in c&&i(1,l=c.top),"$$scope"in c&&i(5,o=c.$$scope)},[s,l,a,f,g,o,t]}class hs extends Z{constructor(e){super(),J(this,e,ps,gs,X,{left:0,top:1})}}function bs(n){let e,i,t;const o=n[0].default,s=Xe(o,n,n[1],null);return{c(){e=R("ul"),i=R("div"),s&&s.c(),_e(i,"display","flex"),_e(i,"flex-direction","column"),k(e,"class","nav navbar-nav navbar-left"),_e(e,"border","1px solid black"),_e(e,"z-index","9999")},m(l,r){D(l,e,r),x(e,i),s&&s.m(i,null),t=!0},p(l,r){s&&s.p&&(!t||r&2)&&Ke(s,o,l,l[1],t?et(o,l[1],r,null):Qe(l[1]),null)},i(l){t||(S(s,l),t=!0)},o(l){L(s,l),t=!1},d(l){l&&A(e),s&&s.d(l)}}}function _s(n){let e,i;return e=new hs({props:{$$slots:{default:[bs]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const s={};o&2&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function $s(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=s=>{"$$scope"in s&&i(1,o=s.$$scope)},[t,o]}class vs extends Z{constructor(e){super(),J(this,e,$s,_s,X,{})}}function ys(n,e){return bootbox.alert({title:"<span style='color: red;'>Error</span>",message:`A ${e} error occurred:<br> <span style='color: red;'>${n}</span>.<br><br>Please consider reporting this issue by sending an email to <a href="mailto:j.d.karch@fsw.leidenuniv.nl">j.d.karch@fsw.leidenuniv.nl</a>.`,centerVertical:!0}),!0}function ws(){return typeof Shiny=="object"&&Shiny!==null}function ks(n){return ws()&&Shiny.addCustomMessageHandler("serverError",function(e){W(j).showServerErrors&&ys(e.msg,"Server")}),[]}class Cs extends Z{constructor(e){super(),J(this,e,ks,null,X,{})}}function Es(n,e,i){let t;return ee(n,te,o=>i(0,t=o)),n.$$.update=()=>{n.$$.dirty&1&&se(t.mode)},[t]}class Ss extends Z{constructor(e){super(),J(this,e,Es,null,X,{})}}function Ls(n){q.use(Pn);let e=W(Q);return we(()=>{e.automove({nodesMatching:".automove-viewport",reposition:"viewport"})}),[]}class Ms extends Z{constructor(e){super(),J(this,e,Ls,null,X,{})}}function Ds(n){Vn(q,window.$,ln);let e=W(Q);return we(()=>{e.nodeEditing({resizeToContentCueImage:"",undoable:!0})}),[]}class As extends Z{constructor(e){super(),J(this,e,Ds,null,X,{})}}function Os(n){return q("collection","init",function(){return this.addClass(ke).addClass(We).addClass(me),this}),q("collection","free",function(){return this.hasClass(ke)}),q("collection","addLabel",function(e){return this.addLabelImport(e).removeClass(Ne),this}),q("collection","addLabelImport",function(e){return this.data("label",e).addClass(Ve).removeClass(We),this}),q("collection","removeLabel",function(){return this.removeClass(Ve).addClass(We).data("label",null),this}),q("collection","setLabel",function(e){return this.data("label",e),this}),q("collection","getLabel",function(){return this.data("label")}),q("collection","fixPara",function(e){return this.data("value",e).removeClass(ke).removeClass(Me).removeClass(Ct).addClass(Ce),this}),q("collection","freePara",function(){return this.removeClass(Ce).removeClass(Me).removeClass(Ne).addClass(ke),this}),q("collection","setFree",function(){return this.removeClass(Ce).removeClass(Me).addClass(ke),this}),q("collection","forceFreePara",function(){return this.removeClass(ke).removeClass(Ce).removeClass(Ne).addClass(Me),this}),q("collection","revert",function(){const e=this.source().id(),i=this.target().id();return this.move({source:i,target:e}),this}),q("collection","setUndirected",function(){return this.removeClass(Fe).addClass(xe),this}),q("collection","setDirected",function(){return this.removeClass(xe).addClass(Fe),this}),q("collection","isUndirected",function(){return this.hasClass(xe)}),q("collection","isDirected",function(){return this.hasClass(Fe)}),q("collection","makeLoop",function(){return this.addClass(lt),this}),q("collection","myIsLoop",function(){return this.hasClass(lt)}),q("collection","makeMeanEdge",function(){return this.data("isMean","1"),this}),q("collection","isMean",function(){return this.data("isMean")==="1"||this.isConstant()}),q("collection","makeOtherEdge",function(){return this.data("isMean","0"),this}),q("collection","isFixed",function(){return this.hasClass(Ce)}),q("collection","isFree",function(){return this.hasClass(ke)||this.hasClass(Me)}),q("collection","isForceFree",function(){return this.hasClass(Me)}),q("collection","hasLabel",function(){return this.hasClass(Ve)}),q("collection","isModifiedLavaan",function(){return this.hasClass(Ne)}),q("collection","markModifiedLavaan",function(){return this.addClass(Ne),this}),q("collection","markAddedLavaan",function(){return this.addClass(De).removeClass(me),this}),q("collection","markAddedUser",function(){return this.removeClass(De).addClass(me),this}),q("collection","isUserAdded",function(){return this.hasClass(me)}),q("collection","isLavaanAdded",function(){return this.hasClass(De)}),q("collection","getValue",function(){return this.data("value")}),q("collection","setValue",function(e){this.data("value",e)}),q("collection","invalidate",function(){return this.removeClass(ut),this}),q("collection","validate",function(){return this.addClass(ut),this}),q("collection","isValid",function(){return this.hasClass(ut)}),q("collection","revertLavaanFix",function(){this.freePara().removeClass(Ne)}),q("collection","removeEstimates",function(){return this.removeClass(Ct).removeClass(Bn),this.removeData("estimates"),this}),q("collection","link",function(){return this.addClass(ze),this}),q("collection","unlink",function(){return this.removeClass(ze),this}),q("collection","isLinked",function(){return this.hasClass(ze)}),q("collection","isLatent",function(){return this.hasClass(fe)}),q("collection","makeLatent",function(){return this.removeClass(re).addClass(fe).removeClass(ze),this}),q("collection","makeObserved",function(){return this.addClass(re).removeClass(fe),this}),q("collection","makeOrdered",function(){return this.removeClass(Ze).addClass(Ye),this}),q("collection","isOrdered",function(){return this.hasClass(Ye)}),q("collection","makeContinous",function(){return this.addClass(Ze).removeClass(Ye),this}),q("collection","isConstant",function(){return this.hasClass(Se)}),q("collection","isObserved",function(){return this.hasClass(re)}),q("core","getLavaanNodes",function(){return this.nodes(`.${De}`)}),q("core","getLavaanEdges",function(){return this.edges(`.${De}`)}),q("core","getObservedNodes",function(){return this.nodes(`.${re}`)}),q("core","getUserEdges",function(){return this.edges(`.${me}`)}),q("core","getLavaanModifiedEdges",function(){return this.edges(`.${Ne}`)}),q("core","getLatentNodes",function(){return this.nodes(function(e){return e.hasClass(fe)})}),[]}class Fs extends Z{constructor(e){super(),J(this,e,Os,null,X,{})}}function xs(n){Rn(q,window.$,ln);let e=W(Q);return we(()=>{e.edgeEditing({undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4}),e.style().update()}),[]}class Is extends Z{constructor(e){super(),J(this,e,xs,null,X,{})}}function Ns(n){return Shiny.addCustomMessageHandler("autoExport",function(e){console.log(e),setTimeout(()=>{pn().then(i=>{Shiny.setInputValue("exportedGraph",i)})},1e3)}),Shiny.addCustomMessageHandler("savedModel",function(e){Lo(e)}),[]}class Ts extends Z{constructor(e){super(),J(this,e,Ns,null,X,{})}}function tn(n){let e,i,t,o,s,l,r,u,d,a,f,g,c,p,b,_,h,E,m=n[0].full&&nn();i=new Wn({});const y=[Vs,Ps],M=[];function O($,v){return $[0].full?0:1}s=O(n),l=M[s]=y[s](n),u=new Ji({props:{$$slots:{default:[zs]},$$scope:{ctx:n}}});const w=[Bs,Gs],N=[];function z($,v){return $[0].full?0:1}return a=z(n),f=N[a]=w[a](n),c=new Ai({}),b=new ji({}),h=new Ki({}),{c(){m&&m.c(),e=I(),G(i.$$.fragment),t=I(),o=R("div"),l.c(),r=I(),G(u.$$.fragment),d=I(),f.c(),g=I(),G(c.$$.fragment),p=I(),G(b.$$.fragment),_=I(),G(h.$$.fragment),k(o,"class","svelte-15ghafl")},m($,v){m&&m.m($,v),D($,e,v),B(i,$,v),D($,t,v),D($,o,v),M[s].m(o,null),x(o,r),B(u,o,null),x(o,d),N[a].m(o,null),D($,g,v),B(c,$,v),D($,p,v),B(b,$,v),D($,_,v),B(h,$,v),E=!0},p($,v){$[0].full?m?v&1&&S(m,1):(m=nn(),m.c(),S(m,1),m.m(e.parentNode,e)):m&&(ve(),L(m,1,1,()=>{m=null}),ye());let Y=s;s=O($),s!==Y&&(ve(),L(M[Y],1,1,()=>{M[Y]=null}),ye(),l=M[s],l||(l=M[s]=y[s]($),l.c()),S(l,1),l.m(o,r));const ge={};v&3&&(ge.$$scope={dirty:v,ctx:$}),u.$set(ge);let T=a;a=z($),a!==T&&(ve(),L(N[T],1,1,()=>{N[T]=null}),ye(),f=N[a],f||(f=N[a]=w[a]($),f.c()),S(f,1),f.m(o,null))},i($){E||(S(m),S(i.$$.fragment,$),S(l),S(u.$$.fragment,$),S(f),S(c.$$.fragment,$),S(b.$$.fragment,$),S(h.$$.fragment,$),E=!0)},o($){L(m),L(i.$$.fragment,$),L(l),L(u.$$.fragment,$),L(f),L(c.$$.fragment,$),L(b.$$.fragment,$),L(h.$$.fragment,$),E=!1},d($){m&&m.d($),$&&A(e),U(i,$),$&&A(t),$&&A(o),M[s].d(),U(u),N[a].d(),$&&A(g),U(c,$),$&&A(p),U(b,$),$&&A(_),U(h,$)}}}function nn(n){let e,i;return e=new ns({}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function Ps(n){let e,i;return e=new vs({props:{$$slots:{default:[Rs]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function Vs(n){let e,i;return e=new Si({}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function Rs(n){let e,i,t,o,s,l,r,u;return e=new hn({props:{full:!1}}),t=new _n({props:{minimal:!0}}),s=new yn({props:{minimal:!0}}),r=new wn({props:{minimal:!0}}),{c(){G(e.$$.fragment),i=I(),G(t.$$.fragment),o=I(),G(s.$$.fragment),l=I(),G(r.$$.fragment)},m(d,a){B(e,d,a),D(d,i,a),B(t,d,a),D(d,o,a),B(s,d,a),D(d,l,a),B(r,d,a),u=!0},p:ie,i(d){u||(S(e.$$.fragment,d),S(t.$$.fragment,d),S(s.$$.fragment,d),S(r.$$.fragment,d),u=!0)},o(d){L(e.$$.fragment,d),L(t.$$.fragment,d),L(s.$$.fragment,d),L(r.$$.fragment,d),u=!1},d(d){U(e,d),d&&A(i),U(t,d),d&&A(o),U(s,d),d&&A(l),U(r,d)}}}function on(n){let e,i;return e=new Mi({}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function zs(n){let e,i,t,o,s,l,r,u,d,a,f,g,c,p,b,_,h,E,m,y,M,O,w,N;e=new ro({}),t=new as({}),s=new Fs({}),r=new Gn({}),d=new Ms({}),f=new As({}),c=new Wi({}),b=new Ii({}),h=new uo({}),m=new ms({}),M=new Is({});let z=n[0].full&&on();return{c(){G(e.$$.fragment),i=I(),G(t.$$.fragment),o=I(),G(s.$$.fragment),l=I(),G(r.$$.fragment),u=I(),G(d.$$.fragment),a=I(),G(f.$$.fragment),g=I(),G(c.$$.fragment),p=I(),G(b.$$.fragment),_=I(),G(h.$$.fragment),E=I(),G(m.$$.fragment),y=I(),G(M.$$.fragment),O=I(),z&&z.c(),w=Ge()},m($,v){B(e,$,v),D($,i,v),B(t,$,v),D($,o,v),B(s,$,v),D($,l,v),B(r,$,v),D($,u,v),B(d,$,v),D($,a,v),B(f,$,v),D($,g,v),B(c,$,v),D($,p,v),B(b,$,v),D($,_,v),B(h,$,v),D($,E,v),B(m,$,v),D($,y,v),B(M,$,v),D($,O,v),z&&z.m($,v),D($,w,v),N=!0},p($,v){$[0].full?z?v&1&&S(z,1):(z=on(),z.c(),S(z,1),z.m(w.parentNode,w)):z&&(ve(),L(z,1,1,()=>{z=null}),ye())},i($){N||(S(e.$$.fragment,$),S(t.$$.fragment,$),S(s.$$.fragment,$),S(r.$$.fragment,$),S(d.$$.fragment,$),S(f.$$.fragment,$),S(c.$$.fragment,$),S(b.$$.fragment,$),S(h.$$.fragment,$),S(m.$$.fragment,$),S(M.$$.fragment,$),S(z),N=!0)},o($){L(e.$$.fragment,$),L(t.$$.fragment,$),L(s.$$.fragment,$),L(r.$$.fragment,$),L(d.$$.fragment,$),L(f.$$.fragment,$),L(c.$$.fragment,$),L(b.$$.fragment,$),L(h.$$.fragment,$),L(m.$$.fragment,$),L(M.$$.fragment,$),L(z),N=!1},d($){U(e,$),$&&A(i),U(t,$),$&&A(o),U(s,$),$&&A(l),U(r,$),$&&A(u),U(d,$),$&&A(a),U(f,$),$&&A(g),U(c,$),$&&A(p),U(b,$),$&&A(_),U(h,$),$&&A(E),U(m,$),$&&A(y),U(M,$),$&&A(O),z&&z.d($),$&&A(w)}}}function Gs(n){let e,i;return e=new Ts({}),{c(){G(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){L(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function Bs(n){let e,i,t,o,s,l;return e=new ss({}),t=new zi({}),s=new Ss({}),{c(){G(e.$$.fragment),i=I(),G(t.$$.fragment),o=I(),G(s.$$.fragment)},m(r,u){B(e,r,u),D(r,i,u),B(t,r,u),D(r,o,u),B(s,r,u),l=!0},i(r){l||(S(e.$$.fragment,r),S(t.$$.fragment,r),S(s.$$.fragment,r),l=!0)},o(r){L(e.$$.fragment,r),L(t.$$.fragment,r),L(s.$$.fragment,r),l=!1},d(r){U(e,r),r&&A(i),U(t,r),r&&A(o),U(s,r)}}}function Us(n){let e,i,t,o,s,l,r;e=new cs({});let u=n[0].ready&&tn(n);return o=new Ti({}),l=new Cs({}),{c(){G(e.$$.fragment),i=I(),u&&u.c(),t=I(),G(o.$$.fragment),s=I(),G(l.$$.fragment)},m(d,a){B(e,d,a),D(d,i,a),u&&u.m(d,a),D(d,t,a),B(o,d,a),D(d,s,a),B(l,d,a),r=!0},p(d,[a]){d[0].ready?u?(u.p(d,a),a&1&&S(u,1)):(u=tn(d),u.c(),S(u,1),u.m(t.parentNode,t)):u&&(ve(),L(u,1,1,()=>{u=null}),ye())},i(d){r||(S(e.$$.fragment,d),S(u),S(o.$$.fragment,d),S(l.$$.fragment,d),r=!0)},o(d){L(e.$$.fragment,d),L(u),L(o.$$.fragment,d),L(l.$$.fragment,d),r=!1},d(d){U(e,d),d&&A(i),u&&u.d(d),d&&A(t),U(o,d),d&&A(s),U(l,d)}}}function qs(n,e,i){let t;return ee(n,j,o=>i(0,t=o)),[t]}class js extends Z{constructor(e){super(),J(this,e,qs,Us,X,{})}}new js({target:document.getElementById("app")});
